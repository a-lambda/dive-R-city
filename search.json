[
  {
    "objectID": "posts/welcome/index.html",
    "href": "posts/welcome/index.html",
    "title": "Bienvenue",
    "section": "",
    "text": "Premier post informel. Bienvenue !\n\nJ’ai repris cette image mais le smartphone me semble de trop ici."
  },
  {
    "objectID": "posts/20241225_post_with_code/index.html",
    "href": "posts/20241225_post_with_code/index.html",
    "title": "Get geographic squares",
    "section": "",
    "text": "Code\nlibrary(ggplot2)\nlibrary(sf)\nlibrary(s2)\nlibrary(microbenchmark)\nlibrary(profvis)\nlibrary(purrr)\n\n\n\n\n\n# fonction génératrice de \"carré géographique\" de `alpha` degrés de côté\n# le point de base (lon, lat) est le point inférieur gauche. \n\nget_geo_square &lt;- function(lon, lat, alpha) {\n  \n  points &lt;- list(\n    matrix(\n      c(lon, lat,\n        lon + alpha, lat,\n        lon + alpha, lat + alpha,\n        lon, lat + alpha,\n        lon, lat),\n      ncol = 2,\n      byrow = TRUE\n    )\n  )\n  st_polygon(points)\n  \n}\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\n\n\nLa fonction renvoie un résultat si l’angle \\(\\alpha\\) vérifie la condition :\n\\[90^\\circ\\space\\bmod\\space\\alpha = 0\\]\n\n\n\n\n\n\n\nget_all_geo_squares_on_sphere &lt;- function(alpha) {\n  \n  if (90 %% alpha == 0) {\n    \n    lon &lt;- seq(-180, 180 - alpha, by = alpha)\n    lat &lt;- seq(-90, 90 - alpha, by = alpha)\n    geom &lt;- vector(\"list\", length = length(lon) * length(lat))\n    n &lt;- 0\n    for (x in lon) {\n      for (y in lat) {\n        n &lt;- n + 1\n        geom[[n]] &lt;- get_geo_square(x, y, alpha)\n      }\n    } \n    geom &lt;- geom |&gt; st_as_sfc(crs = st_crs(4326))\n    return(geom)\n  } else {\n    return(NULL)\n  }\n  \n}\n\n\n\n\n\n\nCode\nmicrobenchmark(\n  get_all_geo_squares_on_sphere(alpha = 1),\n  get_all_geo_squares_on_sphere(alpha = 10),\n  times = 10L\n) |&gt; \n  ggplot2::autoplot()\n\n\n\n\n\n\n\n\n\n\n\n\n\ngeo_squares &lt;- get_all_geo_squares_on_sphere(alpha = 10)\n\ngeo_centroids &lt;- geo_squares |&gt; \n  st_centroid()\n\nggplot() +\n  geom_sf(data = geo_squares) +\n  geom_sf(data = geo_centroids, color = \"red\", cex = 0.5)\n\n\n\n\n\n\n\n#--------------------------------------------------\n\ngeo_squares_moll &lt;- st_transform(\n  geo_squares,\n  crs = \"+proj=moll\"\n)\n\ngeo_centroids_moll &lt;- st_transform(\n  geo_centroids,\n  crs = \"+proj=moll\"\n)\n\nggplot() +\n  geom_sf(data = geo_squares_moll) +\n  geom_sf(data = geo_centroids_moll, color = \"red\", cex = 0.5)\n\n\n\n\n\n\n\n\n\n\n\n\nget_s2_square &lt;- function(lon, lat, alpha) {\n  \n  points &lt;- matrix(\n      c(lon, lat,\n        lon + alpha, lat,\n        lon + alpha, lat + alpha,\n        lon, lat + alpha,\n        lon, lat),\n      ncol = 2,\n      byrow = TRUE\n    )\n  s2_make_polygon(points[, 1], points[, 2])\n  \n}\n\nfunction get_all_s2_squares_on_sphere\n\nget_all_s2_squares_on_sphere &lt;- function(alpha) {\n  \n  if (90 %% alpha == 0) {\n    \n    lon &lt;- seq(-180, 180 - alpha, by = alpha)\n    lat &lt;- seq(-90, 90 - alpha, by = alpha)\n    geom &lt;- vector(mode = \"list\", length = length(lon) * length(lat))\n    n &lt;- 0\n    for (x in lon) {\n      for (y in lat) {\n        n &lt;- n + 1\n        geom[[n]] &lt;- get_s2_square(x, y, alpha)\n      }\n    } \n    geom &lt;- geom |&gt; \n      map(st_as_sfc) |&gt; \n      unlist(recursive = FALSE) |&gt; \n      st_as_sfc(crs = st_crs(4326))\n    return(geom)\n  } else {\n    return(NULL)\n  }\n  \n}\n\n\n\n\n\n\nCode\nmicrobenchmark(\n  get_all_s2_squares_on_sphere(alpha = 30),\n  get_all_s2_squares_on_sphere(alpha = 10),\n  times = 100\n) |&gt; \n  ggplot2::autoplot()\n\n\n\n\n\n\n\n\n\n\n\n\n\nprofvis::profvis({\n  get_all_s2_squares_on_sphere(alpha = 10)\n}\n)\n\n\n\n\n\n\n\n\n\ns2_squares &lt;- get_all_s2_squares_on_sphere(alpha = 10)\n\ns2_centroids &lt;- s2_squares |&gt; \n  st_centroid()\n\nggplot(data = s2_squares) +\n  geom_sf() +\n  geom_sf(data = s2_centroids, color = \"red\", cex = 0.5)\n\n\n\n\n\n\n\n#--------------------------------------------------\n\ns2_squares_moll &lt;- st_transform(\n  s2_squares,\n  crs = \"+proj=moll\"\n)\n\ns2_centroids_moll &lt;- st_transform(\n  s2_centroids,\n  crs = \"+proj=moll\"\n)\n\nggplot() +\n  geom_sf(data = s2_squares_moll) +\n  geom_sf(data = s2_centroids_moll, color = \"red\", cex = 0.5)"
  },
  {
    "objectID": "posts/20241225_post_with_code/index.html#get-geographic-squares",
    "href": "posts/20241225_post_with_code/index.html#get-geographic-squares",
    "title": "Get geographic squares",
    "section": "",
    "text": "Code\nlibrary(ggplot2)\nlibrary(sf)\nlibrary(s2)\nlibrary(microbenchmark)\nlibrary(profvis)\nlibrary(purrr)\n\n\n\n\n\n# fonction génératrice de \"carré géographique\" de `alpha` degrés de côté\n# le point de base (lon, lat) est le point inférieur gauche. \n\nget_geo_square &lt;- function(lon, lat, alpha) {\n  \n  points &lt;- list(\n    matrix(\n      c(lon, lat,\n        lon + alpha, lat,\n        lon + alpha, lat + alpha,\n        lon, lat + alpha,\n        lon, lat),\n      ncol = 2,\n      byrow = TRUE\n    )\n  )\n  st_polygon(points)\n  \n}\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\n\n\nLa fonction renvoie un résultat si l’angle \\(\\alpha\\) vérifie la condition :\n\\[90^\\circ\\space\\bmod\\space\\alpha = 0\\]\n\n\n\n\n\n\n\nget_all_geo_squares_on_sphere &lt;- function(alpha) {\n  \n  if (90 %% alpha == 0) {\n    \n    lon &lt;- seq(-180, 180 - alpha, by = alpha)\n    lat &lt;- seq(-90, 90 - alpha, by = alpha)\n    geom &lt;- vector(\"list\", length = length(lon) * length(lat))\n    n &lt;- 0\n    for (x in lon) {\n      for (y in lat) {\n        n &lt;- n + 1\n        geom[[n]] &lt;- get_geo_square(x, y, alpha)\n      }\n    } \n    geom &lt;- geom |&gt; st_as_sfc(crs = st_crs(4326))\n    return(geom)\n  } else {\n    return(NULL)\n  }\n  \n}\n\n\n\n\n\n\nCode\nmicrobenchmark(\n  get_all_geo_squares_on_sphere(alpha = 1),\n  get_all_geo_squares_on_sphere(alpha = 10),\n  times = 10L\n) |&gt; \n  ggplot2::autoplot()\n\n\n\n\n\n\n\n\n\n\n\n\n\ngeo_squares &lt;- get_all_geo_squares_on_sphere(alpha = 10)\n\ngeo_centroids &lt;- geo_squares |&gt; \n  st_centroid()\n\nggplot() +\n  geom_sf(data = geo_squares) +\n  geom_sf(data = geo_centroids, color = \"red\", cex = 0.5)\n\n\n\n\n\n\n\n#--------------------------------------------------\n\ngeo_squares_moll &lt;- st_transform(\n  geo_squares,\n  crs = \"+proj=moll\"\n)\n\ngeo_centroids_moll &lt;- st_transform(\n  geo_centroids,\n  crs = \"+proj=moll\"\n)\n\nggplot() +\n  geom_sf(data = geo_squares_moll) +\n  geom_sf(data = geo_centroids_moll, color = \"red\", cex = 0.5)\n\n\n\n\n\n\n\n\n\n\n\n\nget_s2_square &lt;- function(lon, lat, alpha) {\n  \n  points &lt;- matrix(\n      c(lon, lat,\n        lon + alpha, lat,\n        lon + alpha, lat + alpha,\n        lon, lat + alpha,\n        lon, lat),\n      ncol = 2,\n      byrow = TRUE\n    )\n  s2_make_polygon(points[, 1], points[, 2])\n  \n}\n\nfunction get_all_s2_squares_on_sphere\n\nget_all_s2_squares_on_sphere &lt;- function(alpha) {\n  \n  if (90 %% alpha == 0) {\n    \n    lon &lt;- seq(-180, 180 - alpha, by = alpha)\n    lat &lt;- seq(-90, 90 - alpha, by = alpha)\n    geom &lt;- vector(mode = \"list\", length = length(lon) * length(lat))\n    n &lt;- 0\n    for (x in lon) {\n      for (y in lat) {\n        n &lt;- n + 1\n        geom[[n]] &lt;- get_s2_square(x, y, alpha)\n      }\n    } \n    geom &lt;- geom |&gt; \n      map(st_as_sfc) |&gt; \n      unlist(recursive = FALSE) |&gt; \n      st_as_sfc(crs = st_crs(4326))\n    return(geom)\n  } else {\n    return(NULL)\n  }\n  \n}\n\n\n\n\n\n\nCode\nmicrobenchmark(\n  get_all_s2_squares_on_sphere(alpha = 30),\n  get_all_s2_squares_on_sphere(alpha = 10),\n  times = 100\n) |&gt; \n  ggplot2::autoplot()\n\n\n\n\n\n\n\n\n\n\n\n\n\nprofvis::profvis({\n  get_all_s2_squares_on_sphere(alpha = 10)\n}\n)\n\n\n\n\n\n\n\n\n\ns2_squares &lt;- get_all_s2_squares_on_sphere(alpha = 10)\n\ns2_centroids &lt;- s2_squares |&gt; \n  st_centroid()\n\nggplot(data = s2_squares) +\n  geom_sf() +\n  geom_sf(data = s2_centroids, color = \"red\", cex = 0.5)\n\n\n\n\n\n\n\n#--------------------------------------------------\n\ns2_squares_moll &lt;- st_transform(\n  s2_squares,\n  crs = \"+proj=moll\"\n)\n\ns2_centroids_moll &lt;- st_transform(\n  s2_centroids,\n  crs = \"+proj=moll\"\n)\n\nggplot() +\n  geom_sf(data = s2_squares_moll) +\n  geom_sf(data = s2_centroids_moll, color = \"red\", cex = 0.5)"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "A propos",
    "section": "",
    "text": "Un bac à sable de plus … :)"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "dive-R-city",
    "section": "",
    "text": "R packages database\n\n\n\n\n\n\nnews\n\n\ncode\n\n\nanalysis\n\n\n\n\n\n\n\n\n\nJan 7, 2025\n\n\nAlcor\n\n\n\n\n\n\n\n\n\n\n\n\nGet geographic squares\n\n\n\n\n\n\nnews\n\n\ncode\n\n\nanalysis\n\n\n\n\n\n\n\n\n\nDec 25, 2024\n\n\nAlcor\n\n\n\n\n\n\n\n\n\n\n\n\nBienvenue\n\n\n\n\n\n\nnews\n\n\n\n\n\n\n\n\n\nDec 23, 2024\n\n\nAlcor\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/20250107_post_with_code/index.html",
    "href": "posts/20250107_post_with_code/index.html",
    "title": "R packages database",
    "section": "",
    "text": "Code\nlibrary(purrr)\nlibrary(dplyr)\nlibrary(gt)\nlibrary(microbenchmark)\nlibrary(tools)\nlibrary(lobstr)\nlibrary(tibble)\n\n\n\n\n\nutilisation de la fonction available.packages du paquet utils\n\n\nmat_pkg &lt;- utils::available.packages()\n#head.matrix(mat_pkg)\ntbl_pkg &lt;- tibble::as_tibble(mat_pkg)\n\n\nUtilisation de la fonction CRAN_package_db du paquet tools\n\n\npkgdb &lt;- tools::CRAN_package_db()\n\n\ncomparaisons du nombre d’informations entre les 2 bases\n\n\n\nCode\ntbl_summary &lt;- tibble(\n             n = c(length(unique(tbl_pkg$Package)), \n                   length(unique(pkgdb$Package))),\n  fields_count = c(ncol(tbl_pkg), ncol(pkgdb)), \n        taille = c(lobstr::obj_size(tbl_pkg), lobstr::obj_size(pkgdb)) \n)\n\ngt_summary &lt;- gt(tbl_summary) |&gt; \n  tab_header(\n    title = md(\"**packages R disponibles**\"),\n    subtitle = md(paste(\"(en date du\", Sys.Date(), \")\"))\n  ) |&gt; \n  tab_footnote(\n    footnote = md(\"Quantité estimée avec la commande `obj_size`\"),\n    locations = cells_column_labels(columns = taille)\n  ) |&gt; \n  tab_footnote(\n    footnote = md(\"Données issues de la commande `available.packages`\"),\n    locations = cells_body(\n      columns = c(fields_count,n), rows = 1\n    )\n  ) |&gt; \n  tab_footnote(\n    footnote = md(\"Données issues de la commande `CRAN_package_db`\"),\n    locations = cells_body(\n      columns = c(fields_count,n), rows = 2\n    )\n  )\n\ngt_summary\n\n\n\n\n\n\n\n\npackages R disponibles\n\n\n(en date du 2025-01-07 )\n\n\nn\nfields_count\ntaille1\n\n\n\n\n2 21836\n2 17\n10.08 MB\n\n\n3 21862\n3 69\n53.74 MB\n\n\n\n1 Quantité estimée avec la commande obj_size\n\n\n2 Données issues de la commande available.packages\n\n\n3 Données issues de la commande CRAN_package_db\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nsimilar_pkgs &lt;- intersect(tbl_pkg$Package, pkgdb$Package)\n\n\n\n\n\n\n\n\nNote\n\n\n\n\n\n\nNous avons 21836 paquets en commun\nTous les paquets du tibble tbl_pkg sont présents dans le data.frame pkgdb puisque :\n\nlength(tbl_pkg$Package[!tbl_pkg$Package %in% similar_pkgs]) == 0\n\n\n\n\n\n\n\n\n\n\nCode\ndissimilar_pkgs &lt;- pkgdb$Package[!pkgdb$Package %in% similar_pkgs]\ndissimilar_pkgs\n\n\n [1] \"bigGP\"        \"bigReg\"       \"bspm\"         \"clrng\"        \"corrcoverage\"\n [6] \"cronR\"        \"cuda.ml\"      \"doMC\"         \"exif\"         \"flexiblas\"   \n[11] \"gcbd\"         \"gpuR\"         \"ieeeround\"    \"littler\"      \"MPCR\"        \n[16] \"naryn\"        \"nice\"         \"RApiDatetime\" \"RAppArmor\"    \"RcppGetconf\" \n[21] \"redcas\"       \"rspm\"         \"rsyslog\"      \"tglkmeans\"    \"tgstat\"      \n[26] \"unix\"        \n\n\n\n\n\n\n\nCode\npkgdb |&gt;\n  summarize(n = dplyr::n(), .by = Package) |&gt; \n  dplyr::filter(n &gt; 1) |&gt; \n  dplyr::inner_join(pkgdb) |&gt; \n  dplyr::select(c(Package, Version, Depends)) \n\n\nJoining with `by = join_by(Package)`\n\n\n      Package Version                                         Depends\n1        boot  1.3-31                   R (&gt;= 3.0.0), graphics, stats\n2        boot  1.3-31                     R (&gt;= 4.5), graphics, stats\n3       class  7.3-23                      R (&gt;= 3.0.0), stats, utils\n4       class  7.3-23                        R (&gt;= 4.5), stats, utils\n5     cluster   2.1.8                                    R (&gt;= 3.5.0)\n6     cluster   2.1.8                                      R (&gt;= 4.5)\n7   codetools  0.2-20                                      R (&gt;= 2.1)\n8   codetools  0.2-20                                      R (&gt;= 4.5)\n9     foreign  0.8-87                                    R (&gt;= 4.0.0)\n10    foreign  0.8-87                                      R (&gt;= 4.5)\n11 KernSmooth 2.23-26                             R (&gt;= 2.5.0), stats\n12 KernSmooth 2.23-26                               R (&gt;= 4.5), stats\n13    lattice  0.22-6                                    R (&gt;= 4.0.0)\n14    lattice  0.22-6                                      R (&gt;= 4.5)\n15       MASS  7.3-64 R (&gt;= 4.4.0), grDevices, graphics, stats, utils\n16       MASS  7.3-64   R (&gt;= 4.5), grDevices, graphics, stats, utils\n17     Matrix   1.7-1                           R (&gt;= 4.4.0), methods\n18     Matrix   1.7-1                             R (&gt;= 4.5), methods\n19       mgcv   1.9-1                  R (&gt;= 3.6.0), nlme (&gt;= 3.1-64)\n20       mgcv   1.9-1                    R (&gt;= 4.5), nlme (&gt;= 3.1-64)\n21       nlme 3.1-166                                    R (&gt;= 3.6.0)\n22       nlme 3.1-166                                      R (&gt;= 4.5)\n23       nnet  7.3-20                      R (&gt;= 3.0.0), stats, utils\n24       nnet  7.3-20                        R (&gt;= 4.5), stats, utils\n25      rpart  4.1.24       R (&gt;= 2.15.0), graphics, stats, grDevices\n26      rpart  4.1.23          R (&gt;= 4.5), graphics, stats, grDevices\n27    spatial  7.3-18            R (&gt;= 3.0.0), graphics, stats, utils\n28    spatial  7.3-18              R (&gt;= 4.5), graphics, stats, utils\n29   survival   3.8-3                                    R (&gt;= 3.5.0)\n30   survival   3.8-3                                      R (&gt;= 4.5)\n\n\n\n\n\n\nChamps communs\n\n\n\nCode\nsimilar_fields &lt;- names(tbl_pkg)[names(tbl_pkg) %in% names(pkgdb)]\nsimilar_fields\n\n\n [1] \"Package\"               \"Version\"               \"Priority\"             \n [4] \"Depends\"               \"Imports\"               \"LinkingTo\"            \n [7] \"Suggests\"              \"Enhances\"              \"License\"              \n[10] \"License_is_FOSS\"       \"License_restricts_use\" \"OS_type\"              \n[13] \"Archs\"                 \"MD5sum\"                \"NeedsCompilation\"     \n\n\n\nChamps différents\n\n\n\nCode\ndissimilar_fields_tbl_pkg &lt;- names(tbl_pkg)[!names(tbl_pkg) %in% names(pkgdb)]\ndissimilar_fields_pkgdb &lt;- names(pkgdb)[!names(pkgdb) %in% names(tbl_pkg)]\ndissimilar_fields &lt;- c(dissimilar_fields_tbl_pkg, dissimilar_fields_pkgdb)\ndissimilar_fields\n\n\n [1] \"File\"                    \"Repository\"             \n [3] \"Additional_repositories\" \"Author\"                 \n [5] \"Authors@R\"               \"Biarch\"                 \n [7] \"BugReports\"              \"BuildKeepEmpty\"         \n [9] \"BuildManual\"             \"BuildResaveData\"        \n[11] \"BuildVignettes\"          \"Built\"                  \n[13] \"ByteCompile\"             \"Classification/ACM\"     \n[15] \"Classification/ACM-2012\" \"Classification/JEL\"     \n[17] \"Classification/MSC\"      \"Classification/MSC-2010\"\n[19] \"Collate\"                 \"Collate.unix\"           \n[21] \"Collate.windows\"         \"Contact\"                \n[23] \"Copyright\"               \"Date\"                   \n[25] \"Date/Publication\"        \"Description\"            \n[27] \"Encoding\"                \"KeepSource\"             \n[29] \"Language\"                \"LazyData\"               \n[31] \"LazyDataCompression\"     \"LazyLoad\"               \n[33] \"MailingList\"             \"Maintainer\"             \n[35] \"Note\"                    \"Packaged\"               \n[37] \"RdMacros\"                \"StagedInstall\"          \n[39] \"SysDataCompression\"      \"SystemRequirements\"     \n[41] \"Title\"                   \"Type\"                   \n[43] \"URL\"                     \"UseLTO\"                 \n[45] \"VignetteBuilder\"         \"ZipData\"                \n[47] \"Path\"                    \"X-CRAN-Comment\"         \n[49] \"Published\"               \"Reverse depends\"        \n[51] \"Reverse imports\"         \"Reverse linking to\"     \n[53] \"Reverse suggests\"        \"Reverse enhances\"       \n[55] \"Deadline\"                \"DOI\"                    \n\n\n\n\n\n\n\nCode\nget_property &lt;- function(tbl, f) sapply(tbl, f)\n\nget_NA_count &lt;- function(x) sum(is.na(x))\nget_data_count &lt;- function(x) sum(!is.na(x))\nget_unique_count &lt;- function(x) length(unique(x))\n\nNA_count &lt;- tbl_pkg |&gt; get_property(get_NA_count)\ndata_count &lt;- tbl_pkg |&gt; get_property(get_data_count)\nunique_count &lt;- tbl_pkg |&gt; get_property(get_unique_count)\n\nresultat &lt;- t(rbind(data_count, NA_count, unique_count))\n\ntbl_summary &lt;- as_tibble(resultat)\ntbl_summary$field &lt;- dimnames(resultat)[[1]]\ntbl_summary &lt;- tbl_summary |&gt; \n  dplyr::relocate(\"field\")\n\nnames(tbl_summary) &lt;- c(\"champ\", \"data\", \"NA\", \"unique\")\n\ngt_summary &lt;- gt(tbl_summary) |&gt; \n  tab_header(\n    title = md(\"**Indications sur les différents champs**\"),\n    subtitle = md(\"(Décompte des lignes vérifiant la propriété)\")\n  ) \n\ngt_summary\n\n\n\n\n\n\n\n\nIndications sur les différents champs\n\n\n(Décompte des lignes vérifiant la propriété)\n\n\nchamp\ndata\nNA\nunique\n\n\n\n\nPackage\n21836\n0\n21836\n\n\nVersion\n21836\n0\n2374\n\n\nPriority\n23\n21813\n3\n\n\nDepends\n16103\n5733\n4484\n\n\nImports\n17639\n4197\n14996\n\n\nLinkingTo\n3070\n18766\n558\n\n\nSuggests\n14702\n7134\n9072\n\n\nEnhances\n225\n21611\n202\n\n\nLicense\n21836\n0\n159\n\n\nLicense_is_FOSS\n16\n21820\n3\n\n\nLicense_restricts_use\n12\n21824\n3\n\n\nOS_type\n13\n21823\n2\n\n\nArchs\n20\n21816\n3\n\n\nMD5sum\n21836\n0\n21836\n\n\nNeedsCompilation\n21836\n0\n2\n\n\nFile\n0\n21836\n1\n\n\nRepository\n21836\n0\n1\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# microbenchmark(\n#   get_NA_2(tbl_pkg),\n#   get_NA(tbl_pkg)\n# ) |&gt; \n#   ggplot2::autoplot()\n\n\n\n\n\n\n\nCode\ntable_licenses &lt;- table(tbl_pkg$License)\nmat_licenses &lt;- as.matrix(table_licenses)\ntbl_licenses &lt;- as_tibble(mat_licenses)\n\n\nWarning: The `x` argument of `as_tibble.matrix()` must have unique column names if\n`.name_repair` is omitted as of tibble 2.0.0.\nℹ Using compatibility `.name_repair`.\n\n\nCode\ntbl_licenses$license &lt;- dimnames(mat_licenses)[[1]]\ntbl_licenses &lt;- tbl_licenses |&gt; \n  dplyr::relocate(\"license\")\n\nnames(tbl_licenses) &lt;- c(\"licence\", \"n\")\n\n\n#--- licences orphelines\n\ntbl_orphan_licenses &lt;- tbl_licenses |&gt; \n    dplyr::filter(n == 1) |&gt; \n    left_join(tbl_pkg, join_by(licence == License)) |&gt; \n    select(Package, licence)\n\ngt_orphan_licenses &lt;- gt(tbl_orphan_licenses) |&gt; \n  tab_header(\n    title = md(\"**Nom des paquets liées à un type de licence orpheline**\"),\n    subtitle = md(\"(qui n'apparaît qu'une fois dans la liste des licences)\")\n  ) \n\ngt_orphan_licenses\n\n\n\n\n\n\n\n\nNom des paquets liées à un type de licence orpheline\n\n\n(qui n’apparaît qu’une fois dans la liste des licences)\n\n\nPackage\nlicence\n\n\n\n\nQDiabetes\nAGPL-3 + file LICENSE\n\n\nround\nAGPL (&gt;= 3) | file LICENSE\n\n\ntidywater\nApache License (&gt;= 2) | MIT + file LICENSE\n\n\nAutoDeskR\nApache License | file LICENSE\n\n\nrtson\nApache License Version 2.0\n\n\ntmle\nBSD_3_clause + file LICENSE | GPL-2\n\n\ninstall.load\nCC BY-SA 4.0 | GPL-3 | file LICENSE\n\n\ngmGeostats\nCC BY-SA 4.0 | GPL (&gt;= 2)\n\n\nigraphdata\nCC BY-SA 4.0 + file LICENSE\n\n\nSCGLR\nCeCILL-2 | GPL-2\n\n\nrunMCMCbtadjust\nCECILL-2.1\n\n\nAMAPVox\nCeCILL (&gt;= 2)\n\n\nRcsdp\nCPL-1.0\n\n\ntest2norm\nCPL (&gt;= 2)\n\n\nei.Datasets\nEPL | CC BY 4.0 | file LICENSE\n\n\nlphom\nEPL | file LICENSE\n\n\nflagr\nEUPL-1.1\n\n\nvardpoor\nEUPL | file LICENSE\n\n\nfontBitstreamVera\nfile LICENCE\n\n\nfastcluster\nFreeBSD | GPL-2 | file LICENSE\n\n\nvisvow\nGNU General Public License (&gt;= 2)\n\n\nNIPTeR\nGNU Lesser General Public License\n\n\nblender\nGPL-2 | Artistic-2.0\n\n\nRefManageR\nGPL-2 | GPL-3 | BSD_3_clause + file LICENSE\n\n\nridittools\nGPL-2 | GPL-3 | MIT + file LICENSE\n\n\ndmm\nGPL-2 | GPL (&gt;= 2) | GPL-3\n\n\nhunspell\nGPL-2 | LGPL-2.1 | MPL-1.1\n\n\nmidasr\nGPL-2 | MIT + file LICENCE\n\n\nsf\nGPL-2 | MIT + file LICENSE\n\n\nmapscanner\nGPL-3 | BSD_2_clause + file LICENSE\n\n\nconvergEU\nGPL-3 | BSD_3_clause + file LICENSE\n\n\neyelinker\nGPL-3 | file LICENCE\n\n\nmagree\nGPL-3 | GPL-2\n\n\nrxylib\nGPL-3 | LGPL-2.1\n\n\nconf\nGPL (&lt;= 2)\n\n\nminiGUI\nGPL (&lt;= 2.0)\n\n\nrjags\nGPL (== 2)\n\n\ncausalOT\nGPL (== 3.0)\n\n\nDiffCorr\nGPL (&gt; 3)\n\n\nPade\nGPL (&gt;= 2) | BSD_2_clause + file LICENSE\n\n\nsoilhypfit\nGPL (&gt;= 2) | LGPL-3\n\n\nmedfate\nGPL (&gt;= 2) | LGPL (&gt;= 3)\n\n\nRCriteo\nGPL (&gt;= 2) | MIT + file LICENSE\n\n\nmeteo\nGPL (&gt;= 2.0) | file LICENCE\n\n\nMAT\nGPL (&gt;= 2.10)\n\n\nTrialSize\nGPL (&gt;= 2.15.1)\n\n\nRM.weights\nGPL (&gt;= 3.0.0)\n\n\nconcatenate\nGPL (&gt;= 3.2)\n\n\ngMOIP\nGPL (&gt;= 3.3.2)\n\n\nseqminer\nGPL | file LICENSE\n\n\nsynchronicity\nLGPL-2 | Apache License 2.0\n\n\nbsts\nLGPL-2.1 | MIT + file LICENSE\n\n\ntcltk2\nLGPL-3 + file LICENSE\n\n\nRSNNS\nLGPL (&gt;= 2) | file LICENSE\n\n\nShortForm\nLGPL (&gt;= 2.0, &lt; 3) | Mozilla Public License\n\n\nmapproj\nLucent Public License\n\n\nlabeling\nMIT + file LICENSE | Unlimited\n\n\nRH2\nMozilla Public License 1.1\n\n\nASGS.foyer\nMPL\n\n\nvenneuler\nMPL-1.1\n\n\nRSpectra\nMPL (&gt;= 2)\n\n\nFIT\nMPL (&gt;= 2) | file LICENSE\n\n\nRborist\nMPL (&gt;= 2) | GPL (&gt;= 2) | file LICENSE\n\n\n\n\n\n\n\nCode\n#--- licences utilisées au moins 2 fois\n\ntbl_other_licenses &lt;- tbl_licenses |&gt; \n  filter(n &gt;= 1)\n\ngt_other_licenses &lt;- gt(tbl_other_licenses) |&gt; \n  tab_header(\n    title = md(\"**Nombre de paquets liées à des licences non orphelines**\"),\n    subtitle = md(\"(qui apparaît plus d'une fois dans la liste des licences)\")\n  ) \n\ngt_other_licenses\n\n\n\n\n\n\n\n\nNombre de paquets liées à des licences non orphelines\n\n\n(qui apparaît plus d’une fois dans la liste des licences)\n\n\nlicence\nn\n\n\n\n\nACM | file LICENSE\n2\n\n\nAGPL\n9\n\n\nAGPL-3\n125\n\n\nAGPL-3 | file LICENSE\n13\n\n\nAGPL-3 + file LICENSE\n1\n\n\nAGPL (&gt;= 3)\n59\n\n\nAGPL (&gt;= 3) | file LICENSE\n1\n\n\nAGPL + file LICENSE\n2\n\n\nApache License\n20\n\n\nApache License (== 2)\n9\n\n\nApache License (== 2.0)\n65\n\n\nApache License (== 2.0) | file LICENSE\n12\n\n\nApache License (&gt;= 2)\n135\n\n\nApache License (&gt;= 2) | MIT + file LICENSE\n1\n\n\nApache License (&gt;= 2.0)\n56\n\n\nApache License | file LICENSE\n1\n\n\nApache License 2.0\n136\n\n\nApache License 2.0 | file LICENSE\n31\n\n\nApache License Version 2.0\n1\n\n\nArtistic-2.0\n108\n\n\nArtistic License 2.0\n6\n\n\nBSD 2-clause License + file LICENSE\n12\n\n\nBSD 3-clause License + file LICENSE\n3\n\n\nBSD_2_clause + file LICENCE\n3\n\n\nBSD_2_clause + file LICENSE\n111\n\n\nBSD_3_clause + file LICENCE\n6\n\n\nBSD_3_clause + file LICENSE\n140\n\n\nBSD_3_clause + file LICENSE | GPL-2\n1\n\n\nBSD_3_clause + file LICENSE | GPL (&gt;= 2)\n4\n\n\nBSL\n2\n\n\nBSL-1.0\n7\n\n\nCC BY-NC-SA 4.0\n13\n\n\nCC BY-NC 4.0\n5\n\n\nCC BY-SA 4.0\n26\n\n\nCC BY-SA 4.0 | GPL-3 | file LICENSE\n1\n\n\nCC BY-SA 4.0 | GPL (&gt;= 2)\n1\n\n\nCC BY-SA 4.0 + file LICENSE\n1\n\n\nCC BY 4.0\n81\n\n\nCC0\n235\n\n\nCC0 | file LICENSE\n2\n\n\nCeCILL\n8\n\n\nCeCILL-2\n12\n\n\nCeCILL-2 | file LICENSE\n2\n\n\nCeCILL-2 | GPL-2\n1\n\n\nCECILL-2.1\n1\n\n\nCeCILL (&gt;= 2)\n1\n\n\nCommon Public License Version 1.0\n2\n\n\nCPL-1.0\n1\n\n\nCPL (&gt;= 2)\n1\n\n\nCreative Commons Attribution 4.0 International License\n2\n\n\nEPL\n3\n\n\nEPL | CC BY 4.0 | file LICENSE\n1\n\n\nEPL | file LICENSE\n1\n\n\nEUPL\n32\n\n\nEUPL-1.1\n1\n\n\nEUPL (&gt;= 1.1)\n2\n\n\nEUPL (&gt;= 1.2)\n4\n\n\nEUPL | file LICENSE\n1\n\n\nfile LICENCE\n1\n\n\nfile LICENSE\n10\n\n\nFreeBSD\n10\n\n\nFreeBSD | file LICENSE\n2\n\n\nFreeBSD | GPL-2 | file LICENSE\n1\n\n\nGNU General Public License\n28\n\n\nGNU General Public License (&gt;= 2)\n1\n\n\nGNU General Public License (&gt;= 3)\n6\n\n\nGNU General Public License version 2\n5\n\n\nGNU General Public License version 3\n3\n\n\nGNU Lesser General Public License\n1\n\n\nGPL\n447\n\n\nGPL-2\n2395\n\n\nGPL-2 | Artistic-2.0\n1\n\n\nGPL-2 | file LICENCE\n2\n\n\nGPL-2 | file LICENSE\n47\n\n\nGPL-2 | GPL-3\n339\n\n\nGPL-2 | GPL-3 | BSD_3_clause + file LICENSE\n1\n\n\nGPL-2 | GPL-3 | file LICENSE\n3\n\n\nGPL-2 | GPL-3 | MIT + file LICENSE\n1\n\n\nGPL-2 | GPL (&gt;= 2) | GPL-3\n1\n\n\nGPL-2 | LGPL-2.1 | MPL-1.1\n1\n\n\nGPL-2 | MIT + file LICENCE\n1\n\n\nGPL-2 | MIT + file LICENSE\n1\n\n\nGPL-3\n4873\n\n\nGPL-3 | BSD_2_clause + file LICENSE\n1\n\n\nGPL-3 | BSD_3_clause + file LICENSE\n1\n\n\nGPL-3 | file LICENCE\n1\n\n\nGPL-3 | file LICENSE\n136\n\n\nGPL-3 | GPL-2\n1\n\n\nGPL-3 | LGPL-2.1\n1\n\n\nGPL-3 + file LICENSE\n19\n\n\nGPL (&lt;= 2)\n1\n\n\nGPL (&lt;= 2.0)\n1\n\n\nGPL (== 2)\n1\n\n\nGPL (== 3.0)\n1\n\n\nGPL (&gt; 2)\n10\n\n\nGPL (&gt; 3)\n1\n\n\nGPL (&gt;= 2)\n4277\n\n\nGPL (&gt;= 2) | BSD_2_clause + file LICENSE\n1\n\n\nGPL (&gt;= 2) | file LICENCE\n8\n\n\nGPL (&gt;= 2) | file LICENSE\n47\n\n\nGPL (&gt;= 2) | LGPL-3\n1\n\n\nGPL (&gt;= 2) | LGPL (&gt;= 2)\n2\n\n\nGPL (&gt;= 2) | LGPL (&gt;= 3)\n1\n\n\nGPL (&gt;= 2) | MIT + file LICENSE\n1\n\n\nGPL (&gt;= 2.0)\n103\n\n\nGPL (&gt;= 2.0) | file LICENCE\n1\n\n\nGPL (&gt;= 2.0) | file LICENSE\n3\n\n\nGPL (&gt;= 2.1)\n3\n\n\nGPL (&gt;= 2.10)\n1\n\n\nGPL (&gt;= 2.15.1)\n1\n\n\nGPL (&gt;= 3)\n2022\n\n\nGPL (&gt;= 3) | file LICENCE\n5\n\n\nGPL (&gt;= 3) | file LICENSE\n28\n\n\nGPL (&gt;= 3.0)\n45\n\n\nGPL (&gt;= 3.0.0)\n1\n\n\nGPL (&gt;= 3.2)\n1\n\n\nGPL (&gt;= 3.3.2)\n1\n\n\nGPL (&gt;= 3.5.0)\n5\n\n\nGPL | file LICENSE\n1\n\n\nLGPL\n47\n\n\nLGPL-2\n15\n\n\nLGPL-2 | Apache License 2.0\n1\n\n\nLGPL-2 | BSD_3_clause + file LICENSE\n2\n\n\nLGPL-2 | LGPL-3 | GPL-2 | GPL-3\n6\n\n\nLGPL-2.1\n27\n\n\nLGPL-2.1 | file LICENSE\n2\n\n\nLGPL-2.1 | MIT + file LICENSE\n1\n\n\nLGPL-3\n178\n\n\nLGPL-3 | Apache License 2.0\n5\n\n\nLGPL-3 | file LICENSE\n5\n\n\nLGPL-3 + file LICENSE\n1\n\n\nLGPL (&gt;= 2)\n24\n\n\nLGPL (&gt;= 2) | file LICENSE\n1\n\n\nLGPL (&gt;= 2.0)\n5\n\n\nLGPL (&gt;= 2.0, &lt; 3)\n2\n\n\nLGPL (&gt;= 2.0, &lt; 3) | Mozilla Public License\n1\n\n\nLGPL (&gt;= 2.1)\n59\n\n\nLGPL (&gt;= 3)\n71\n\n\nLGPL (&gt;= 3) | file LICENSE\n3\n\n\nLucent Public License\n1\n\n\nMIT + file LICENCE\n21\n\n\nMIT + file LICENSE\n4814\n\n\nMIT + file LICENSE | Apache License 2.0\n6\n\n\nMIT + file LICENSE | Unlimited\n1\n\n\nMIT License + file LICENSE\n6\n\n\nMozilla Public License 1.1\n1\n\n\nMozilla Public License 2.0\n7\n\n\nMozilla Public License Version 2.0\n2\n\n\nMPL\n1\n\n\nMPL-1.1\n1\n\n\nMPL-2.0\n16\n\n\nMPL-2.0 | file LICENSE\n7\n\n\nMPL (== 2.0)\n2\n\n\nMPL (&gt;= 2)\n1\n\n\nMPL (&gt;= 2) | file LICENSE\n1\n\n\nMPL (&gt;= 2) | GPL (&gt;= 2) | file LICENSE\n1\n\n\nMPL (&gt;= 2.0)\n2\n\n\nUnlimited\n49\n\n\nUnlimited | file LICENSE\n2"
  },
  {
    "objectID": "posts/20250107_post_with_code/index.html#paquets-r",
    "href": "posts/20250107_post_with_code/index.html#paquets-r",
    "title": "R packages database",
    "section": "",
    "text": "Code\nlibrary(purrr)\nlibrary(dplyr)\nlibrary(gt)\nlibrary(microbenchmark)\nlibrary(tools)\nlibrary(lobstr)\nlibrary(tibble)\n\n\n\n\n\nutilisation de la fonction available.packages du paquet utils\n\n\nmat_pkg &lt;- utils::available.packages()\n#head.matrix(mat_pkg)\ntbl_pkg &lt;- tibble::as_tibble(mat_pkg)\n\n\nUtilisation de la fonction CRAN_package_db du paquet tools\n\n\npkgdb &lt;- tools::CRAN_package_db()\n\n\ncomparaisons du nombre d’informations entre les 2 bases\n\n\n\nCode\ntbl_summary &lt;- tibble(\n             n = c(length(unique(tbl_pkg$Package)), \n                   length(unique(pkgdb$Package))),\n  fields_count = c(ncol(tbl_pkg), ncol(pkgdb)), \n        taille = c(lobstr::obj_size(tbl_pkg), lobstr::obj_size(pkgdb)) \n)\n\ngt_summary &lt;- gt(tbl_summary) |&gt; \n  tab_header(\n    title = md(\"**packages R disponibles**\"),\n    subtitle = md(paste(\"(en date du\", Sys.Date(), \")\"))\n  ) |&gt; \n  tab_footnote(\n    footnote = md(\"Quantité estimée avec la commande `obj_size`\"),\n    locations = cells_column_labels(columns = taille)\n  ) |&gt; \n  tab_footnote(\n    footnote = md(\"Données issues de la commande `available.packages`\"),\n    locations = cells_body(\n      columns = c(fields_count,n), rows = 1\n    )\n  ) |&gt; \n  tab_footnote(\n    footnote = md(\"Données issues de la commande `CRAN_package_db`\"),\n    locations = cells_body(\n      columns = c(fields_count,n), rows = 2\n    )\n  )\n\ngt_summary\n\n\n\n\n\n\n\n\npackages R disponibles\n\n\n(en date du 2025-01-07 )\n\n\nn\nfields_count\ntaille1\n\n\n\n\n2 21836\n2 17\n10.08 MB\n\n\n3 21862\n3 69\n53.74 MB\n\n\n\n1 Quantité estimée avec la commande obj_size\n\n\n2 Données issues de la commande available.packages\n\n\n3 Données issues de la commande CRAN_package_db\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nsimilar_pkgs &lt;- intersect(tbl_pkg$Package, pkgdb$Package)\n\n\n\n\n\n\n\n\nNote\n\n\n\n\n\n\nNous avons 21836 paquets en commun\nTous les paquets du tibble tbl_pkg sont présents dans le data.frame pkgdb puisque :\n\nlength(tbl_pkg$Package[!tbl_pkg$Package %in% similar_pkgs]) == 0\n\n\n\n\n\n\n\n\n\n\nCode\ndissimilar_pkgs &lt;- pkgdb$Package[!pkgdb$Package %in% similar_pkgs]\ndissimilar_pkgs\n\n\n [1] \"bigGP\"        \"bigReg\"       \"bspm\"         \"clrng\"        \"corrcoverage\"\n [6] \"cronR\"        \"cuda.ml\"      \"doMC\"         \"exif\"         \"flexiblas\"   \n[11] \"gcbd\"         \"gpuR\"         \"ieeeround\"    \"littler\"      \"MPCR\"        \n[16] \"naryn\"        \"nice\"         \"RApiDatetime\" \"RAppArmor\"    \"RcppGetconf\" \n[21] \"redcas\"       \"rspm\"         \"rsyslog\"      \"tglkmeans\"    \"tgstat\"      \n[26] \"unix\"        \n\n\n\n\n\n\n\nCode\npkgdb |&gt;\n  summarize(n = dplyr::n(), .by = Package) |&gt; \n  dplyr::filter(n &gt; 1) |&gt; \n  dplyr::inner_join(pkgdb) |&gt; \n  dplyr::select(c(Package, Version, Depends)) \n\n\nJoining with `by = join_by(Package)`\n\n\n      Package Version                                         Depends\n1        boot  1.3-31                   R (&gt;= 3.0.0), graphics, stats\n2        boot  1.3-31                     R (&gt;= 4.5), graphics, stats\n3       class  7.3-23                      R (&gt;= 3.0.0), stats, utils\n4       class  7.3-23                        R (&gt;= 4.5), stats, utils\n5     cluster   2.1.8                                    R (&gt;= 3.5.0)\n6     cluster   2.1.8                                      R (&gt;= 4.5)\n7   codetools  0.2-20                                      R (&gt;= 2.1)\n8   codetools  0.2-20                                      R (&gt;= 4.5)\n9     foreign  0.8-87                                    R (&gt;= 4.0.0)\n10    foreign  0.8-87                                      R (&gt;= 4.5)\n11 KernSmooth 2.23-26                             R (&gt;= 2.5.0), stats\n12 KernSmooth 2.23-26                               R (&gt;= 4.5), stats\n13    lattice  0.22-6                                    R (&gt;= 4.0.0)\n14    lattice  0.22-6                                      R (&gt;= 4.5)\n15       MASS  7.3-64 R (&gt;= 4.4.0), grDevices, graphics, stats, utils\n16       MASS  7.3-64   R (&gt;= 4.5), grDevices, graphics, stats, utils\n17     Matrix   1.7-1                           R (&gt;= 4.4.0), methods\n18     Matrix   1.7-1                             R (&gt;= 4.5), methods\n19       mgcv   1.9-1                  R (&gt;= 3.6.0), nlme (&gt;= 3.1-64)\n20       mgcv   1.9-1                    R (&gt;= 4.5), nlme (&gt;= 3.1-64)\n21       nlme 3.1-166                                    R (&gt;= 3.6.0)\n22       nlme 3.1-166                                      R (&gt;= 4.5)\n23       nnet  7.3-20                      R (&gt;= 3.0.0), stats, utils\n24       nnet  7.3-20                        R (&gt;= 4.5), stats, utils\n25      rpart  4.1.24       R (&gt;= 2.15.0), graphics, stats, grDevices\n26      rpart  4.1.23          R (&gt;= 4.5), graphics, stats, grDevices\n27    spatial  7.3-18            R (&gt;= 3.0.0), graphics, stats, utils\n28    spatial  7.3-18              R (&gt;= 4.5), graphics, stats, utils\n29   survival   3.8-3                                    R (&gt;= 3.5.0)\n30   survival   3.8-3                                      R (&gt;= 4.5)\n\n\n\n\n\n\nChamps communs\n\n\n\nCode\nsimilar_fields &lt;- names(tbl_pkg)[names(tbl_pkg) %in% names(pkgdb)]\nsimilar_fields\n\n\n [1] \"Package\"               \"Version\"               \"Priority\"             \n [4] \"Depends\"               \"Imports\"               \"LinkingTo\"            \n [7] \"Suggests\"              \"Enhances\"              \"License\"              \n[10] \"License_is_FOSS\"       \"License_restricts_use\" \"OS_type\"              \n[13] \"Archs\"                 \"MD5sum\"                \"NeedsCompilation\"     \n\n\n\nChamps différents\n\n\n\nCode\ndissimilar_fields_tbl_pkg &lt;- names(tbl_pkg)[!names(tbl_pkg) %in% names(pkgdb)]\ndissimilar_fields_pkgdb &lt;- names(pkgdb)[!names(pkgdb) %in% names(tbl_pkg)]\ndissimilar_fields &lt;- c(dissimilar_fields_tbl_pkg, dissimilar_fields_pkgdb)\ndissimilar_fields\n\n\n [1] \"File\"                    \"Repository\"             \n [3] \"Additional_repositories\" \"Author\"                 \n [5] \"Authors@R\"               \"Biarch\"                 \n [7] \"BugReports\"              \"BuildKeepEmpty\"         \n [9] \"BuildManual\"             \"BuildResaveData\"        \n[11] \"BuildVignettes\"          \"Built\"                  \n[13] \"ByteCompile\"             \"Classification/ACM\"     \n[15] \"Classification/ACM-2012\" \"Classification/JEL\"     \n[17] \"Classification/MSC\"      \"Classification/MSC-2010\"\n[19] \"Collate\"                 \"Collate.unix\"           \n[21] \"Collate.windows\"         \"Contact\"                \n[23] \"Copyright\"               \"Date\"                   \n[25] \"Date/Publication\"        \"Description\"            \n[27] \"Encoding\"                \"KeepSource\"             \n[29] \"Language\"                \"LazyData\"               \n[31] \"LazyDataCompression\"     \"LazyLoad\"               \n[33] \"MailingList\"             \"Maintainer\"             \n[35] \"Note\"                    \"Packaged\"               \n[37] \"RdMacros\"                \"StagedInstall\"          \n[39] \"SysDataCompression\"      \"SystemRequirements\"     \n[41] \"Title\"                   \"Type\"                   \n[43] \"URL\"                     \"UseLTO\"                 \n[45] \"VignetteBuilder\"         \"ZipData\"                \n[47] \"Path\"                    \"X-CRAN-Comment\"         \n[49] \"Published\"               \"Reverse depends\"        \n[51] \"Reverse imports\"         \"Reverse linking to\"     \n[53] \"Reverse suggests\"        \"Reverse enhances\"       \n[55] \"Deadline\"                \"DOI\"                    \n\n\n\n\n\n\n\nCode\nget_property &lt;- function(tbl, f) sapply(tbl, f)\n\nget_NA_count &lt;- function(x) sum(is.na(x))\nget_data_count &lt;- function(x) sum(!is.na(x))\nget_unique_count &lt;- function(x) length(unique(x))\n\nNA_count &lt;- tbl_pkg |&gt; get_property(get_NA_count)\ndata_count &lt;- tbl_pkg |&gt; get_property(get_data_count)\nunique_count &lt;- tbl_pkg |&gt; get_property(get_unique_count)\n\nresultat &lt;- t(rbind(data_count, NA_count, unique_count))\n\ntbl_summary &lt;- as_tibble(resultat)\ntbl_summary$field &lt;- dimnames(resultat)[[1]]\ntbl_summary &lt;- tbl_summary |&gt; \n  dplyr::relocate(\"field\")\n\nnames(tbl_summary) &lt;- c(\"champ\", \"data\", \"NA\", \"unique\")\n\ngt_summary &lt;- gt(tbl_summary) |&gt; \n  tab_header(\n    title = md(\"**Indications sur les différents champs**\"),\n    subtitle = md(\"(Décompte des lignes vérifiant la propriété)\")\n  ) \n\ngt_summary\n\n\n\n\n\n\n\n\nIndications sur les différents champs\n\n\n(Décompte des lignes vérifiant la propriété)\n\n\nchamp\ndata\nNA\nunique\n\n\n\n\nPackage\n21836\n0\n21836\n\n\nVersion\n21836\n0\n2374\n\n\nPriority\n23\n21813\n3\n\n\nDepends\n16103\n5733\n4484\n\n\nImports\n17639\n4197\n14996\n\n\nLinkingTo\n3070\n18766\n558\n\n\nSuggests\n14702\n7134\n9072\n\n\nEnhances\n225\n21611\n202\n\n\nLicense\n21836\n0\n159\n\n\nLicense_is_FOSS\n16\n21820\n3\n\n\nLicense_restricts_use\n12\n21824\n3\n\n\nOS_type\n13\n21823\n2\n\n\nArchs\n20\n21816\n3\n\n\nMD5sum\n21836\n0\n21836\n\n\nNeedsCompilation\n21836\n0\n2\n\n\nFile\n0\n21836\n1\n\n\nRepository\n21836\n0\n1\n\n\n\n\n\n\n\n\n\n\n\n\nCode\n# microbenchmark(\n#   get_NA_2(tbl_pkg),\n#   get_NA(tbl_pkg)\n# ) |&gt; \n#   ggplot2::autoplot()\n\n\n\n\n\n\n\nCode\ntable_licenses &lt;- table(tbl_pkg$License)\nmat_licenses &lt;- as.matrix(table_licenses)\ntbl_licenses &lt;- as_tibble(mat_licenses)\n\n\nWarning: The `x` argument of `as_tibble.matrix()` must have unique column names if\n`.name_repair` is omitted as of tibble 2.0.0.\nℹ Using compatibility `.name_repair`.\n\n\nCode\ntbl_licenses$license &lt;- dimnames(mat_licenses)[[1]]\ntbl_licenses &lt;- tbl_licenses |&gt; \n  dplyr::relocate(\"license\")\n\nnames(tbl_licenses) &lt;- c(\"licence\", \"n\")\n\n\n#--- licences orphelines\n\ntbl_orphan_licenses &lt;- tbl_licenses |&gt; \n    dplyr::filter(n == 1) |&gt; \n    left_join(tbl_pkg, join_by(licence == License)) |&gt; \n    select(Package, licence)\n\ngt_orphan_licenses &lt;- gt(tbl_orphan_licenses) |&gt; \n  tab_header(\n    title = md(\"**Nom des paquets liées à un type de licence orpheline**\"),\n    subtitle = md(\"(qui n'apparaît qu'une fois dans la liste des licences)\")\n  ) \n\ngt_orphan_licenses\n\n\n\n\n\n\n\n\nNom des paquets liées à un type de licence orpheline\n\n\n(qui n’apparaît qu’une fois dans la liste des licences)\n\n\nPackage\nlicence\n\n\n\n\nQDiabetes\nAGPL-3 + file LICENSE\n\n\nround\nAGPL (&gt;= 3) | file LICENSE\n\n\ntidywater\nApache License (&gt;= 2) | MIT + file LICENSE\n\n\nAutoDeskR\nApache License | file LICENSE\n\n\nrtson\nApache License Version 2.0\n\n\ntmle\nBSD_3_clause + file LICENSE | GPL-2\n\n\ninstall.load\nCC BY-SA 4.0 | GPL-3 | file LICENSE\n\n\ngmGeostats\nCC BY-SA 4.0 | GPL (&gt;= 2)\n\n\nigraphdata\nCC BY-SA 4.0 + file LICENSE\n\n\nSCGLR\nCeCILL-2 | GPL-2\n\n\nrunMCMCbtadjust\nCECILL-2.1\n\n\nAMAPVox\nCeCILL (&gt;= 2)\n\n\nRcsdp\nCPL-1.0\n\n\ntest2norm\nCPL (&gt;= 2)\n\n\nei.Datasets\nEPL | CC BY 4.0 | file LICENSE\n\n\nlphom\nEPL | file LICENSE\n\n\nflagr\nEUPL-1.1\n\n\nvardpoor\nEUPL | file LICENSE\n\n\nfontBitstreamVera\nfile LICENCE\n\n\nfastcluster\nFreeBSD | GPL-2 | file LICENSE\n\n\nvisvow\nGNU General Public License (&gt;= 2)\n\n\nNIPTeR\nGNU Lesser General Public License\n\n\nblender\nGPL-2 | Artistic-2.0\n\n\nRefManageR\nGPL-2 | GPL-3 | BSD_3_clause + file LICENSE\n\n\nridittools\nGPL-2 | GPL-3 | MIT + file LICENSE\n\n\ndmm\nGPL-2 | GPL (&gt;= 2) | GPL-3\n\n\nhunspell\nGPL-2 | LGPL-2.1 | MPL-1.1\n\n\nmidasr\nGPL-2 | MIT + file LICENCE\n\n\nsf\nGPL-2 | MIT + file LICENSE\n\n\nmapscanner\nGPL-3 | BSD_2_clause + file LICENSE\n\n\nconvergEU\nGPL-3 | BSD_3_clause + file LICENSE\n\n\neyelinker\nGPL-3 | file LICENCE\n\n\nmagree\nGPL-3 | GPL-2\n\n\nrxylib\nGPL-3 | LGPL-2.1\n\n\nconf\nGPL (&lt;= 2)\n\n\nminiGUI\nGPL (&lt;= 2.0)\n\n\nrjags\nGPL (== 2)\n\n\ncausalOT\nGPL (== 3.0)\n\n\nDiffCorr\nGPL (&gt; 3)\n\n\nPade\nGPL (&gt;= 2) | BSD_2_clause + file LICENSE\n\n\nsoilhypfit\nGPL (&gt;= 2) | LGPL-3\n\n\nmedfate\nGPL (&gt;= 2) | LGPL (&gt;= 3)\n\n\nRCriteo\nGPL (&gt;= 2) | MIT + file LICENSE\n\n\nmeteo\nGPL (&gt;= 2.0) | file LICENCE\n\n\nMAT\nGPL (&gt;= 2.10)\n\n\nTrialSize\nGPL (&gt;= 2.15.1)\n\n\nRM.weights\nGPL (&gt;= 3.0.0)\n\n\nconcatenate\nGPL (&gt;= 3.2)\n\n\ngMOIP\nGPL (&gt;= 3.3.2)\n\n\nseqminer\nGPL | file LICENSE\n\n\nsynchronicity\nLGPL-2 | Apache License 2.0\n\n\nbsts\nLGPL-2.1 | MIT + file LICENSE\n\n\ntcltk2\nLGPL-3 + file LICENSE\n\n\nRSNNS\nLGPL (&gt;= 2) | file LICENSE\n\n\nShortForm\nLGPL (&gt;= 2.0, &lt; 3) | Mozilla Public License\n\n\nmapproj\nLucent Public License\n\n\nlabeling\nMIT + file LICENSE | Unlimited\n\n\nRH2\nMozilla Public License 1.1\n\n\nASGS.foyer\nMPL\n\n\nvenneuler\nMPL-1.1\n\n\nRSpectra\nMPL (&gt;= 2)\n\n\nFIT\nMPL (&gt;= 2) | file LICENSE\n\n\nRborist\nMPL (&gt;= 2) | GPL (&gt;= 2) | file LICENSE\n\n\n\n\n\n\n\nCode\n#--- licences utilisées au moins 2 fois\n\ntbl_other_licenses &lt;- tbl_licenses |&gt; \n  filter(n &gt;= 1)\n\ngt_other_licenses &lt;- gt(tbl_other_licenses) |&gt; \n  tab_header(\n    title = md(\"**Nombre de paquets liées à des licences non orphelines**\"),\n    subtitle = md(\"(qui apparaît plus d'une fois dans la liste des licences)\")\n  ) \n\ngt_other_licenses\n\n\n\n\n\n\n\n\nNombre de paquets liées à des licences non orphelines\n\n\n(qui apparaît plus d’une fois dans la liste des licences)\n\n\nlicence\nn\n\n\n\n\nACM | file LICENSE\n2\n\n\nAGPL\n9\n\n\nAGPL-3\n125\n\n\nAGPL-3 | file LICENSE\n13\n\n\nAGPL-3 + file LICENSE\n1\n\n\nAGPL (&gt;= 3)\n59\n\n\nAGPL (&gt;= 3) | file LICENSE\n1\n\n\nAGPL + file LICENSE\n2\n\n\nApache License\n20\n\n\nApache License (== 2)\n9\n\n\nApache License (== 2.0)\n65\n\n\nApache License (== 2.0) | file LICENSE\n12\n\n\nApache License (&gt;= 2)\n135\n\n\nApache License (&gt;= 2) | MIT + file LICENSE\n1\n\n\nApache License (&gt;= 2.0)\n56\n\n\nApache License | file LICENSE\n1\n\n\nApache License 2.0\n136\n\n\nApache License 2.0 | file LICENSE\n31\n\n\nApache License Version 2.0\n1\n\n\nArtistic-2.0\n108\n\n\nArtistic License 2.0\n6\n\n\nBSD 2-clause License + file LICENSE\n12\n\n\nBSD 3-clause License + file LICENSE\n3\n\n\nBSD_2_clause + file LICENCE\n3\n\n\nBSD_2_clause + file LICENSE\n111\n\n\nBSD_3_clause + file LICENCE\n6\n\n\nBSD_3_clause + file LICENSE\n140\n\n\nBSD_3_clause + file LICENSE | GPL-2\n1\n\n\nBSD_3_clause + file LICENSE | GPL (&gt;= 2)\n4\n\n\nBSL\n2\n\n\nBSL-1.0\n7\n\n\nCC BY-NC-SA 4.0\n13\n\n\nCC BY-NC 4.0\n5\n\n\nCC BY-SA 4.0\n26\n\n\nCC BY-SA 4.0 | GPL-3 | file LICENSE\n1\n\n\nCC BY-SA 4.0 | GPL (&gt;= 2)\n1\n\n\nCC BY-SA 4.0 + file LICENSE\n1\n\n\nCC BY 4.0\n81\n\n\nCC0\n235\n\n\nCC0 | file LICENSE\n2\n\n\nCeCILL\n8\n\n\nCeCILL-2\n12\n\n\nCeCILL-2 | file LICENSE\n2\n\n\nCeCILL-2 | GPL-2\n1\n\n\nCECILL-2.1\n1\n\n\nCeCILL (&gt;= 2)\n1\n\n\nCommon Public License Version 1.0\n2\n\n\nCPL-1.0\n1\n\n\nCPL (&gt;= 2)\n1\n\n\nCreative Commons Attribution 4.0 International License\n2\n\n\nEPL\n3\n\n\nEPL | CC BY 4.0 | file LICENSE\n1\n\n\nEPL | file LICENSE\n1\n\n\nEUPL\n32\n\n\nEUPL-1.1\n1\n\n\nEUPL (&gt;= 1.1)\n2\n\n\nEUPL (&gt;= 1.2)\n4\n\n\nEUPL | file LICENSE\n1\n\n\nfile LICENCE\n1\n\n\nfile LICENSE\n10\n\n\nFreeBSD\n10\n\n\nFreeBSD | file LICENSE\n2\n\n\nFreeBSD | GPL-2 | file LICENSE\n1\n\n\nGNU General Public License\n28\n\n\nGNU General Public License (&gt;= 2)\n1\n\n\nGNU General Public License (&gt;= 3)\n6\n\n\nGNU General Public License version 2\n5\n\n\nGNU General Public License version 3\n3\n\n\nGNU Lesser General Public License\n1\n\n\nGPL\n447\n\n\nGPL-2\n2395\n\n\nGPL-2 | Artistic-2.0\n1\n\n\nGPL-2 | file LICENCE\n2\n\n\nGPL-2 | file LICENSE\n47\n\n\nGPL-2 | GPL-3\n339\n\n\nGPL-2 | GPL-3 | BSD_3_clause + file LICENSE\n1\n\n\nGPL-2 | GPL-3 | file LICENSE\n3\n\n\nGPL-2 | GPL-3 | MIT + file LICENSE\n1\n\n\nGPL-2 | GPL (&gt;= 2) | GPL-3\n1\n\n\nGPL-2 | LGPL-2.1 | MPL-1.1\n1\n\n\nGPL-2 | MIT + file LICENCE\n1\n\n\nGPL-2 | MIT + file LICENSE\n1\n\n\nGPL-3\n4873\n\n\nGPL-3 | BSD_2_clause + file LICENSE\n1\n\n\nGPL-3 | BSD_3_clause + file LICENSE\n1\n\n\nGPL-3 | file LICENCE\n1\n\n\nGPL-3 | file LICENSE\n136\n\n\nGPL-3 | GPL-2\n1\n\n\nGPL-3 | LGPL-2.1\n1\n\n\nGPL-3 + file LICENSE\n19\n\n\nGPL (&lt;= 2)\n1\n\n\nGPL (&lt;= 2.0)\n1\n\n\nGPL (== 2)\n1\n\n\nGPL (== 3.0)\n1\n\n\nGPL (&gt; 2)\n10\n\n\nGPL (&gt; 3)\n1\n\n\nGPL (&gt;= 2)\n4277\n\n\nGPL (&gt;= 2) | BSD_2_clause + file LICENSE\n1\n\n\nGPL (&gt;= 2) | file LICENCE\n8\n\n\nGPL (&gt;= 2) | file LICENSE\n47\n\n\nGPL (&gt;= 2) | LGPL-3\n1\n\n\nGPL (&gt;= 2) | LGPL (&gt;= 2)\n2\n\n\nGPL (&gt;= 2) | LGPL (&gt;= 3)\n1\n\n\nGPL (&gt;= 2) | MIT + file LICENSE\n1\n\n\nGPL (&gt;= 2.0)\n103\n\n\nGPL (&gt;= 2.0) | file LICENCE\n1\n\n\nGPL (&gt;= 2.0) | file LICENSE\n3\n\n\nGPL (&gt;= 2.1)\n3\n\n\nGPL (&gt;= 2.10)\n1\n\n\nGPL (&gt;= 2.15.1)\n1\n\n\nGPL (&gt;= 3)\n2022\n\n\nGPL (&gt;= 3) | file LICENCE\n5\n\n\nGPL (&gt;= 3) | file LICENSE\n28\n\n\nGPL (&gt;= 3.0)\n45\n\n\nGPL (&gt;= 3.0.0)\n1\n\n\nGPL (&gt;= 3.2)\n1\n\n\nGPL (&gt;= 3.3.2)\n1\n\n\nGPL (&gt;= 3.5.0)\n5\n\n\nGPL | file LICENSE\n1\n\n\nLGPL\n47\n\n\nLGPL-2\n15\n\n\nLGPL-2 | Apache License 2.0\n1\n\n\nLGPL-2 | BSD_3_clause + file LICENSE\n2\n\n\nLGPL-2 | LGPL-3 | GPL-2 | GPL-3\n6\n\n\nLGPL-2.1\n27\n\n\nLGPL-2.1 | file LICENSE\n2\n\n\nLGPL-2.1 | MIT + file LICENSE\n1\n\n\nLGPL-3\n178\n\n\nLGPL-3 | Apache License 2.0\n5\n\n\nLGPL-3 | file LICENSE\n5\n\n\nLGPL-3 + file LICENSE\n1\n\n\nLGPL (&gt;= 2)\n24\n\n\nLGPL (&gt;= 2) | file LICENSE\n1\n\n\nLGPL (&gt;= 2.0)\n5\n\n\nLGPL (&gt;= 2.0, &lt; 3)\n2\n\n\nLGPL (&gt;= 2.0, &lt; 3) | Mozilla Public License\n1\n\n\nLGPL (&gt;= 2.1)\n59\n\n\nLGPL (&gt;= 3)\n71\n\n\nLGPL (&gt;= 3) | file LICENSE\n3\n\n\nLucent Public License\n1\n\n\nMIT + file LICENCE\n21\n\n\nMIT + file LICENSE\n4814\n\n\nMIT + file LICENSE | Apache License 2.0\n6\n\n\nMIT + file LICENSE | Unlimited\n1\n\n\nMIT License + file LICENSE\n6\n\n\nMozilla Public License 1.1\n1\n\n\nMozilla Public License 2.0\n7\n\n\nMozilla Public License Version 2.0\n2\n\n\nMPL\n1\n\n\nMPL-1.1\n1\n\n\nMPL-2.0\n16\n\n\nMPL-2.0 | file LICENSE\n7\n\n\nMPL (== 2.0)\n2\n\n\nMPL (&gt;= 2)\n1\n\n\nMPL (&gt;= 2) | file LICENSE\n1\n\n\nMPL (&gt;= 2) | GPL (&gt;= 2) | file LICENSE\n1\n\n\nMPL (&gt;= 2.0)\n2\n\n\nUnlimited\n49\n\n\nUnlimited | file LICENSE\n2"
  }
]