[
  {
    "objectID": "posts/welcome/index.html",
    "href": "posts/welcome/index.html",
    "title": "Bienvenue",
    "section": "",
    "text": "Premier post informel. Bienvenue !\n\nJ’ai repris cette image mais le smartphone me semble de trop ici."
  },
  {
    "objectID": "posts/20250108_pkgdb-2/index.html",
    "href": "posts/20250108_pkgdb-2/index.html",
    "title": "R packages database (2/?)",
    "section": "",
    "text": "Code\nlibrary(dplyr)\nlibrary(tools)\nlibrary(gt)\nlibrary(purrr)\nlibrary(ggplot2)\nlibrary(tibble)\nlibrary(stringi)\n\n\n\n\n\n\n\n\nNote\n\n\n\n\n\nLes champs conservés dans la suite de l’étude sont :\n\nceux dont les données ne présentent aucune valeur NA.\nle champ Authors@R qui comporte des informations textes intéressantes\n\n\n\n\n\npkgdb_CRAN &lt;- tools::CRAN_package_db()\n\nsaveRDS(object = pkgdb_CRAN,\n        file = paste(Sys.Date(), \"pkgdb_CRAN.RDS\",\n        sep = \"_\"))\n\n\n\n\nfields &lt;- c(\n  \"Package\", \"Version\", \"Depends\", \"License\", \"MD5sum\", \n  \"NeedsCompilation\", \"Author\", \"Authors@R\", \"Date/Publication\", \n  \"Description\", \"Maintainer\", \"Packaged\", \"Title\", \"Published\")\n\npkgdb &lt;- pkgdb_CRAN |&gt; \n  dplyr::select(all_of(fields))\n\n\n\n\n\n\nCode\ntable_licenses &lt;- table(pkgdb$License)\ntbl_licenses   &lt;- table_licenses |&gt; \n  as.matrix() |&gt; \n  as_tibble() |&gt; \n  dplyr::mutate(license = dimnames(table_licenses)[[1]]) |&gt; \n  rename(\"Nom licence\" = license,\n          occurrences = V1,\n        ) |&gt; \n  dplyr::relocate(\"Nom licence\")\n\n\n\nLicences à usage unique\n\n\n#|label: orphan_licenses\n\ntbl_orphan_licenses &lt;- tbl_licenses |&gt; \n    dplyr::filter(occurrences == 1) |&gt; \n    left_join(pkgdb, join_by(\"Nom licence\" == License)) |&gt; \n    select(Package, \"Nom licence\")\n\ngt_orphan_licenses &lt;- gt(tbl_orphan_licenses) |&gt; \n  tab_header(\n    title    = md(\"**Licences orphelines**\"),\n    subtitle = md(\"(occurrence de licence égale à 1 pour un paquet donné)\")\n  ) \n\ngt_orphan_licenses\n\n\n\n\n\n\n\nLicences orphelines\n\n\n(occurrence de licence égale à 1 pour un paquet donné)\n\n\nPackage\nNom licence\n\n\n\n\nQDiabetes\nAGPL-3 + file LICENSE\n\n\nround\nAGPL (&gt;= 3) | file LICENSE\n\n\ntidywater\nApache License (&gt;= 2) | MIT + file LICENSE\n\n\nAutoDeskR\nApache License | file LICENSE\n\n\nrtson\nApache License Version 2.0\n\n\ntmle\nBSD_3_clause + file LICENSE | GPL-2\n\n\ninstall.load\nCC BY-SA 4.0 | GPL-3 | file LICENSE\n\n\ngmGeostats\nCC BY-SA 4.0 | GPL (&gt;= 2)\n\n\nigraphdata\nCC BY-SA 4.0 + file LICENSE\n\n\nSCGLR\nCeCILL-2 | GPL-2\n\n\nrunMCMCbtadjust\nCECILL-2.1\n\n\nAMAPVox\nCeCILL (&gt;= 2)\n\n\nRcsdp\nCPL-1.0\n\n\ntest2norm\nCPL (&gt;= 2)\n\n\nei.Datasets\nEPL | CC BY 4.0 | file LICENSE\n\n\nlphom\nEPL | file LICENSE\n\n\nflagr\nEUPL-1.1\n\n\nvardpoor\nEUPL | file LICENSE\n\n\nfontBitstreamVera\nfile LICENCE\n\n\nfastcluster\nFreeBSD | GPL-2 | file LICENSE\n\n\nvisvow\nGNU General Public License (&gt;= 2)\n\n\nNIPTeR\nGNU Lesser General Public License\n\n\nblender\nGPL-2 | Artistic-2.0\n\n\nRefManageR\nGPL-2 | GPL-3 | BSD_3_clause + file LICENSE\n\n\ndmm\nGPL-2 | GPL (&gt;= 2) | GPL-3\n\n\nhunspell\nGPL-2 | LGPL-2.1 | MPL-1.1\n\n\nmidasr\nGPL-2 | MIT + file LICENCE\n\n\nsf\nGPL-2 | MIT + file LICENSE\n\n\nmapscanner\nGPL-3 | BSD_2_clause + file LICENSE\n\n\nconvergEU\nGPL-3 | BSD_3_clause + file LICENSE\n\n\neyelinker\nGPL-3 | file LICENCE\n\n\nmagree\nGPL-3 | GPL-2\n\n\nrxylib\nGPL-3 | LGPL-2.1\n\n\nconf\nGPL (&lt;= 2)\n\n\nminiGUI\nGPL (&lt;= 2.0)\n\n\nrjags\nGPL (== 2)\n\n\nDiffCorr\nGPL (&gt; 3)\n\n\nPade\nGPL (&gt;= 2) | BSD_2_clause + file LICENSE\n\n\nsoilhypfit\nGPL (&gt;= 2) | LGPL-3\n\n\nmedfate\nGPL (&gt;= 2) | LGPL (&gt;= 3)\n\n\nRCriteo\nGPL (&gt;= 2) | MIT + file LICENSE\n\n\nmeteo\nGPL (&gt;= 2.0) | file LICENCE\n\n\nMAT\nGPL (&gt;= 2.10)\n\n\nTrialSize\nGPL (&gt;= 2.15.1)\n\n\nRM.weights\nGPL (&gt;= 3.0.0)\n\n\nconcatenate\nGPL (&gt;= 3.2)\n\n\ngMOIP\nGPL (&gt;= 3.3.2)\n\n\nseqminer\nGPL | file LICENSE\n\n\nsynchronicity\nLGPL-2 | Apache License 2.0\n\n\nbsts\nLGPL-2.1 | MIT + file LICENSE\n\n\ntcltk2\nLGPL-3 + file LICENSE\n\n\nRSNNS\nLGPL (&gt;= 2) | file LICENSE\n\n\nShortForm\nLGPL (&gt;= 2.0, &lt; 3) | Mozilla Public License\n\n\nmapproj\nLucent Public License\n\n\nlabeling\nMIT + file LICENSE | Unlimited\n\n\nRH2\nMozilla Public License 1.1\n\n\nASGS.foyer\nMPL\n\n\nvenneuler\nMPL-1.1\n\n\nRSpectra\nMPL (&gt;= 2)\n\n\nFIT\nMPL (&gt;= 2) | file LICENSE\n\n\nRborist\nMPL (&gt;= 2) | GPL (&gt;= 2) | file LICENSE\n\n\n\n\n\n\n\n\nAutres licences\n\n\n#|label: other_licenses\n\ntbl_other_licenses &lt;- tbl_licenses |&gt; \n  filter(occurrences &gt; 1)\n\ngt_other_licenses &lt;- gt(tbl_other_licenses) |&gt; \n  tab_header(\n    title    = md(\"**Licences non orphelines**\"),\n    subtitle = md(\"(occurrences de licence supérieure à 1 pour un paquet donné)\")\n  ) \n\ngt_other_licenses\n\n\n\n\n\n\n\nLicences non orphelines\n\n\n(occurrences de licence supérieure à 1 pour un paquet donné)\n\n\nNom licence\noccurrences\n\n\n\n\nACM | file LICENSE\n2\n\n\nAGPL\n9\n\n\nAGPL-3\n124\n\n\nAGPL-3 | file LICENSE\n13\n\n\nAGPL (&gt;= 3)\n59\n\n\nAGPL + file LICENSE\n2\n\n\nApache License\n20\n\n\nApache License (== 2)\n9\n\n\nApache License (== 2.0)\n65\n\n\nApache License (== 2.0) | file LICENSE\n12\n\n\nApache License (&gt;= 2)\n139\n\n\nApache License (&gt;= 2.0)\n56\n\n\nApache License 2.0\n138\n\n\nApache License 2.0 | file LICENSE\n31\n\n\nArtistic-2.0\n108\n\n\nArtistic License 2.0\n6\n\n\nBSD 2-clause License + file LICENSE\n12\n\n\nBSD 3-clause License + file LICENSE\n3\n\n\nBSD_2_clause + file LICENCE\n3\n\n\nBSD_2_clause + file LICENSE\n112\n\n\nBSD_3_clause + file LICENCE\n6\n\n\nBSD_3_clause + file LICENSE\n140\n\n\nBSD_3_clause + file LICENSE | GPL (&gt;= 2)\n4\n\n\nBSL\n2\n\n\nBSL-1.0\n7\n\n\nCC BY-NC-SA 4.0\n13\n\n\nCC BY-NC 4.0\n5\n\n\nCC BY-SA 4.0\n26\n\n\nCC BY 4.0\n80\n\n\nCC0\n236\n\n\nCC0 | file LICENSE\n2\n\n\nCeCILL\n8\n\n\nCeCILL-2\n12\n\n\nCeCILL-2 | file LICENSE\n2\n\n\nCommon Public License Version 1.0\n2\n\n\nCreative Commons Attribution 4.0 International License\n2\n\n\nEPL\n3\n\n\nEUPL\n32\n\n\nEUPL (&gt;= 1.1)\n2\n\n\nEUPL (&gt;= 1.2)\n4\n\n\nfile LICENSE\n11\n\n\nFreeBSD\n10\n\n\nFreeBSD | file LICENSE\n2\n\n\nGNU General Public License\n28\n\n\nGNU General Public License (&gt;= 3)\n6\n\n\nGNU General Public License version 2\n5\n\n\nGNU General Public License version 3\n3\n\n\nGPL\n449\n\n\nGPL-2\n2399\n\n\nGPL-2 | file LICENCE\n2\n\n\nGPL-2 | file LICENSE\n46\n\n\nGPL-2 | GPL-3\n344\n\n\nGPL-2 | GPL-3 | file LICENSE\n3\n\n\nGPL-2 | GPL-3 | MIT + file LICENSE\n2\n\n\nGPL-3\n4895\n\n\nGPL-3 | file LICENSE\n136\n\n\nGPL-3 + file LICENSE\n19\n\n\nGPL (== 3.0)\n2\n\n\nGPL (&gt; 2)\n10\n\n\nGPL (&gt;= 2)\n4286\n\n\nGPL (&gt;= 2) | file LICENCE\n9\n\n\nGPL (&gt;= 2) | file LICENSE\n47\n\n\nGPL (&gt;= 2) | LGPL (&gt;= 2)\n2\n\n\nGPL (&gt;= 2.0)\n103\n\n\nGPL (&gt;= 2.0) | file LICENSE\n3\n\n\nGPL (&gt;= 2.1)\n3\n\n\nGPL (&gt;= 3)\n2022\n\n\nGPL (&gt;= 3) | file LICENCE\n5\n\n\nGPL (&gt;= 3) | file LICENSE\n29\n\n\nGPL (&gt;= 3.0)\n45\n\n\nGPL (&gt;= 3.5.0)\n5\n\n\nLGPL\n47\n\n\nLGPL-2\n15\n\n\nLGPL-2 | BSD_3_clause + file LICENSE\n2\n\n\nLGPL-2 | LGPL-3 | GPL-2 | GPL-3\n6\n\n\nLGPL-2.1\n27\n\n\nLGPL-2.1 | file LICENSE\n2\n\n\nLGPL-3\n179\n\n\nLGPL-3 | Apache License 2.0\n5\n\n\nLGPL-3 | file LICENSE\n5\n\n\nLGPL (&gt;= 2)\n25\n\n\nLGPL (&gt;= 2.0)\n5\n\n\nLGPL (&gt;= 2.0, &lt; 3)\n2\n\n\nLGPL (&gt;= 2.1)\n59\n\n\nLGPL (&gt;= 3)\n72\n\n\nLGPL (&gt;= 3) | file LICENSE\n3\n\n\nMIT + file LICENCE\n21\n\n\nMIT + file LICENSE\n4846\n\n\nMIT + file LICENSE | Apache License 2.0\n6\n\n\nMIT License + file LICENSE\n6\n\n\nMozilla Public License 2.0\n7\n\n\nMozilla Public License Version 2.0\n2\n\n\nMPL-2.0\n16\n\n\nMPL-2.0 | file LICENSE\n7\n\n\nMPL (== 2.0)\n2\n\n\nMPL (&gt;= 2.0)\n2\n\n\nUnlimited\n51\n\n\nUnlimited | file LICENSE\n2\n\n\n\n\n\n\n\n\n\n\n\n\n\ndétermination du nombre de mails à trouver\n\n\n\nCode\nauthorsR &lt;- pkgdb$`Authors@R`\n\nemails_count_per_pkgdb_row &lt;- authorsR |&gt; \n  stri_count_regex(pattern = \"[@]\")\n\n# NA is considered to be total 0\n\nemails_count_per_pkgdb_row[is.na(emails_count_per_pkgdb_row)] &lt;- 0\n\nemails_total_estimated &lt;- emails_count_per_pkgdb_row |&gt; sum()\n\nemails_total_estimated\n\n\n[1] 32675\n\n\n\n\n\n\n\n\nNote\n\n\n\n\n\nLe nombre de mails à trouver correspond au nombre de symboles @ présents dans l’ensemble des données de la colonne Authors@R, soit ici : 3.2675^{4}\n\n\n\n\nfonction match_email_in_authors\n\n\nmatch_emails_in_authorsR &lt;- function(str) {\n  \n  pattern_email    &lt;- \"[\\\"|'|[ ]|[&lt;]]([^\\\"]+?)[@]{1}(.+?)[\\\"|'|[ ]|[&gt;]]\"\n  resultat &lt;- stringi::stri_match_all_regex(\n              str = str, \n              pattern = pattern_email,\n              omit_no_match = FALSE)[[1]]\n  \n  return(resultat)\n\n}\n\n\nextraction des emails\n\non récupère les matrices de correspondances de pattern pour chacun des champs Authors@R\n\nemails_in_authorsR &lt;- authorsR |&gt; \n  map(match_emails_in_authorsR)\n\nhead(emails_in_authorsR, n = 3)\n\n[[1]]\n     [,1] [,2] [,3]\n[1,] NA   NA   NA  \n\n[[2]]\n     [,1]                         [,2]          [,3]        \n[1,] \"\\\"martinbladt@math.ku.dk\\\"\" \"martinbladt\" \"math.ku.dk\"\n[2,] \"\\\"furrer@math.ku.dk\\\"\"      \"furrer\"      \"math.ku.dk\"\n\n[[3]]\n     [,1]                            [,2]             [,3]        \n[1,] \"\\\"sercan.kahveci@plus.ac.at\\\"\" \"sercan.kahveci\" \"plus.ac.at\"\n\nlength(emails_in_authorsR)\n\n[1] 21925\n\n\n\nRécupération du nombre de lignes pour chacune des matrices\n\n\nmatch_lines_per_pkgdb_row &lt;- emails_in_authorsR |&gt; \n  map(nrow) |&gt;\n  unlist()\n\nmatch_lines_per_pkgdb_row[1:100]\n\n  [1]  1  2  1  1  1  1  2  2  1  1  1  2  1  1  4  3  1  1  2  1 12  3  1  1  1\n [26]  3  3  5  1  3  7  1  1  1  5  1  2  2  1  4  1  1  1  1  1  5  1  1  1  1\n [51]  3  4  2  2  2  1  1  1  2  4  3  1  3  1  1  4  1  1  1  1  1  1  2  1  1\n [76]  4  1  2  1  1  1  3  2  1  3  1  1  1  1  1  1  1  1  1  3  1  3  1  3  1\n\n\n\ntransformation des 21925 matrices en une seule matrice\n\n\ntemp_mat_emails_in_authorsR &lt;- do.call(rbind, emails_in_authorsR)\n\nmat_emails_in_authorsR &lt;- cbind(\n  rep(x = pkgdb$Package, match_lines_per_pkgdb_row),\n  rep(x = pkgdb$Version, match_lines_per_pkgdb_row),\n  rep(x = pkgdb$Depends, match_lines_per_pkgdb_row),\n  temp_mat_emails_in_authorsR[,c(2,3)])\n\nmat_emails_in_authorsR[1:10, c(1,4,5)]\n\n      [,1]            [,2]                [,3]          \n [1,] \"A3\"            NA                  NA            \n [2,] \"AalenJohansen\" \"martinbladt\"       \"math.ku.dk\"  \n [3,] \"AalenJohansen\" \"furrer\"            \"math.ku.dk\"  \n [4,] \"AATtools\"      \"sercan.kahveci\"    \"plus.ac.at\"  \n [5,] \"ABACUS\"        NA                  NA            \n [6,] \"abasequence\"   \"andy.pilny\"        \"uky.edu\"     \n [7,] \"abbreviate\"    \"sigbert\"           \"hu-berlin.de\"\n [8,] \"abc\"           \"kati.csillery\"     \"gmail.com\"   \n [9,] \"abc\"           \"michael.blum.temp\" \"gmail.com\"   \n[10,] \"abc.data\"      \"kati.csillery\"     \"gmail.com\"   \n\n\n\npuis en un tibble\n\n\ntbl_emails_in_authorsR &lt;- as_tibble(mat_emails_in_authorsR) |&gt; \n  rename(Package = V1, \n         Version = V2,\n         Depends = V3,\n        email_id = V4, \n    email_domain = V5) \n\ntbl_emails_in_authorsR\n\n# A tibble: 37,956 × 5\n   Package       Version Depends                           email_id email_domain\n   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;                             &lt;chr&gt;    &lt;chr&gt;       \n 1 A3            1.0.0   R (&gt;= 2.15.0), xtable, pbapply    &lt;NA&gt;     &lt;NA&gt;        \n 2 AalenJohansen 1.0     &lt;NA&gt;                              martinb… math.ku.dk  \n 3 AalenJohansen 1.0     &lt;NA&gt;                              furrer   math.ku.dk  \n 4 AATtools      0.0.3   R (&gt;= 3.6.0)                      sercan.… plus.ac.at  \n 5 ABACUS        1.0.0   R (&gt;= 3.1.0)                      &lt;NA&gt;     &lt;NA&gt;        \n 6 abasequence   0.1.0   &lt;NA&gt;                              andy.pi… uky.edu     \n 7 abbreviate    0.1     &lt;NA&gt;                              sigbert  hu-berlin.de\n 8 abc           2.2.2   R (&gt;= 2.10), abc.data, nnet, qua… kati.cs… gmail.com   \n 9 abc           2.2.2   R (&gt;= 2.10), abc.data, nnet, qua… michael… gmail.com   \n10 abc.data      1.1     R (&gt;= 2.10)                       kati.cs… gmail.com   \n# ℹ 37,946 more rows\n\n\n\nrésumé par ligne du data.frame pkgdb\n\n\nsummary_emails_per_pkgdb_row &lt;- tbl_emails_in_authorsR |&gt; \n  mutate(n = if_else(is.na(email_id) & is.na(email_domain), 0, 1)) |&gt; \n  summarize(.by = c(Package, Version, Depends), emails_count = sum(n)) |&gt; \n  mutate(emails_count_estimated = emails_count_per_pkgdb_row)\n\nsummary_emails_per_pkgdb_row\n\n# A tibble: 21,925 × 5\n   Package       Version Depends             emails_count emails_count_estimated\n   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;                      &lt;dbl&gt;                  &lt;dbl&gt;\n 1 A3            1.0.0   R (&gt;= 2.15.0), xta…            0                      0\n 2 AalenJohansen 1.0     &lt;NA&gt;                           2                      2\n 3 AATtools      0.0.3   R (&gt;= 3.6.0)                   1                      1\n 4 ABACUS        1.0.0   R (&gt;= 3.1.0)                   0                      0\n 5 abasequence   0.1.0   &lt;NA&gt;                           1                      1\n 6 abbreviate    0.1     &lt;NA&gt;                           1                      1\n 7 abc           2.2.2   R (&gt;= 2.10), abc.d…            2                      2\n 8 abc.data      1.1     R (&gt;= 2.10)                    2                      2\n 9 ABC.RAP       0.9.0   R (&gt;= 3.1.0)                   0                      0\n10 ABCanalysis   1.2.1   R (&gt;= 2.10)                    0                      0\n# ℹ 21,915 more rows\n\nsummary_emails_per_pkgdb_row |&gt; summarize(total_emails = sum(emails_count))\n\n# A tibble: 1 × 1\n  total_emails\n         &lt;dbl&gt;\n1        32627\n\n\n\nrécupération des lignes du data.frame pkgdb où il y a un problème\n\nOn compare la valeur du champ emails_count à celle du champ emails_count_estimated\n\nbad_emails_count_rows &lt;- summary_emails_per_pkgdb_row |&gt; \n  mutate(difference = emails_count_estimated - emails_count) |&gt; \n  filter(difference != 0)\n\nbad_emails_count_rows |&gt; summarize(difference_totale = sum(difference))\n\n# A tibble: 1 × 1\n  difference_totale\n              &lt;dbl&gt;\n1                48\n\nprint(bad_emails_count_rows, n = nrow(bad_emails_count_rows))\n\n# A tibble: 27 × 6\n   Package        Version Depends emails_count emails_count_estimated difference\n   &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;                  &lt;dbl&gt;      &lt;dbl&gt;\n 1 CRediTas       0.2.0   &lt;NA&gt;               1                      3          2\n 2 data.table     1.16.4  R (&gt;= …            3                      5          2\n 3 easystats      0.7.3   R (&gt;= …            7                     12          5\n 4 equatiomatic   0.3.3   R (&gt;= …           11                     12          1\n 5 fullRankMatrix 0.1.0   &lt;NA&gt;               2                      4          2\n 6 ggcorrplot     0.1.4.1 R (&gt;= …            2                      3          1\n 7 ggsignif       0.6.4   &lt;NA&gt;               2                      4          2\n 8 ggtext         0.1.2   R (&gt;= …            2                      3          1\n 9 gridtext       0.1.5   R (&gt;= …            2                      3          1\n10 lintr          3.1.2   R (&gt;= …            2                      3          1\n11 meltr          1.0.2   R (&gt;= …            3                      4          1\n12 MLPUGS         0.2.0   R (&gt;= …            1                      2          1\n13 pipebind       0.1.2   &lt;NA&gt;               1                      2          1\n14 rearrr         0.3.4   R (&gt;= …            1                      2          1\n15 report         0.5.9   R (&gt;= …            8                     14          6\n16 ScorePlus      0.1     &lt;NA&gt;               3                      4          1\n17 see            0.9.0   graphi…            9                     15          6\n18 speakr         3.2.4   &lt;NA&gt;               0                      1          1\n19 stochLAB       1.1.2   R (&gt;= …            4                      5          1\n20 styler         1.10.3  R (&gt;= …            3                      4          1\n21 tidyfast       0.4.0   R (&gt;= …            2                      3          1\n22 tidygam        1.0.0   R (&gt;= …            0                      1          1\n23 tinyplot       0.2.1   R (&gt;= …            4                      5          1\n24 urlshorteneR   1.5.7   R (&gt;= …            1                      4          3\n25 WikidataQuery… 1.0.0   R (&gt;= …            1                      2          1\n26 wordPuzzleR    0.1.1   &lt;NA&gt;               2                      3          1\n27 WufooR         1.0.1   R (&gt;= …            1                      3          2\n\n\nL’examen des champs Authors correspondant aux packages montre que le nombre d’emails a été surestimé par le décompte du nombre de symboles @.\nEn effet on note la présence de nombreux items au format @&lt;chaine de caractères&gt; qui ne respectent pas le format standart d’une adresse de messagerie.\nExemple pour le paquet report:\n\nselect_bad_row &lt;- function(pkg) {\n  \n  bad_emails_count_rows |&gt; \n    left_join(pkgdb, by = c(\"Package\", \"Version\", \"Depends\")) |&gt; \n    select(Package, `Authors@R`) |&gt; \n    filter(Package == pkg) |&gt; \n    pull()\n  \n}\n\nselect_bad_row(pkg = \"report\") \n\n[1] \"\\n    c(person(given = \\\"Dominique\\\",\\n             family = \\\"Makowski\\\",\\n             role = \\\"aut\\\",\\n             email = \\\"dom.makowski@gmail.com\\\",\\n             comment = c(ORCID = \\\"0000-0001-5375-9967\\\", Twitter = \\\"@Dom_Makowski\\\")),\\n      person(given = \\\"Daniel\\\",\\n             family = \\\"Lüdecke\\\",\\n             role = \\\"aut\\\",\\n             email = \\\"d.luedecke@uke.de\\\",\\n             comment = c(ORCID = \\\"0000-0002-8895-3206\\\", Twitter = \\\"@strengejacke\\\")),\\n      person(given = \\\"Indrajeet\\\",\\n             family = \\\"Patil\\\",\\n             role = \\\"aut\\\",\\n             email = \\\"patilindrajeet.science@gmail.com\\\",\\n             comment = c(ORCID = \\\"0000-0003-1995-6531\\\", Twitter = \\\"@patilindrajeets\\\")),\\n      person(given = \\\"Rémi\\\", \\n             family = \\\"Thériault\\\",\\n             role = c(\\\"aut\\\", \\\"cre\\\"), \\n             email = \\\"remi.theriault@mail.mcgill.ca\\\",\\n             comment = c(ORCID = \\\"0000-0003-4315-6788\\\", Twitter = \\\"@rempsyc\\\")),\\n      person(given = \\\"Mattan S.\\\",\\n             family = \\\"Ben-Shachar\\\",\\n             role = \\\"aut\\\",\\n             email = \\\"matanshm@post.bgu.ac.il\\\",\\n             comment = c(ORCID = \\\"0000-0002-4287-4801\\\", Twitter = \\\"@mattansb\\\")),\\n      person(given = \\\"Brenton M.\\\",\\n             family = \\\"Wiernik\\\",\\n             role = \\\"aut\\\",\\n             email = \\\"brenton@wiernik.org\\\",\\n             comment = c(ORCID = \\\"0000-0001-9560-6336\\\", Twitter = \\\"@bmwiernik\\\")),\\n      person(given = \\\"Rudolf\\\",\\n             family = \\\"Siegel\\\",\\n             role = \\\"ctb\\\",\\n             email = \\\"mutlusun@users.noreply.github.com\\\",\\n             comment = c(ORCID = \\\"0000-0002-6021-804X\\\")),\\n     person(given = \\\"Camden\\\",\\n            family = \\\"Bock\\\",\\n            role = \\\"ctb\\\",\\n            email = \\\"camden.bock@maine.edu\\\",\\n            comment = c(ORCID = \\\"0000-0002-3907-7748\\\")))\"\n\n\n\nfonction match_tld_in_email_domain\n\n\nmatch_tld_in_email_domain &lt;- function(str) {\n  \n  pattern_tld    &lt;- \"([^[.]]+$)\"\n  resultat &lt;- stringi::stri_match_all_regex(\n              str = str, \n              pattern = pattern_tld,\n              omit_no_match = FALSE)[[1]]\n  \n  return(resultat[,2])\n\n}\n\n\nExtraction des TLDs\n\n\nmail_tlds &lt;- tbl_emails_in_authorsR$email_domain |&gt; \n  map(match_tld_in_email_domain) |&gt; \n  unlist()\n\n\nAjout à la table d’information renommée tbl_emails\n\n\ntbl_emails &lt;- tbl_emails_in_authorsR |&gt; \n  mutate(tld = mail_tlds)\n\n\nSauvegarde des informations sur les adresses de messagerie\n\n\n\nCode\nsaveRDS(\n  object = tbl_emails,\n  file = paste(Sys.Date(),\"tbl_emails.RDS\", sep = \"_\")\n)\n\n\n\nDécompte des email_id, email_domain et tld\n\n\n\n\n\n\n\nNote\n\n\n\n\n\nSur les 32627 recensés on dénombre :\n\n18509 emails différents,\n4122 serveurs de messagerie différents,\n159 TLD différents,\n\n\n\n\n\nRapport sur les emails\n\n\nclassement du nombre d’emails (dans le champ Authors@R) par package R\n\n\ntbl_emails |&gt; \n  summarize(email_per_pkg = n(), .by = \"Package\") |&gt;  \n  arrange(desc(email_per_pkg)) |&gt;\n  print(n = 20)\n\n# A tibble: 21,910 × 2\n   Package         email_per_pkg\n   &lt;chr&gt;                   &lt;int&gt;\n 1 mlpack                    145\n 2 broom                     113\n 3 FAIRmaterials              51\n 4 moderndive                 43\n 5 rticles                    43\n 6 CSTools                    34\n 7 mlr                        28\n 8 semTools                   26\n 9 skimr                      25\n10 netSEM                     24\n11 fgeo                       22\n12 Seurat                     22\n13 fivethirtyeight            21\n14 mice                       20\n15 shinyscholar               20\n16 httk                       19\n17 EpiNow2                    18\n18 Rage                       18\n19 refund                     18\n20 wallace                    18\n# ℹ 21,890 more rows\n\n\n\nclassement par occurrences d’emails\n\n\nemail_occurrences &lt;- emails |&gt; \n  summarize(n = n(), .by = \"email\") |&gt;\n  arrange(desc(n), email)\n\ngt_email_occurrences &lt;- gt(email_occurrences |&gt; dplyr::filter(n &gt;= 30)) |&gt; \n  tab_header(\n    title    = md(\"**Email in packages db sorted by occurrences**\"),\n    subtitle = md(paste(\"**( email displayed only for n &gt;= 30 )**\"))\n  ) |&gt; \n  tab_footnote(\n    footnote  = md(paste(\"Données valables pour le \", Sys.Date())),\n    locations = cells_column_labels()\n  )\n\ngt_email_occurrences\n\n\n\n\n\n\n\nEmail in packages db sorted by occurrences\n\n\n( email displayed only for n &gt;= 30 )\n\n\nemail1\nn1\n\n\n\n\nAchim.Zeileis@R-project.org\n58\n\n\nhadley@posit.co\n57\n\n\nlaurent_step@outlook.fr\n56\n\n\njeroenooms@gmail.com\n55\n\n\nhadley@rstudio.com\n54\n\n\ncsardi.gabor@gmail.com\n51\n\n\nKurt.Hornik@R-project.org\n50\n\n\nedd@debian.org\n45\n\n\nhenrikb@braju.com\n41\n\n\nmyrmecocystus@gmail.com\n41\n\n\nmdsumner@gmail.com\n38\n\n\nmaechler@stat.math.ethz.ch\n37\n\n\nmuschellij2@gmail.com\n37\n\n\nmichellang@gmail.com\n35\n\n\nmtsagris@uoc.gr\n34\n\n\nguangchuangyu@gmail.com\n32\n\n\n\n1 Données valables pour le 2025-01-16\n\n\n\n\n\n\n\n\n\ngraphe log log\n\n\ntable_email_occurrences &lt;- table(email_occurrences$n)\ntbl_email_occurences &lt;- table_email_occurrences |&gt; \n  as.matrix() |&gt; \n  as_tibble() |&gt; \n  dplyr::mutate(n = as.numeric(dimnames(table_email_occurrences)[[1]])) |&gt; \n  rename(frequence = V1)\n\nggplot(data = tbl_email_occurences) +\n  geom_point(aes(x = log(n), y = log(frequence))) +\n  geom_smooth(method = 'lm', aes(x = log(n), y = log(frequence))) +\n  labs(\n    title = \"Log-log graph relatively to email occurrence frequencies\",\n    x = \"email occurrences (log scale)\",\n    y = \"frequency (log scale)\"\n  )\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\n\n\n\neq &lt;- lm(log(frequence) ~ log(n), data = tbl_email_occurences)\n\neq$coefficients\n\n(Intercept)      log(n) \n   9.405376   -2.471678 \n\n\n\n\n\n\n\n\nNote\n\n\n\n\n\nSoit n le nombre d’occurrences d’un email\nSoit freq le nombre d’emails apparaissant avec cette occurrence n\nOn a \\[log(freq) = a \\times log(n) + b\\] Soit \\[freq = exp(b) \\times n^a\\]\navec \\(a =\\) -2.4716776 et \\(b =\\) 9.4053765\n\n\n\n\nRapport sur les noms de domaines\n\n\nclassement par occurrences de serveurs de messagerie\n\n\nmail_server_occurrences &lt;- tbl_emails |&gt;\n  filter(!is.na(email_id) & !is.na(email_domain)) |&gt; \n  summarize(n = n(), .by = \"email_domain\") |&gt;\n  arrange(desc(n), \"email_domain\")\n\ngt_mail_server_occurrences &lt;- gt(mail_server_occurrences |&gt; \n                                   dplyr::filter(n &gt;= 100)) |&gt; \n  tab_header(\n    title    = md(\"**Mail server in packages db sorted by occurrences**\"),\n    subtitle = md(paste(\"**( Mail server displayed only for n &gt;= 100 )**\"))\n  ) |&gt; \n  tab_footnote(\n    footnote  = md(paste(\"Données valables pour le \", Sys.Date())),\n    locations = cells_column_labels()\n  )\n\ngt_mail_server_occurrences\n\n\n\n\n\n\n\nMail server in packages db sorted by occurrences\n\n\n( Mail server displayed only for n &gt;= 100 )\n\n\nemail_domain1\nn1\n\n\n\n\ngmail.com\n9957\n\n\nposit.co\n318\n\n\noutlook.com\n258\n\n\nhotmail.com\n251\n\n\nrstudio.com\n207\n\n\numich.edu\n204\n\n\nR-project.org\n196\n\n\n163.com\n170\n\n\nroche.com\n161\n\n\ninrae.fr\n134\n\n\nuw.edu\n131\n\n\nicar.gov.in\n123\n\n\nprotonmail.com\n117\n\n\nyahoo.com\n115\n\n\ncase.edu\n106\n\n\nberkeley.edu\n101\n\n\n\n1 Données valables pour le 2025-01-16\n\n\n\n\n\n\n\n\n\nclassement par occurrences de TLD\n\n\nTLD_occurrences &lt;- tbl_emails |&gt; \n  filter(!is.na(email_id) & !is.na(email_domain)) |&gt; \n  summarize(n = n(), .by = \"tld\") |&gt;\n  arrange(desc(n), tld)\n\ngt_TLD_occurrences &lt;- gt(TLD_occurrences |&gt; dplyr::filter(n &gt;= 100)) |&gt; \n  tab_header(\n    title    = md(\"**Mail server TLDs in packages db sorted by occurrences**\"),\n    subtitle = md(paste(\"**( Mail server TLD displayed only for n &gt;= 100 )**\"))\n  ) |&gt; \n  tab_footnote(\n    footnote  = md(paste(\"Données valables pour le \", Sys.Date())),\n    locations = cells_column_labels()\n    )\n\ngt_TLD_occurrences\n\n\n\n\n\n\n\nMail server TLDs in packages db sorted by occurrences\n\n\n( Mail server TLD displayed only for n &gt;= 100 )\n\n\ntld1\nn1\n\n\n\n\ncom\n13418\n\n\nedu\n5023\n\n\nde\n1637\n\n\norg\n1284\n\n\nuk\n1267\n\n\nfr\n1139\n\n\nca\n930\n\n\nes\n554\n\n\nau\n497\n\n\nnl\n471\n\n\nch\n448\n\n\nco\n427\n\n\nit\n420\n\n\nbr\n380\n\n\nnet\n357\n\n\ngov\n351\n\n\ncn\n317\n\n\nat\n285\n\n\nbe\n243\n\n\ndk\n234\n\n\nno\n218\n\n\nin\n162\n\n\nnz\n138\n\n\nfi\n118\n\n\neu\n113\n\n\nse\n112\n\n\ngr\n106\n\n\nme\n106\n\n\npl\n105\n\n\nie\n101\n\n\n\n1 Données valables pour le 2025-01-16\n\n\n\n\n\n\n\n\n\n\n\n\nvia l’email en entier\n\n\nfind_pkgs_by_email &lt;- function(email_id) {\n  \n  resultat &lt;- emails |&gt;\n  filter(email == email_id) |&gt;\n  select(Package) |&gt;\n  distinct() |&gt; \n  arrange() |&gt; \n  pull()\n  \n  return(resultat)\n  \n}\n\nemail_id &lt;- \"hadley@posit.co\"\nfind_pkgs_by_email(email_id)\n\n [1] \"bigrquery\"  \"broom\"      \"dbplyr\"     \"diffviewer\" \"downlit\"   \n [6] \"dplyr\"      \"dtplyr\"     \"ellmer\"     \"evaluate\"   \"fs\"        \n[11] \"gargle\"     \"ggplot2\"    \"ggvis\"      \"gtable\"     \"haven\"     \n[16] \"httr\"       \"httr2\"      \"isoband\"    \"lifecycle\"  \"logger\"    \n[21] \"minty\"      \"modelr\"     \"multidplyr\" \"multiverse\" \"odbc\"      \n[26] \"pins\"       \"pkgdown\"    \"pool\"       \"profvis\"    \"readr\"     \n[31] \"readxl\"     \"recipes\"    \"reprex\"     \"rJavaEnv\"   \"rlang\"     \n[36] \"rmarkdown\"  \"roxygen2\"   \"rsample\"    \"rstudioapi\" \"rticles\"   \n[41] \"rvest\"      \"S7\"         \"scales\"     \"shinytest\"  \"shinytest2\"\n[46] \"stringr\"    \"svglite\"    \"testthat\"   \"tidymodels\" \"tidyr\"     \n[51] \"tidyselect\" \"usethis\"    \"vctrs\"      \"vroom\"      \"waldo\"     \n[56] \"withr\"      \"xml2\"      \n\n\n\nvia le nom de domaine\n\n\nfind_pkgs_by_domain &lt;- function(domain) {\n  \n  resultat &lt;- tbl_emails |&gt;\n  dplyr::filter(email_domain == domain) |&gt;\n  select(Package) |&gt;\n  distinct() |&gt; \n  arrange() |&gt; \n  pull()\n  \n  return(resultat)\n  \n}\n\ndomain &lt;- \"thinkr.fr\"\nfind_pkgs_by_domain(domain)\n\n [1] \"arpr\"        \"attachment\"  \"checkhelper\" \"dockerfiler\" \"fakir\"      \n [6] \"fusen\"       \"gitdown\"     \"golem\"       \"leafgl\"      \"lightparser\"\n[11] \"recforest\"   \"rtodoist\"    \"rusk\"        \"shinipsum\"   \"thinkr\"     \n[16] \"togglr\"     \n\n\n\nvia le tld du nom de domaine\n\n\nfind_pkgs_by_tld &lt;- function(tld_id) {\n  \n  resultat &lt;- tbl_emails |&gt;\n  dplyr::filter(tld == tld_id) |&gt;\n  select(Package) |&gt;\n  distinct() |&gt; \n  arrange() |&gt; \n  pull()\n  \n  return(resultat)\n  \n}\n\ntld_id &lt;- \"fr\"\nfind_pkgs_by_tld(tld_id) |&gt; length()\n\n[1] 723"
  },
  {
    "objectID": "posts/20250108_pkgdb-2/index.html#etude-des-données-obtenues-sur-les-paquets-à-partir-de-cran_package_db",
    "href": "posts/20250108_pkgdb-2/index.html#etude-des-données-obtenues-sur-les-paquets-à-partir-de-cran_package_db",
    "title": "R packages database (2/?)",
    "section": "",
    "text": "Code\nlibrary(dplyr)\nlibrary(tools)\nlibrary(gt)\nlibrary(purrr)\nlibrary(ggplot2)\nlibrary(tibble)\nlibrary(stringi)\n\n\n\n\n\n\n\n\nNote\n\n\n\n\n\nLes champs conservés dans la suite de l’étude sont :\n\nceux dont les données ne présentent aucune valeur NA.\nle champ Authors@R qui comporte des informations textes intéressantes\n\n\n\n\n\npkgdb_CRAN &lt;- tools::CRAN_package_db()\n\nsaveRDS(object = pkgdb_CRAN,\n        file = paste(Sys.Date(), \"pkgdb_CRAN.RDS\",\n        sep = \"_\"))\n\n\n\n\nfields &lt;- c(\n  \"Package\", \"Version\", \"Depends\", \"License\", \"MD5sum\", \n  \"NeedsCompilation\", \"Author\", \"Authors@R\", \"Date/Publication\", \n  \"Description\", \"Maintainer\", \"Packaged\", \"Title\", \"Published\")\n\npkgdb &lt;- pkgdb_CRAN |&gt; \n  dplyr::select(all_of(fields))\n\n\n\n\n\n\nCode\ntable_licenses &lt;- table(pkgdb$License)\ntbl_licenses   &lt;- table_licenses |&gt; \n  as.matrix() |&gt; \n  as_tibble() |&gt; \n  dplyr::mutate(license = dimnames(table_licenses)[[1]]) |&gt; \n  rename(\"Nom licence\" = license,\n          occurrences = V1,\n        ) |&gt; \n  dplyr::relocate(\"Nom licence\")\n\n\n\nLicences à usage unique\n\n\n#|label: orphan_licenses\n\ntbl_orphan_licenses &lt;- tbl_licenses |&gt; \n    dplyr::filter(occurrences == 1) |&gt; \n    left_join(pkgdb, join_by(\"Nom licence\" == License)) |&gt; \n    select(Package, \"Nom licence\")\n\ngt_orphan_licenses &lt;- gt(tbl_orphan_licenses) |&gt; \n  tab_header(\n    title    = md(\"**Licences orphelines**\"),\n    subtitle = md(\"(occurrence de licence égale à 1 pour un paquet donné)\")\n  ) \n\ngt_orphan_licenses\n\n\n\n\n\n\n\nLicences orphelines\n\n\n(occurrence de licence égale à 1 pour un paquet donné)\n\n\nPackage\nNom licence\n\n\n\n\nQDiabetes\nAGPL-3 + file LICENSE\n\n\nround\nAGPL (&gt;= 3) | file LICENSE\n\n\ntidywater\nApache License (&gt;= 2) | MIT + file LICENSE\n\n\nAutoDeskR\nApache License | file LICENSE\n\n\nrtson\nApache License Version 2.0\n\n\ntmle\nBSD_3_clause + file LICENSE | GPL-2\n\n\ninstall.load\nCC BY-SA 4.0 | GPL-3 | file LICENSE\n\n\ngmGeostats\nCC BY-SA 4.0 | GPL (&gt;= 2)\n\n\nigraphdata\nCC BY-SA 4.0 + file LICENSE\n\n\nSCGLR\nCeCILL-2 | GPL-2\n\n\nrunMCMCbtadjust\nCECILL-2.1\n\n\nAMAPVox\nCeCILL (&gt;= 2)\n\n\nRcsdp\nCPL-1.0\n\n\ntest2norm\nCPL (&gt;= 2)\n\n\nei.Datasets\nEPL | CC BY 4.0 | file LICENSE\n\n\nlphom\nEPL | file LICENSE\n\n\nflagr\nEUPL-1.1\n\n\nvardpoor\nEUPL | file LICENSE\n\n\nfontBitstreamVera\nfile LICENCE\n\n\nfastcluster\nFreeBSD | GPL-2 | file LICENSE\n\n\nvisvow\nGNU General Public License (&gt;= 2)\n\n\nNIPTeR\nGNU Lesser General Public License\n\n\nblender\nGPL-2 | Artistic-2.0\n\n\nRefManageR\nGPL-2 | GPL-3 | BSD_3_clause + file LICENSE\n\n\ndmm\nGPL-2 | GPL (&gt;= 2) | GPL-3\n\n\nhunspell\nGPL-2 | LGPL-2.1 | MPL-1.1\n\n\nmidasr\nGPL-2 | MIT + file LICENCE\n\n\nsf\nGPL-2 | MIT + file LICENSE\n\n\nmapscanner\nGPL-3 | BSD_2_clause + file LICENSE\n\n\nconvergEU\nGPL-3 | BSD_3_clause + file LICENSE\n\n\neyelinker\nGPL-3 | file LICENCE\n\n\nmagree\nGPL-3 | GPL-2\n\n\nrxylib\nGPL-3 | LGPL-2.1\n\n\nconf\nGPL (&lt;= 2)\n\n\nminiGUI\nGPL (&lt;= 2.0)\n\n\nrjags\nGPL (== 2)\n\n\nDiffCorr\nGPL (&gt; 3)\n\n\nPade\nGPL (&gt;= 2) | BSD_2_clause + file LICENSE\n\n\nsoilhypfit\nGPL (&gt;= 2) | LGPL-3\n\n\nmedfate\nGPL (&gt;= 2) | LGPL (&gt;= 3)\n\n\nRCriteo\nGPL (&gt;= 2) | MIT + file LICENSE\n\n\nmeteo\nGPL (&gt;= 2.0) | file LICENCE\n\n\nMAT\nGPL (&gt;= 2.10)\n\n\nTrialSize\nGPL (&gt;= 2.15.1)\n\n\nRM.weights\nGPL (&gt;= 3.0.0)\n\n\nconcatenate\nGPL (&gt;= 3.2)\n\n\ngMOIP\nGPL (&gt;= 3.3.2)\n\n\nseqminer\nGPL | file LICENSE\n\n\nsynchronicity\nLGPL-2 | Apache License 2.0\n\n\nbsts\nLGPL-2.1 | MIT + file LICENSE\n\n\ntcltk2\nLGPL-3 + file LICENSE\n\n\nRSNNS\nLGPL (&gt;= 2) | file LICENSE\n\n\nShortForm\nLGPL (&gt;= 2.0, &lt; 3) | Mozilla Public License\n\n\nmapproj\nLucent Public License\n\n\nlabeling\nMIT + file LICENSE | Unlimited\n\n\nRH2\nMozilla Public License 1.1\n\n\nASGS.foyer\nMPL\n\n\nvenneuler\nMPL-1.1\n\n\nRSpectra\nMPL (&gt;= 2)\n\n\nFIT\nMPL (&gt;= 2) | file LICENSE\n\n\nRborist\nMPL (&gt;= 2) | GPL (&gt;= 2) | file LICENSE\n\n\n\n\n\n\n\n\nAutres licences\n\n\n#|label: other_licenses\n\ntbl_other_licenses &lt;- tbl_licenses |&gt; \n  filter(occurrences &gt; 1)\n\ngt_other_licenses &lt;- gt(tbl_other_licenses) |&gt; \n  tab_header(\n    title    = md(\"**Licences non orphelines**\"),\n    subtitle = md(\"(occurrences de licence supérieure à 1 pour un paquet donné)\")\n  ) \n\ngt_other_licenses\n\n\n\n\n\n\n\nLicences non orphelines\n\n\n(occurrences de licence supérieure à 1 pour un paquet donné)\n\n\nNom licence\noccurrences\n\n\n\n\nACM | file LICENSE\n2\n\n\nAGPL\n9\n\n\nAGPL-3\n124\n\n\nAGPL-3 | file LICENSE\n13\n\n\nAGPL (&gt;= 3)\n59\n\n\nAGPL + file LICENSE\n2\n\n\nApache License\n20\n\n\nApache License (== 2)\n9\n\n\nApache License (== 2.0)\n65\n\n\nApache License (== 2.0) | file LICENSE\n12\n\n\nApache License (&gt;= 2)\n139\n\n\nApache License (&gt;= 2.0)\n56\n\n\nApache License 2.0\n138\n\n\nApache License 2.0 | file LICENSE\n31\n\n\nArtistic-2.0\n108\n\n\nArtistic License 2.0\n6\n\n\nBSD 2-clause License + file LICENSE\n12\n\n\nBSD 3-clause License + file LICENSE\n3\n\n\nBSD_2_clause + file LICENCE\n3\n\n\nBSD_2_clause + file LICENSE\n112\n\n\nBSD_3_clause + file LICENCE\n6\n\n\nBSD_3_clause + file LICENSE\n140\n\n\nBSD_3_clause + file LICENSE | GPL (&gt;= 2)\n4\n\n\nBSL\n2\n\n\nBSL-1.0\n7\n\n\nCC BY-NC-SA 4.0\n13\n\n\nCC BY-NC 4.0\n5\n\n\nCC BY-SA 4.0\n26\n\n\nCC BY 4.0\n80\n\n\nCC0\n236\n\n\nCC0 | file LICENSE\n2\n\n\nCeCILL\n8\n\n\nCeCILL-2\n12\n\n\nCeCILL-2 | file LICENSE\n2\n\n\nCommon Public License Version 1.0\n2\n\n\nCreative Commons Attribution 4.0 International License\n2\n\n\nEPL\n3\n\n\nEUPL\n32\n\n\nEUPL (&gt;= 1.1)\n2\n\n\nEUPL (&gt;= 1.2)\n4\n\n\nfile LICENSE\n11\n\n\nFreeBSD\n10\n\n\nFreeBSD | file LICENSE\n2\n\n\nGNU General Public License\n28\n\n\nGNU General Public License (&gt;= 3)\n6\n\n\nGNU General Public License version 2\n5\n\n\nGNU General Public License version 3\n3\n\n\nGPL\n449\n\n\nGPL-2\n2399\n\n\nGPL-2 | file LICENCE\n2\n\n\nGPL-2 | file LICENSE\n46\n\n\nGPL-2 | GPL-3\n344\n\n\nGPL-2 | GPL-3 | file LICENSE\n3\n\n\nGPL-2 | GPL-3 | MIT + file LICENSE\n2\n\n\nGPL-3\n4895\n\n\nGPL-3 | file LICENSE\n136\n\n\nGPL-3 + file LICENSE\n19\n\n\nGPL (== 3.0)\n2\n\n\nGPL (&gt; 2)\n10\n\n\nGPL (&gt;= 2)\n4286\n\n\nGPL (&gt;= 2) | file LICENCE\n9\n\n\nGPL (&gt;= 2) | file LICENSE\n47\n\n\nGPL (&gt;= 2) | LGPL (&gt;= 2)\n2\n\n\nGPL (&gt;= 2.0)\n103\n\n\nGPL (&gt;= 2.0) | file LICENSE\n3\n\n\nGPL (&gt;= 2.1)\n3\n\n\nGPL (&gt;= 3)\n2022\n\n\nGPL (&gt;= 3) | file LICENCE\n5\n\n\nGPL (&gt;= 3) | file LICENSE\n29\n\n\nGPL (&gt;= 3.0)\n45\n\n\nGPL (&gt;= 3.5.0)\n5\n\n\nLGPL\n47\n\n\nLGPL-2\n15\n\n\nLGPL-2 | BSD_3_clause + file LICENSE\n2\n\n\nLGPL-2 | LGPL-3 | GPL-2 | GPL-3\n6\n\n\nLGPL-2.1\n27\n\n\nLGPL-2.1 | file LICENSE\n2\n\n\nLGPL-3\n179\n\n\nLGPL-3 | Apache License 2.0\n5\n\n\nLGPL-3 | file LICENSE\n5\n\n\nLGPL (&gt;= 2)\n25\n\n\nLGPL (&gt;= 2.0)\n5\n\n\nLGPL (&gt;= 2.0, &lt; 3)\n2\n\n\nLGPL (&gt;= 2.1)\n59\n\n\nLGPL (&gt;= 3)\n72\n\n\nLGPL (&gt;= 3) | file LICENSE\n3\n\n\nMIT + file LICENCE\n21\n\n\nMIT + file LICENSE\n4846\n\n\nMIT + file LICENSE | Apache License 2.0\n6\n\n\nMIT License + file LICENSE\n6\n\n\nMozilla Public License 2.0\n7\n\n\nMozilla Public License Version 2.0\n2\n\n\nMPL-2.0\n16\n\n\nMPL-2.0 | file LICENSE\n7\n\n\nMPL (== 2.0)\n2\n\n\nMPL (&gt;= 2.0)\n2\n\n\nUnlimited\n51\n\n\nUnlimited | file LICENSE\n2\n\n\n\n\n\n\n\n\n\n\n\n\n\ndétermination du nombre de mails à trouver\n\n\n\nCode\nauthorsR &lt;- pkgdb$`Authors@R`\n\nemails_count_per_pkgdb_row &lt;- authorsR |&gt; \n  stri_count_regex(pattern = \"[@]\")\n\n# NA is considered to be total 0\n\nemails_count_per_pkgdb_row[is.na(emails_count_per_pkgdb_row)] &lt;- 0\n\nemails_total_estimated &lt;- emails_count_per_pkgdb_row |&gt; sum()\n\nemails_total_estimated\n\n\n[1] 32675\n\n\n\n\n\n\n\n\nNote\n\n\n\n\n\nLe nombre de mails à trouver correspond au nombre de symboles @ présents dans l’ensemble des données de la colonne Authors@R, soit ici : 3.2675^{4}\n\n\n\n\nfonction match_email_in_authors\n\n\nmatch_emails_in_authorsR &lt;- function(str) {\n  \n  pattern_email    &lt;- \"[\\\"|'|[ ]|[&lt;]]([^\\\"]+?)[@]{1}(.+?)[\\\"|'|[ ]|[&gt;]]\"\n  resultat &lt;- stringi::stri_match_all_regex(\n              str = str, \n              pattern = pattern_email,\n              omit_no_match = FALSE)[[1]]\n  \n  return(resultat)\n\n}\n\n\nextraction des emails\n\non récupère les matrices de correspondances de pattern pour chacun des champs Authors@R\n\nemails_in_authorsR &lt;- authorsR |&gt; \n  map(match_emails_in_authorsR)\n\nhead(emails_in_authorsR, n = 3)\n\n[[1]]\n     [,1] [,2] [,3]\n[1,] NA   NA   NA  \n\n[[2]]\n     [,1]                         [,2]          [,3]        \n[1,] \"\\\"martinbladt@math.ku.dk\\\"\" \"martinbladt\" \"math.ku.dk\"\n[2,] \"\\\"furrer@math.ku.dk\\\"\"      \"furrer\"      \"math.ku.dk\"\n\n[[3]]\n     [,1]                            [,2]             [,3]        \n[1,] \"\\\"sercan.kahveci@plus.ac.at\\\"\" \"sercan.kahveci\" \"plus.ac.at\"\n\nlength(emails_in_authorsR)\n\n[1] 21925\n\n\n\nRécupération du nombre de lignes pour chacune des matrices\n\n\nmatch_lines_per_pkgdb_row &lt;- emails_in_authorsR |&gt; \n  map(nrow) |&gt;\n  unlist()\n\nmatch_lines_per_pkgdb_row[1:100]\n\n  [1]  1  2  1  1  1  1  2  2  1  1  1  2  1  1  4  3  1  1  2  1 12  3  1  1  1\n [26]  3  3  5  1  3  7  1  1  1  5  1  2  2  1  4  1  1  1  1  1  5  1  1  1  1\n [51]  3  4  2  2  2  1  1  1  2  4  3  1  3  1  1  4  1  1  1  1  1  1  2  1  1\n [76]  4  1  2  1  1  1  3  2  1  3  1  1  1  1  1  1  1  1  1  3  1  3  1  3  1\n\n\n\ntransformation des 21925 matrices en une seule matrice\n\n\ntemp_mat_emails_in_authorsR &lt;- do.call(rbind, emails_in_authorsR)\n\nmat_emails_in_authorsR &lt;- cbind(\n  rep(x = pkgdb$Package, match_lines_per_pkgdb_row),\n  rep(x = pkgdb$Version, match_lines_per_pkgdb_row),\n  rep(x = pkgdb$Depends, match_lines_per_pkgdb_row),\n  temp_mat_emails_in_authorsR[,c(2,3)])\n\nmat_emails_in_authorsR[1:10, c(1,4,5)]\n\n      [,1]            [,2]                [,3]          \n [1,] \"A3\"            NA                  NA            \n [2,] \"AalenJohansen\" \"martinbladt\"       \"math.ku.dk\"  \n [3,] \"AalenJohansen\" \"furrer\"            \"math.ku.dk\"  \n [4,] \"AATtools\"      \"sercan.kahveci\"    \"plus.ac.at\"  \n [5,] \"ABACUS\"        NA                  NA            \n [6,] \"abasequence\"   \"andy.pilny\"        \"uky.edu\"     \n [7,] \"abbreviate\"    \"sigbert\"           \"hu-berlin.de\"\n [8,] \"abc\"           \"kati.csillery\"     \"gmail.com\"   \n [9,] \"abc\"           \"michael.blum.temp\" \"gmail.com\"   \n[10,] \"abc.data\"      \"kati.csillery\"     \"gmail.com\"   \n\n\n\npuis en un tibble\n\n\ntbl_emails_in_authorsR &lt;- as_tibble(mat_emails_in_authorsR) |&gt; \n  rename(Package = V1, \n         Version = V2,\n         Depends = V3,\n        email_id = V4, \n    email_domain = V5) \n\ntbl_emails_in_authorsR\n\n# A tibble: 37,956 × 5\n   Package       Version Depends                           email_id email_domain\n   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;                             &lt;chr&gt;    &lt;chr&gt;       \n 1 A3            1.0.0   R (&gt;= 2.15.0), xtable, pbapply    &lt;NA&gt;     &lt;NA&gt;        \n 2 AalenJohansen 1.0     &lt;NA&gt;                              martinb… math.ku.dk  \n 3 AalenJohansen 1.0     &lt;NA&gt;                              furrer   math.ku.dk  \n 4 AATtools      0.0.3   R (&gt;= 3.6.0)                      sercan.… plus.ac.at  \n 5 ABACUS        1.0.0   R (&gt;= 3.1.0)                      &lt;NA&gt;     &lt;NA&gt;        \n 6 abasequence   0.1.0   &lt;NA&gt;                              andy.pi… uky.edu     \n 7 abbreviate    0.1     &lt;NA&gt;                              sigbert  hu-berlin.de\n 8 abc           2.2.2   R (&gt;= 2.10), abc.data, nnet, qua… kati.cs… gmail.com   \n 9 abc           2.2.2   R (&gt;= 2.10), abc.data, nnet, qua… michael… gmail.com   \n10 abc.data      1.1     R (&gt;= 2.10)                       kati.cs… gmail.com   \n# ℹ 37,946 more rows\n\n\n\nrésumé par ligne du data.frame pkgdb\n\n\nsummary_emails_per_pkgdb_row &lt;- tbl_emails_in_authorsR |&gt; \n  mutate(n = if_else(is.na(email_id) & is.na(email_domain), 0, 1)) |&gt; \n  summarize(.by = c(Package, Version, Depends), emails_count = sum(n)) |&gt; \n  mutate(emails_count_estimated = emails_count_per_pkgdb_row)\n\nsummary_emails_per_pkgdb_row\n\n# A tibble: 21,925 × 5\n   Package       Version Depends             emails_count emails_count_estimated\n   &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;                      &lt;dbl&gt;                  &lt;dbl&gt;\n 1 A3            1.0.0   R (&gt;= 2.15.0), xta…            0                      0\n 2 AalenJohansen 1.0     &lt;NA&gt;                           2                      2\n 3 AATtools      0.0.3   R (&gt;= 3.6.0)                   1                      1\n 4 ABACUS        1.0.0   R (&gt;= 3.1.0)                   0                      0\n 5 abasequence   0.1.0   &lt;NA&gt;                           1                      1\n 6 abbreviate    0.1     &lt;NA&gt;                           1                      1\n 7 abc           2.2.2   R (&gt;= 2.10), abc.d…            2                      2\n 8 abc.data      1.1     R (&gt;= 2.10)                    2                      2\n 9 ABC.RAP       0.9.0   R (&gt;= 3.1.0)                   0                      0\n10 ABCanalysis   1.2.1   R (&gt;= 2.10)                    0                      0\n# ℹ 21,915 more rows\n\nsummary_emails_per_pkgdb_row |&gt; summarize(total_emails = sum(emails_count))\n\n# A tibble: 1 × 1\n  total_emails\n         &lt;dbl&gt;\n1        32627\n\n\n\nrécupération des lignes du data.frame pkgdb où il y a un problème\n\nOn compare la valeur du champ emails_count à celle du champ emails_count_estimated\n\nbad_emails_count_rows &lt;- summary_emails_per_pkgdb_row |&gt; \n  mutate(difference = emails_count_estimated - emails_count) |&gt; \n  filter(difference != 0)\n\nbad_emails_count_rows |&gt; summarize(difference_totale = sum(difference))\n\n# A tibble: 1 × 1\n  difference_totale\n              &lt;dbl&gt;\n1                48\n\nprint(bad_emails_count_rows, n = nrow(bad_emails_count_rows))\n\n# A tibble: 27 × 6\n   Package        Version Depends emails_count emails_count_estimated difference\n   &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;                  &lt;dbl&gt;      &lt;dbl&gt;\n 1 CRediTas       0.2.0   &lt;NA&gt;               1                      3          2\n 2 data.table     1.16.4  R (&gt;= …            3                      5          2\n 3 easystats      0.7.3   R (&gt;= …            7                     12          5\n 4 equatiomatic   0.3.3   R (&gt;= …           11                     12          1\n 5 fullRankMatrix 0.1.0   &lt;NA&gt;               2                      4          2\n 6 ggcorrplot     0.1.4.1 R (&gt;= …            2                      3          1\n 7 ggsignif       0.6.4   &lt;NA&gt;               2                      4          2\n 8 ggtext         0.1.2   R (&gt;= …            2                      3          1\n 9 gridtext       0.1.5   R (&gt;= …            2                      3          1\n10 lintr          3.1.2   R (&gt;= …            2                      3          1\n11 meltr          1.0.2   R (&gt;= …            3                      4          1\n12 MLPUGS         0.2.0   R (&gt;= …            1                      2          1\n13 pipebind       0.1.2   &lt;NA&gt;               1                      2          1\n14 rearrr         0.3.4   R (&gt;= …            1                      2          1\n15 report         0.5.9   R (&gt;= …            8                     14          6\n16 ScorePlus      0.1     &lt;NA&gt;               3                      4          1\n17 see            0.9.0   graphi…            9                     15          6\n18 speakr         3.2.4   &lt;NA&gt;               0                      1          1\n19 stochLAB       1.1.2   R (&gt;= …            4                      5          1\n20 styler         1.10.3  R (&gt;= …            3                      4          1\n21 tidyfast       0.4.0   R (&gt;= …            2                      3          1\n22 tidygam        1.0.0   R (&gt;= …            0                      1          1\n23 tinyplot       0.2.1   R (&gt;= …            4                      5          1\n24 urlshorteneR   1.5.7   R (&gt;= …            1                      4          3\n25 WikidataQuery… 1.0.0   R (&gt;= …            1                      2          1\n26 wordPuzzleR    0.1.1   &lt;NA&gt;               2                      3          1\n27 WufooR         1.0.1   R (&gt;= …            1                      3          2\n\n\nL’examen des champs Authors correspondant aux packages montre que le nombre d’emails a été surestimé par le décompte du nombre de symboles @.\nEn effet on note la présence de nombreux items au format @&lt;chaine de caractères&gt; qui ne respectent pas le format standart d’une adresse de messagerie.\nExemple pour le paquet report:\n\nselect_bad_row &lt;- function(pkg) {\n  \n  bad_emails_count_rows |&gt; \n    left_join(pkgdb, by = c(\"Package\", \"Version\", \"Depends\")) |&gt; \n    select(Package, `Authors@R`) |&gt; \n    filter(Package == pkg) |&gt; \n    pull()\n  \n}\n\nselect_bad_row(pkg = \"report\") \n\n[1] \"\\n    c(person(given = \\\"Dominique\\\",\\n             family = \\\"Makowski\\\",\\n             role = \\\"aut\\\",\\n             email = \\\"dom.makowski@gmail.com\\\",\\n             comment = c(ORCID = \\\"0000-0001-5375-9967\\\", Twitter = \\\"@Dom_Makowski\\\")),\\n      person(given = \\\"Daniel\\\",\\n             family = \\\"Lüdecke\\\",\\n             role = \\\"aut\\\",\\n             email = \\\"d.luedecke@uke.de\\\",\\n             comment = c(ORCID = \\\"0000-0002-8895-3206\\\", Twitter = \\\"@strengejacke\\\")),\\n      person(given = \\\"Indrajeet\\\",\\n             family = \\\"Patil\\\",\\n             role = \\\"aut\\\",\\n             email = \\\"patilindrajeet.science@gmail.com\\\",\\n             comment = c(ORCID = \\\"0000-0003-1995-6531\\\", Twitter = \\\"@patilindrajeets\\\")),\\n      person(given = \\\"Rémi\\\", \\n             family = \\\"Thériault\\\",\\n             role = c(\\\"aut\\\", \\\"cre\\\"), \\n             email = \\\"remi.theriault@mail.mcgill.ca\\\",\\n             comment = c(ORCID = \\\"0000-0003-4315-6788\\\", Twitter = \\\"@rempsyc\\\")),\\n      person(given = \\\"Mattan S.\\\",\\n             family = \\\"Ben-Shachar\\\",\\n             role = \\\"aut\\\",\\n             email = \\\"matanshm@post.bgu.ac.il\\\",\\n             comment = c(ORCID = \\\"0000-0002-4287-4801\\\", Twitter = \\\"@mattansb\\\")),\\n      person(given = \\\"Brenton M.\\\",\\n             family = \\\"Wiernik\\\",\\n             role = \\\"aut\\\",\\n             email = \\\"brenton@wiernik.org\\\",\\n             comment = c(ORCID = \\\"0000-0001-9560-6336\\\", Twitter = \\\"@bmwiernik\\\")),\\n      person(given = \\\"Rudolf\\\",\\n             family = \\\"Siegel\\\",\\n             role = \\\"ctb\\\",\\n             email = \\\"mutlusun@users.noreply.github.com\\\",\\n             comment = c(ORCID = \\\"0000-0002-6021-804X\\\")),\\n     person(given = \\\"Camden\\\",\\n            family = \\\"Bock\\\",\\n            role = \\\"ctb\\\",\\n            email = \\\"camden.bock@maine.edu\\\",\\n            comment = c(ORCID = \\\"0000-0002-3907-7748\\\")))\"\n\n\n\nfonction match_tld_in_email_domain\n\n\nmatch_tld_in_email_domain &lt;- function(str) {\n  \n  pattern_tld    &lt;- \"([^[.]]+$)\"\n  resultat &lt;- stringi::stri_match_all_regex(\n              str = str, \n              pattern = pattern_tld,\n              omit_no_match = FALSE)[[1]]\n  \n  return(resultat[,2])\n\n}\n\n\nExtraction des TLDs\n\n\nmail_tlds &lt;- tbl_emails_in_authorsR$email_domain |&gt; \n  map(match_tld_in_email_domain) |&gt; \n  unlist()\n\n\nAjout à la table d’information renommée tbl_emails\n\n\ntbl_emails &lt;- tbl_emails_in_authorsR |&gt; \n  mutate(tld = mail_tlds)\n\n\nSauvegarde des informations sur les adresses de messagerie\n\n\n\nCode\nsaveRDS(\n  object = tbl_emails,\n  file = paste(Sys.Date(),\"tbl_emails.RDS\", sep = \"_\")\n)\n\n\n\nDécompte des email_id, email_domain et tld\n\n\n\n\n\n\n\nNote\n\n\n\n\n\nSur les 32627 recensés on dénombre :\n\n18509 emails différents,\n4122 serveurs de messagerie différents,\n159 TLD différents,\n\n\n\n\n\nRapport sur les emails\n\n\nclassement du nombre d’emails (dans le champ Authors@R) par package R\n\n\ntbl_emails |&gt; \n  summarize(email_per_pkg = n(), .by = \"Package\") |&gt;  \n  arrange(desc(email_per_pkg)) |&gt;\n  print(n = 20)\n\n# A tibble: 21,910 × 2\n   Package         email_per_pkg\n   &lt;chr&gt;                   &lt;int&gt;\n 1 mlpack                    145\n 2 broom                     113\n 3 FAIRmaterials              51\n 4 moderndive                 43\n 5 rticles                    43\n 6 CSTools                    34\n 7 mlr                        28\n 8 semTools                   26\n 9 skimr                      25\n10 netSEM                     24\n11 fgeo                       22\n12 Seurat                     22\n13 fivethirtyeight            21\n14 mice                       20\n15 shinyscholar               20\n16 httk                       19\n17 EpiNow2                    18\n18 Rage                       18\n19 refund                     18\n20 wallace                    18\n# ℹ 21,890 more rows\n\n\n\nclassement par occurrences d’emails\n\n\nemail_occurrences &lt;- emails |&gt; \n  summarize(n = n(), .by = \"email\") |&gt;\n  arrange(desc(n), email)\n\ngt_email_occurrences &lt;- gt(email_occurrences |&gt; dplyr::filter(n &gt;= 30)) |&gt; \n  tab_header(\n    title    = md(\"**Email in packages db sorted by occurrences**\"),\n    subtitle = md(paste(\"**( email displayed only for n &gt;= 30 )**\"))\n  ) |&gt; \n  tab_footnote(\n    footnote  = md(paste(\"Données valables pour le \", Sys.Date())),\n    locations = cells_column_labels()\n  )\n\ngt_email_occurrences\n\n\n\n\n\n\n\nEmail in packages db sorted by occurrences\n\n\n( email displayed only for n &gt;= 30 )\n\n\nemail1\nn1\n\n\n\n\nAchim.Zeileis@R-project.org\n58\n\n\nhadley@posit.co\n57\n\n\nlaurent_step@outlook.fr\n56\n\n\njeroenooms@gmail.com\n55\n\n\nhadley@rstudio.com\n54\n\n\ncsardi.gabor@gmail.com\n51\n\n\nKurt.Hornik@R-project.org\n50\n\n\nedd@debian.org\n45\n\n\nhenrikb@braju.com\n41\n\n\nmyrmecocystus@gmail.com\n41\n\n\nmdsumner@gmail.com\n38\n\n\nmaechler@stat.math.ethz.ch\n37\n\n\nmuschellij2@gmail.com\n37\n\n\nmichellang@gmail.com\n35\n\n\nmtsagris@uoc.gr\n34\n\n\nguangchuangyu@gmail.com\n32\n\n\n\n1 Données valables pour le 2025-01-16\n\n\n\n\n\n\n\n\n\ngraphe log log\n\n\ntable_email_occurrences &lt;- table(email_occurrences$n)\ntbl_email_occurences &lt;- table_email_occurrences |&gt; \n  as.matrix() |&gt; \n  as_tibble() |&gt; \n  dplyr::mutate(n = as.numeric(dimnames(table_email_occurrences)[[1]])) |&gt; \n  rename(frequence = V1)\n\nggplot(data = tbl_email_occurences) +\n  geom_point(aes(x = log(n), y = log(frequence))) +\n  geom_smooth(method = 'lm', aes(x = log(n), y = log(frequence))) +\n  labs(\n    title = \"Log-log graph relatively to email occurrence frequencies\",\n    x = \"email occurrences (log scale)\",\n    y = \"frequency (log scale)\"\n  )\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\n\n\n\neq &lt;- lm(log(frequence) ~ log(n), data = tbl_email_occurences)\n\neq$coefficients\n\n(Intercept)      log(n) \n   9.405376   -2.471678 \n\n\n\n\n\n\n\n\nNote\n\n\n\n\n\nSoit n le nombre d’occurrences d’un email\nSoit freq le nombre d’emails apparaissant avec cette occurrence n\nOn a \\[log(freq) = a \\times log(n) + b\\] Soit \\[freq = exp(b) \\times n^a\\]\navec \\(a =\\) -2.4716776 et \\(b =\\) 9.4053765\n\n\n\n\nRapport sur les noms de domaines\n\n\nclassement par occurrences de serveurs de messagerie\n\n\nmail_server_occurrences &lt;- tbl_emails |&gt;\n  filter(!is.na(email_id) & !is.na(email_domain)) |&gt; \n  summarize(n = n(), .by = \"email_domain\") |&gt;\n  arrange(desc(n), \"email_domain\")\n\ngt_mail_server_occurrences &lt;- gt(mail_server_occurrences |&gt; \n                                   dplyr::filter(n &gt;= 100)) |&gt; \n  tab_header(\n    title    = md(\"**Mail server in packages db sorted by occurrences**\"),\n    subtitle = md(paste(\"**( Mail server displayed only for n &gt;= 100 )**\"))\n  ) |&gt; \n  tab_footnote(\n    footnote  = md(paste(\"Données valables pour le \", Sys.Date())),\n    locations = cells_column_labels()\n  )\n\ngt_mail_server_occurrences\n\n\n\n\n\n\n\nMail server in packages db sorted by occurrences\n\n\n( Mail server displayed only for n &gt;= 100 )\n\n\nemail_domain1\nn1\n\n\n\n\ngmail.com\n9957\n\n\nposit.co\n318\n\n\noutlook.com\n258\n\n\nhotmail.com\n251\n\n\nrstudio.com\n207\n\n\numich.edu\n204\n\n\nR-project.org\n196\n\n\n163.com\n170\n\n\nroche.com\n161\n\n\ninrae.fr\n134\n\n\nuw.edu\n131\n\n\nicar.gov.in\n123\n\n\nprotonmail.com\n117\n\n\nyahoo.com\n115\n\n\ncase.edu\n106\n\n\nberkeley.edu\n101\n\n\n\n1 Données valables pour le 2025-01-16\n\n\n\n\n\n\n\n\n\nclassement par occurrences de TLD\n\n\nTLD_occurrences &lt;- tbl_emails |&gt; \n  filter(!is.na(email_id) & !is.na(email_domain)) |&gt; \n  summarize(n = n(), .by = \"tld\") |&gt;\n  arrange(desc(n), tld)\n\ngt_TLD_occurrences &lt;- gt(TLD_occurrences |&gt; dplyr::filter(n &gt;= 100)) |&gt; \n  tab_header(\n    title    = md(\"**Mail server TLDs in packages db sorted by occurrences**\"),\n    subtitle = md(paste(\"**( Mail server TLD displayed only for n &gt;= 100 )**\"))\n  ) |&gt; \n  tab_footnote(\n    footnote  = md(paste(\"Données valables pour le \", Sys.Date())),\n    locations = cells_column_labels()\n    )\n\ngt_TLD_occurrences\n\n\n\n\n\n\n\nMail server TLDs in packages db sorted by occurrences\n\n\n( Mail server TLD displayed only for n &gt;= 100 )\n\n\ntld1\nn1\n\n\n\n\ncom\n13418\n\n\nedu\n5023\n\n\nde\n1637\n\n\norg\n1284\n\n\nuk\n1267\n\n\nfr\n1139\n\n\nca\n930\n\n\nes\n554\n\n\nau\n497\n\n\nnl\n471\n\n\nch\n448\n\n\nco\n427\n\n\nit\n420\n\n\nbr\n380\n\n\nnet\n357\n\n\ngov\n351\n\n\ncn\n317\n\n\nat\n285\n\n\nbe\n243\n\n\ndk\n234\n\n\nno\n218\n\n\nin\n162\n\n\nnz\n138\n\n\nfi\n118\n\n\neu\n113\n\n\nse\n112\n\n\ngr\n106\n\n\nme\n106\n\n\npl\n105\n\n\nie\n101\n\n\n\n1 Données valables pour le 2025-01-16\n\n\n\n\n\n\n\n\n\n\n\n\nvia l’email en entier\n\n\nfind_pkgs_by_email &lt;- function(email_id) {\n  \n  resultat &lt;- emails |&gt;\n  filter(email == email_id) |&gt;\n  select(Package) |&gt;\n  distinct() |&gt; \n  arrange() |&gt; \n  pull()\n  \n  return(resultat)\n  \n}\n\nemail_id &lt;- \"hadley@posit.co\"\nfind_pkgs_by_email(email_id)\n\n [1] \"bigrquery\"  \"broom\"      \"dbplyr\"     \"diffviewer\" \"downlit\"   \n [6] \"dplyr\"      \"dtplyr\"     \"ellmer\"     \"evaluate\"   \"fs\"        \n[11] \"gargle\"     \"ggplot2\"    \"ggvis\"      \"gtable\"     \"haven\"     \n[16] \"httr\"       \"httr2\"      \"isoband\"    \"lifecycle\"  \"logger\"    \n[21] \"minty\"      \"modelr\"     \"multidplyr\" \"multiverse\" \"odbc\"      \n[26] \"pins\"       \"pkgdown\"    \"pool\"       \"profvis\"    \"readr\"     \n[31] \"readxl\"     \"recipes\"    \"reprex\"     \"rJavaEnv\"   \"rlang\"     \n[36] \"rmarkdown\"  \"roxygen2\"   \"rsample\"    \"rstudioapi\" \"rticles\"   \n[41] \"rvest\"      \"S7\"         \"scales\"     \"shinytest\"  \"shinytest2\"\n[46] \"stringr\"    \"svglite\"    \"testthat\"   \"tidymodels\" \"tidyr\"     \n[51] \"tidyselect\" \"usethis\"    \"vctrs\"      \"vroom\"      \"waldo\"     \n[56] \"withr\"      \"xml2\"      \n\n\n\nvia le nom de domaine\n\n\nfind_pkgs_by_domain &lt;- function(domain) {\n  \n  resultat &lt;- tbl_emails |&gt;\n  dplyr::filter(email_domain == domain) |&gt;\n  select(Package) |&gt;\n  distinct() |&gt; \n  arrange() |&gt; \n  pull()\n  \n  return(resultat)\n  \n}\n\ndomain &lt;- \"thinkr.fr\"\nfind_pkgs_by_domain(domain)\n\n [1] \"arpr\"        \"attachment\"  \"checkhelper\" \"dockerfiler\" \"fakir\"      \n [6] \"fusen\"       \"gitdown\"     \"golem\"       \"leafgl\"      \"lightparser\"\n[11] \"recforest\"   \"rtodoist\"    \"rusk\"        \"shinipsum\"   \"thinkr\"     \n[16] \"togglr\"     \n\n\n\nvia le tld du nom de domaine\n\n\nfind_pkgs_by_tld &lt;- function(tld_id) {\n  \n  resultat &lt;- tbl_emails |&gt;\n  dplyr::filter(tld == tld_id) |&gt;\n  select(Package) |&gt;\n  distinct() |&gt; \n  arrange() |&gt; \n  pull()\n  \n  return(resultat)\n  \n}\n\ntld_id &lt;- \"fr\"\nfind_pkgs_by_tld(tld_id) |&gt; length()\n\n[1] 723"
  },
  {
    "objectID": "posts/20241225_geo_square/index.html",
    "href": "posts/20241225_geo_square/index.html",
    "title": "Get geographic squares",
    "section": "",
    "text": "Code\nlibrary(ggplot2)\nlibrary(sf)\nlibrary(s2)\nlibrary(microbenchmark)\nlibrary(profvis)\nlibrary(purrr)\n\n\n\n\n\n# fonction génératrice de \"carré géographique\" de `alpha` degrés de côté\n# le point de base (lon, lat) est le point inférieur gauche. \n\nget_geo_square &lt;- function(lon, lat, alpha) {\n  \n  points &lt;- list(\n    matrix(\n      c(lon, lat,\n        lon + alpha, lat,\n        lon + alpha, lat + alpha,\n        lon, lat + alpha,\n        lon, lat),\n      ncol = 2,\n      byrow = TRUE\n    )\n  )\n  st_polygon(points)\n  \n}\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\n\n\nLa fonction renvoie un résultat si l’angle \\(\\alpha\\) vérifie la condition :\n\\[90^\\circ\\space\\bmod\\space\\alpha = 0\\]\n\n\n\n\n\n\n\nget_all_geo_squares_on_sphere &lt;- function(alpha) {\n  \n  if (90 %% alpha == 0) {\n    \n    lon &lt;- seq(-180, 180 - alpha, by = alpha)\n    lat &lt;- seq(-90, 90 - alpha, by = alpha)\n    geom &lt;- vector(\"list\", length = length(lon) * length(lat))\n    n &lt;- 0\n    for (x in lon) {\n      for (y in lat) {\n        n &lt;- n + 1\n        geom[[n]] &lt;- get_geo_square(x, y, alpha)\n      }\n    } \n    geom &lt;- geom |&gt; st_as_sfc(crs = st_crs(4326))\n    return(geom)\n  } else {\n    return(NULL)\n  }\n  \n}\n\n\n\n\n\n\nCode\nmicrobenchmark(\n  get_all_geo_squares_on_sphere(alpha = 1),\n  get_all_geo_squares_on_sphere(alpha = 10),\n  times = 10L\n) |&gt; \n  ggplot2::autoplot()\n\n\n\n\n\n\n\n\n\n\n\n\n\ngeo_squares &lt;- get_all_geo_squares_on_sphere(alpha = 10)\n\ngeo_centroids &lt;- geo_squares |&gt; \n  st_centroid()\n\nggplot() +\n  geom_sf(data = geo_squares) +\n  geom_sf(data = geo_centroids, color = \"red\", cex = 0.5)\n\n\n\n\n\n\n\n#--------------------------------------------------\n\ngeo_squares_moll &lt;- st_transform(\n  geo_squares,\n  crs = \"+proj=moll\"\n)\n\ngeo_centroids_moll &lt;- st_transform(\n  geo_centroids,\n  crs = \"+proj=moll\"\n)\n\nggplot() +\n  geom_sf(data = geo_squares_moll) +\n  geom_sf(data = geo_centroids_moll, color = \"red\", cex = 0.5)\n\n\n\n\n\n\n\n\n\n\n\n\nget_s2_square &lt;- function(lon, lat, alpha) {\n  \n  points &lt;- matrix(\n      c(lon, lat,\n        lon + alpha, lat,\n        lon + alpha, lat + alpha,\n        lon, lat + alpha,\n        lon, lat),\n      ncol = 2,\n      byrow = TRUE\n    )\n  s2_make_polygon(points[, 1], points[, 2])\n  \n}\n\nfunction get_all_s2_squares_on_sphere\n\nget_all_s2_squares_on_sphere &lt;- function(alpha) {\n  \n  if (90 %% alpha == 0) {\n    \n    lon &lt;- seq(-180, 180 - alpha, by = alpha)\n    lat &lt;- seq(-90, 90 - alpha, by = alpha)\n    geom &lt;- vector(mode = \"list\", length = length(lon) * length(lat))\n    n &lt;- 0\n    for (x in lon) {\n      for (y in lat) {\n        n &lt;- n + 1\n        geom[[n]] &lt;- get_s2_square(x, y, alpha)\n      }\n    } \n    geom &lt;- geom |&gt; \n      map(st_as_sfc) |&gt; \n      unlist(recursive = FALSE) |&gt; \n      st_as_sfc(crs = st_crs(4326))\n    return(geom)\n  } else {\n    return(NULL)\n  }\n  \n}\n\n\n\n\n\n\nCode\nmicrobenchmark(\n  get_all_s2_squares_on_sphere(alpha = 30),\n  get_all_s2_squares_on_sphere(alpha = 10),\n  times = 100\n) |&gt; \n  ggplot2::autoplot()\n\n\n\n\n\n\n\n\n\n\n\n\n\nprofvis::profvis({\n  get_all_s2_squares_on_sphere(alpha = 10)\n}\n)\n\n\n\n\n\n\n\n\n\ns2_squares &lt;- get_all_s2_squares_on_sphere(alpha = 10)\n\ns2_centroids &lt;- s2_squares |&gt; \n  st_centroid()\n\nggplot(data = s2_squares) +\n  geom_sf() +\n  geom_sf(data = s2_centroids, color = \"red\", cex = 0.5)\n\n\n\n\n\n\n\n#--------------------------------------------------\n\ns2_squares_moll &lt;- st_transform(\n  s2_squares,\n  crs = \"+proj=moll\"\n)\n\ns2_centroids_moll &lt;- st_transform(\n  s2_centroids,\n  crs = \"+proj=moll\"\n)\n\nggplot() +\n  geom_sf(data = s2_squares_moll) +\n  geom_sf(data = s2_centroids_moll, color = \"red\", cex = 0.5)"
  },
  {
    "objectID": "posts/20241225_geo_square/index.html#get-geographic-squares",
    "href": "posts/20241225_geo_square/index.html#get-geographic-squares",
    "title": "Get geographic squares",
    "section": "",
    "text": "Code\nlibrary(ggplot2)\nlibrary(sf)\nlibrary(s2)\nlibrary(microbenchmark)\nlibrary(profvis)\nlibrary(purrr)\n\n\n\n\n\n# fonction génératrice de \"carré géographique\" de `alpha` degrés de côté\n# le point de base (lon, lat) est le point inférieur gauche. \n\nget_geo_square &lt;- function(lon, lat, alpha) {\n  \n  points &lt;- list(\n    matrix(\n      c(lon, lat,\n        lon + alpha, lat,\n        lon + alpha, lat + alpha,\n        lon, lat + alpha,\n        lon, lat),\n      ncol = 2,\n      byrow = TRUE\n    )\n  )\n  st_polygon(points)\n  \n}\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\n\n\nLa fonction renvoie un résultat si l’angle \\(\\alpha\\) vérifie la condition :\n\\[90^\\circ\\space\\bmod\\space\\alpha = 0\\]\n\n\n\n\n\n\n\nget_all_geo_squares_on_sphere &lt;- function(alpha) {\n  \n  if (90 %% alpha == 0) {\n    \n    lon &lt;- seq(-180, 180 - alpha, by = alpha)\n    lat &lt;- seq(-90, 90 - alpha, by = alpha)\n    geom &lt;- vector(\"list\", length = length(lon) * length(lat))\n    n &lt;- 0\n    for (x in lon) {\n      for (y in lat) {\n        n &lt;- n + 1\n        geom[[n]] &lt;- get_geo_square(x, y, alpha)\n      }\n    } \n    geom &lt;- geom |&gt; st_as_sfc(crs = st_crs(4326))\n    return(geom)\n  } else {\n    return(NULL)\n  }\n  \n}\n\n\n\n\n\n\nCode\nmicrobenchmark(\n  get_all_geo_squares_on_sphere(alpha = 1),\n  get_all_geo_squares_on_sphere(alpha = 10),\n  times = 10L\n) |&gt; \n  ggplot2::autoplot()\n\n\n\n\n\n\n\n\n\n\n\n\n\ngeo_squares &lt;- get_all_geo_squares_on_sphere(alpha = 10)\n\ngeo_centroids &lt;- geo_squares |&gt; \n  st_centroid()\n\nggplot() +\n  geom_sf(data = geo_squares) +\n  geom_sf(data = geo_centroids, color = \"red\", cex = 0.5)\n\n\n\n\n\n\n\n#--------------------------------------------------\n\ngeo_squares_moll &lt;- st_transform(\n  geo_squares,\n  crs = \"+proj=moll\"\n)\n\ngeo_centroids_moll &lt;- st_transform(\n  geo_centroids,\n  crs = \"+proj=moll\"\n)\n\nggplot() +\n  geom_sf(data = geo_squares_moll) +\n  geom_sf(data = geo_centroids_moll, color = \"red\", cex = 0.5)\n\n\n\n\n\n\n\n\n\n\n\n\nget_s2_square &lt;- function(lon, lat, alpha) {\n  \n  points &lt;- matrix(\n      c(lon, lat,\n        lon + alpha, lat,\n        lon + alpha, lat + alpha,\n        lon, lat + alpha,\n        lon, lat),\n      ncol = 2,\n      byrow = TRUE\n    )\n  s2_make_polygon(points[, 1], points[, 2])\n  \n}\n\nfunction get_all_s2_squares_on_sphere\n\nget_all_s2_squares_on_sphere &lt;- function(alpha) {\n  \n  if (90 %% alpha == 0) {\n    \n    lon &lt;- seq(-180, 180 - alpha, by = alpha)\n    lat &lt;- seq(-90, 90 - alpha, by = alpha)\n    geom &lt;- vector(mode = \"list\", length = length(lon) * length(lat))\n    n &lt;- 0\n    for (x in lon) {\n      for (y in lat) {\n        n &lt;- n + 1\n        geom[[n]] &lt;- get_s2_square(x, y, alpha)\n      }\n    } \n    geom &lt;- geom |&gt; \n      map(st_as_sfc) |&gt; \n      unlist(recursive = FALSE) |&gt; \n      st_as_sfc(crs = st_crs(4326))\n    return(geom)\n  } else {\n    return(NULL)\n  }\n  \n}\n\n\n\n\n\n\nCode\nmicrobenchmark(\n  get_all_s2_squares_on_sphere(alpha = 30),\n  get_all_s2_squares_on_sphere(alpha = 10),\n  times = 100\n) |&gt; \n  ggplot2::autoplot()\n\n\n\n\n\n\n\n\n\n\n\n\n\nprofvis::profvis({\n  get_all_s2_squares_on_sphere(alpha = 10)\n}\n)\n\n\n\n\n\n\n\n\n\ns2_squares &lt;- get_all_s2_squares_on_sphere(alpha = 10)\n\ns2_centroids &lt;- s2_squares |&gt; \n  st_centroid()\n\nggplot(data = s2_squares) +\n  geom_sf() +\n  geom_sf(data = s2_centroids, color = \"red\", cex = 0.5)\n\n\n\n\n\n\n\n#--------------------------------------------------\n\ns2_squares_moll &lt;- st_transform(\n  s2_squares,\n  crs = \"+proj=moll\"\n)\n\ns2_centroids_moll &lt;- st_transform(\n  s2_centroids,\n  crs = \"+proj=moll\"\n)\n\nggplot() +\n  geom_sf(data = s2_squares_moll) +\n  geom_sf(data = s2_centroids_moll, color = \"red\", cex = 0.5)"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "A propos",
    "section": "",
    "text": "Un bac à sable de plus … :)"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "dive-R-city",
    "section": "",
    "text": "pkgnet package\n\n\n\n\n\n\nnews\n\n\ncode\n\n\nanalysis\n\n\n\n\n\n\n\n\n\nJan 9, 2025\n\n\nAlcor\n\n\n\n\n\n\n\n\n\n\n\n\nR packages database (2/?)\n\n\n\n\n\n\nnews\n\n\ncode\n\n\nanalysis\n\n\n\n\n\n\n\n\n\nJan 8, 2025\n\n\nAlcor\n\n\n\n\n\n\n\n\n\n\n\n\nR packages database (1/?)\n\n\n\n\n\n\nnews\n\n\ncode\n\n\nanalysis\n\n\n\n\n\n\n\n\n\nJan 7, 2025\n\n\nAlcor\n\n\n\n\n\n\n\n\n\n\n\n\nGet geographic squares\n\n\n\n\n\n\nnews\n\n\ncode\n\n\nanalysis\n\n\n\n\n\n\n\n\n\nDec 25, 2024\n\n\nAlcor\n\n\n\n\n\n\n\n\n\n\n\n\nBienvenue\n\n\n\n\n\n\nnews\n\n\n\n\n\n\n\n\n\nDec 23, 2024\n\n\nAlcor\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/20250107_pkgdb-1/index.html",
    "href": "posts/20250107_pkgdb-1/index.html",
    "title": "R packages database (1/?)",
    "section": "",
    "text": "Code\nlibrary(purrr)\nlibrary(dplyr)\nlibrary(gt)\nlibrary(tools)\nlibrary(lobstr)\nlibrary(tibble)\nlibrary(rvest)\nlibrary(glue)\n\n\n\n\n\nutilisation de rvest sur le repo /src/contrib\n\n\nurl_repo &lt;- \"https://cloud.r-project.org/src/contrib/\"\n\nlinks &lt;- read_html(url_repo) |&gt; \n  html_elements(\"a\") |&gt; \n  html_attr(\"href\")\n\ntbl_pkg_rvest &lt;- links[grep(\"[.]tar[.]gz$\", links)] |&gt; \n  gsub(pattern = \".tar.gz\", replacement = \"\") |&gt; \n  strsplit(split = \"_\") |&gt; \n  unlist() |&gt; \n  matrix(ncol = 2, \n         byrow = TRUE, \n         dimnames = list(NULL, c(\"Package\", \"Version\"))\n         ) |&gt; \n  as_tibble()\n\n\nutilisation de la fonction available.packages du paquet utils\n\n\ntbl_pkg &lt;- utils::available.packages() |&gt; \n  as_tibble()\n\n\nUtilisation de la fonction CRAN_package_db du paquet tools\n\n\npkgdb &lt;- tools::CRAN_package_db()\n\n\ncomparaisons du nombre d’informations entre les 3 bases\n\n\n\nCode\ntbl_summary &lt;- tibble(\n             n = c(length(unique(tbl_pkg$Package)), \n                   length(unique(pkgdb$Package)),\n                   length(unique(tbl_pkg_rvest$Package))),\n  fields_count = c(ncol(tbl_pkg), ncol(pkgdb), ncol(tbl_pkg_rvest)), \n        taille = c(lobstr::obj_size(tbl_pkg), \n                   lobstr::obj_size(pkgdb),\n                   lobstr::obj_size(tbl_pkg_rvest)) \n)\n\ngt_summary &lt;- gt(tbl_summary) |&gt; \n  tab_header(\n    title    = md(\"**packages R disponibles**\"),\n    subtitle = md(paste(\"(en date du\", Sys.Date(), \")\"))\n  ) |&gt; \n  tab_footnote(\n    footnote  = md(\"Quantité estimée avec la commande `obj_size`\"),\n    locations = cells_column_labels(\n      columns   = taille\n    )\n  ) |&gt; \n  tab_footnote(\n    footnote  = md(\"Données issues de la commande `available.packages`\"),\n    locations = cells_body(\n      columns = c(fields_count,n), \n      rows = 1\n    )\n  ) |&gt; \n  tab_footnote(\n    footnote  = md(\"Données issues de la commande `CRAN_package_db`\"),\n    locations = cells_body(\n      columns = c(fields_count,n), \n      rows = 2\n    )\n  ) |&gt; \n  tab_footnote(\n    footnote  = md(\"Données issues de la commande `rvest`\"),\n    locations = cells_body(\n      columns = c(fields_count,n), \n      rows = 3\n    )\n  )\n  \ngt_summary\n\n\n\n\n\n\n\n\npackages R disponibles\n\n\n(en date du 2025-01-16 )\n\n\nn\nfields_count\ntaille1\n\n\n\n\n2 21884\n2 17\n10.11 MB\n\n\n3 21910\n3 69\n53.92 MB\n\n\n4 21910\n4 2\n1.81 MB\n\n\n\n1 Quantité estimée avec la commande obj_size\n\n\n2 Données issues de la commande available.packages\n\n\n3 Données issues de la commande CRAN_package_db\n\n\n4 Données issues de la commande rvest\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\ne1 &lt;- unique(tbl_pkg_rvest$Package)\ne2 &lt;- unique(tbl_pkg$Package)\ne3 &lt;- unique(pkgdb$Package)\n\nsimilar_pkgs &lt;- intersect(intersect(e1, e2), e3)\n\ndissimilar_tbl_pkg_rvest &lt;- e1[!e1 %in% similar_pkgs]\ndissimilar_tbl_pkg       &lt;- e2[!e2 %in% similar_pkgs]\ndissimilar_pkgdb         &lt;- e3[!e3 %in% similar_pkgs]\n\nidentical(dissimilar_tbl_pkg_rvest, dissimilar_pkgdb)\n\n\n[1] TRUE\n\n\n\n\n\n\n\n\nNote\n\n\n\n\n\n\nNous avons 21884 paquets en commun\nTous les paquets du tibble tbl_pkg sont présents dans le data.frame pkgdb et le tibble tbl_pkg_rvestpuisque :\n\nlength(dissimilar_tbl_pkg) == 0\n\n\n\n\n\n\n\n\n\n\nCode\ndissimilar_pkgs &lt;- pkgdb$Package[!pkgdb$Package %in% similar_pkgs]\ndissimilar_pkgs\n\n\n [1] \"bigGP\"        \"bigReg\"       \"bspm\"         \"clrng\"        \"corrcoverage\"\n [6] \"cronR\"        \"cuda.ml\"      \"doMC\"         \"exif\"         \"flexiblas\"   \n[11] \"gcbd\"         \"gpuR\"         \"ieeeround\"    \"littler\"      \"MPCR\"        \n[16] \"naryn\"        \"nice\"         \"RApiDatetime\" \"RAppArmor\"    \"RcppGetconf\" \n[21] \"redcas\"       \"rspm\"         \"rsyslog\"      \"tglkmeans\"    \"tgstat\"      \n[26] \"unix\"        \n\n\n\n\n\n\n\nCode\npkgdb |&gt;\n  summarize(n = dplyr::n(), .by = Package) |&gt; \n  dplyr::filter(n &gt; 1) |&gt; \n  dplyr::inner_join(pkgdb) |&gt; \n  dplyr::select(c(Package, Version, Depends)) \n\n\nJoining with `by = join_by(Package)`\n\n\n      Package Version                                         Depends\n1        boot  1.3-31                   R (&gt;= 3.0.0), graphics, stats\n2        boot  1.3-31                     R (&gt;= 4.5), graphics, stats\n3       class  7.3-23                      R (&gt;= 3.0.0), stats, utils\n4       class  7.3-23                        R (&gt;= 4.5), stats, utils\n5     cluster   2.1.8                                    R (&gt;= 3.5.0)\n6     cluster   2.1.8                                      R (&gt;= 4.5)\n7   codetools  0.2-20                                      R (&gt;= 2.1)\n8   codetools  0.2-20                                      R (&gt;= 4.5)\n9     foreign  0.8-88                                    R (&gt;= 4.0.0)\n10    foreign  0.8-88                                      R (&gt;= 4.5)\n11 KernSmooth 2.23-26                             R (&gt;= 2.5.0), stats\n12 KernSmooth 2.23-26                               R (&gt;= 4.5), stats\n13    lattice  0.22-6                                    R (&gt;= 4.0.0)\n14    lattice  0.22-6                                      R (&gt;= 4.5)\n15       MASS  7.3-64 R (&gt;= 4.4.0), grDevices, graphics, stats, utils\n16       MASS  7.3-64   R (&gt;= 4.5), grDevices, graphics, stats, utils\n17     Matrix   1.7-1                           R (&gt;= 4.4.0), methods\n18     Matrix   1.7-1                             R (&gt;= 4.5), methods\n19       mgcv   1.9-1                  R (&gt;= 3.6.0), nlme (&gt;= 3.1-64)\n20       mgcv   1.9-1                    R (&gt;= 4.5), nlme (&gt;= 3.1-64)\n21       nlme 3.1-166                                    R (&gt;= 3.6.0)\n22       nlme 3.1-166                                      R (&gt;= 4.5)\n23       nnet  7.3-20                      R (&gt;= 3.0.0), stats, utils\n24       nnet  7.3-20                        R (&gt;= 4.5), stats, utils\n25      rpart  4.1.24       R (&gt;= 2.15.0), graphics, stats, grDevices\n26      rpart  4.1.24          R (&gt;= 4.5), graphics, stats, grDevices\n27    spatial  7.3-18            R (&gt;= 3.0.0), graphics, stats, utils\n28    spatial  7.3-18              R (&gt;= 4.5), graphics, stats, utils\n29   survival   3.8-3                                    R (&gt;= 3.5.0)\n30   survival   3.8-3                                      R (&gt;= 4.5)\n\n\n\n\n\n\nDonnée Published\n\n\n#|label: published_field\n\ncran_repo &lt;- \"https://cran.r-project.org/web/packages/\"\n\nlast_pkg_published &lt;- pkgdb |&gt; \n  select(Package, Version, Published, `Date/Publication`) |&gt; \n  filter(Published == Sys.Date() - 1) |&gt; \n  select(Package, Version, `Date/Publication`) |&gt; \n  arrange(desc(`Date/Publication`), Package, Version) |&gt; \n  mutate(lien = paste0(cran_repo, Package),\n         lien = glue::glue(\"[{Package}]({lien})\"),\n         lien = map(lien, gt::md))\n\ngt_last_pkg_published &lt;- gt(last_pkg_published) |&gt; \n  tab_header(\n    title    = md(\"**Derniers paquets publiés**\"),\n    subtitle  = md(paste(\"Total =\", nrow(last_pkg_published))),\n  ) \n\ngt_last_pkg_published\n\n\n\n\n\n\n\nDerniers paquets publiés\n\n\nTotal = 63\n\n\nPackage\nVersion\nDate/Publication\nlien\n\n\n\n\nVisitorCounts\n2.0.3\n2025-01-15 23:50:02 UTC\nVisitorCounts\n\n\npgenlibr\n0.4.0\n2025-01-15 23:30:03 UTC\npgenlibr\n\n\necharty\n1.6.6\n2025-01-15 22:50:02 UTC\necharty\n\n\nCFtime\n1.5.0\n2025-01-15 22:30:02 UTC\nCFtime\n\n\nOSFD\n3.0\n2025-01-15 22:20:02 UTC\nOSFD\n\n\naccessr\n1.1.1\n2025-01-15 21:50:12 UTC\naccessr\n\n\ndfeR\n1.0.1\n2025-01-15 21:50:07 UTC\ndfeR\n\n\nrwc\n1.12\n2025-01-15 21:50:02 UTC\nrwc\n\n\nppsbm\n1.0.0\n2025-01-15 21:30:02 UTC\nppsbm\n\n\ncausact\n0.5.7\n2025-01-15 21:20:01 UTC\ncausact\n\n\nadmiral\n1.2.0\n2025-01-15 19:50:02 UTC\nadmiral\n\n\nMuPETFlow\n0.1.1\n2025-01-15 19:40:19 UTC\nMuPETFlow\n\n\nRoBMA\n3.3.0\n2025-01-15 19:40:14 UTC\nRoBMA\n\n\nimuf\n0.5.1\n2025-01-15 19:40:10 UTC\nimuf\n\n\npmd\n0.2.7\n2025-01-15 19:40:05 UTC\npmd\n\n\nvisOmopResults\n1.0.0\n2025-01-15 19:40:01 UTC\nvisOmopResults\n\n\nPSpower\n0.1.0\n2025-01-15 19:00:08 UTC\nPSpower\n\n\nRCTRecruit\n0.1.24\n2025-01-15 19:00:04 UTC\nRCTRecruit\n\n\nfucom\n0.0.3\n2025-01-15 19:00:01 UTC\nfucom\n\n\nProtE\n1.0.1\n2025-01-15 18:40:02 UTC\nProtE\n\n\nshinyscholar\n0.2.2\n2025-01-15 18:30:02 UTC\nshinyscholar\n\n\nqmj\n0.2.1\n2025-01-15 18:20:02 UTC\nqmj\n\n\nVAJointSurv\n0.1.1\n2025-01-15 18:10:09 UTC\nVAJointSurv\n\n\ndiario\n0.1.0\n2025-01-15 18:10:05 UTC\ndiario\n\n\npoobly\n0.1.1\n2025-01-15 18:10:01 UTC\npoobly\n\n\nRobLox\n1.2.3\n2025-01-15 18:00:02 UTC\nRobLox\n\n\ncard.pro\n2.3.0\n2025-01-15 17:30:02 UTC\ncard.pro\n\n\nFactoshiny\n2.7\n2025-01-15 16:40:07 UTC\nFactoshiny\n\n\nvchartr\n0.1.4\n2025-01-15 16:40:02 UTC\nvchartr\n\n\nfroggeR\n0.3.0\n2025-01-15 16:30:06 UTC\nfroggeR\n\n\nnetCoin\n2.1.0\n2025-01-15 16:30:01 UTC\nnetCoin\n\n\nevolMap\n1.3.8\n2025-01-15 16:20:05 UTC\nevolMap\n\n\nrD3plot\n1.1.26\n2025-01-15 16:20:02 UTC\nrD3plot\n\n\nseqimpute\n2.2.0\n2025-01-15 16:10:02 UTC\nseqimpute\n\n\nfunkyheatmap\n0.5.1\n2025-01-15 15:10:02 UTC\nfunkyheatmap\n\n\neks\n1.0.7\n2025-01-15 14:50:03 UTC\neks\n\n\nRobAStRDA\n1.2.2\n2025-01-15 14:30:12 UTC\nRobAStRDA\n\n\nRobExtremes\n1.3.2\n2025-01-15 14:30:07 UTC\nRobExtremes\n\n\nadmiraldev\n1.2.0\n2025-01-15 14:30:02 UTC\nadmiraldev\n\n\nivo.table\n0.6\n2025-01-15 14:20:05 UTC\nivo.table\n\n\nopendataformat\n2.1.2\n2025-01-15 14:20:02 UTC\nopendataformat\n\n\nperformance\n0.13.0\n2025-01-15 14:10:02 UTC\nperformance\n\n\nMHCtools\n1.5.4\n2025-01-15 13:50:02 UTC\nMHCtools\n\n\npam\n1.0.1\n2025-01-15 13:40:01 UTC\npam\n\n\nRcppFastFloat\n0.0.5\n2025-01-15 13:30:02 UTC\nRcppFastFloat\n\n\nROptEst\n1.3.5\n2025-01-15 12:00:02 UTC\nROptEst\n\n\nsvines\n0.2.4\n2025-01-15 11:40:02 UTC\nsvines\n\n\nfromhere\n0.1.0\n2025-01-15 10:50:03 UTC\nfromhere\n\n\nfftab\n0.1.0\n2025-01-15 10:40:08 UTC\nfftab\n\n\npsHarmonize\n0.3.5\n2025-01-15 10:40:05 UTC\npsHarmonize\n\n\nsfhelper\n0.2.2.0\n2025-01-15 10:40:02 UTC\nsfhelper\n\n\nSampleSizeSingleArmSurvival\n0.1.0\n2025-01-15 10:20:02 UTC\nSampleSizeSingleArmSurvival\n\n\nepiCo\n1.0.1\n2025-01-15 10:10:01 UTC\nepiCo\n\n\narcgisplaces\n0.1.1\n2025-01-15 09:40:07 UTC\narcgisplaces\n\n\nrlibkriging\n0.9-1\n2025-01-15 09:40:02 UTC\nrlibkriging\n\n\nfaux\n1.2.2\n2025-01-15 09:10:01 UTC\nfaux\n\n\nTapeS\n0.13.1\n2025-01-15 08:10:02 UTC\nTapeS\n\n\ncolorSpec\n1.6-0\n2025-01-15 08:00:19 UTC\ncolorSpec\n\n\ncppcontainers\n1.0.4\n2025-01-15 08:00:14 UTC\ncppcontainers\n\n\nggsem\n0.2.1\n2025-01-15 08:00:11 UTC\nggsem\n\n\ngrainscape\n0.5.0\n2025-01-15 08:00:06 UTC\ngrainscape\n\n\nstats19\n3.3.1\n2025-01-15 08:00:02 UTC\nstats19\n\n\nGLCMTextures\n0.5\n2025-01-15 07:10:01 UTC\nGLCMTextures\n\n\n\n\n\n\n\n\n\n\n\nChamps communs\n\n\n\nCode\nsimilar_fields &lt;- names(tbl_pkg)[names(tbl_pkg) %in% names(pkgdb)]\nsimilar_fields\n\n\n [1] \"Package\"               \"Version\"               \"Priority\"             \n [4] \"Depends\"               \"Imports\"               \"LinkingTo\"            \n [7] \"Suggests\"              \"Enhances\"              \"License\"              \n[10] \"License_is_FOSS\"       \"License_restricts_use\" \"OS_type\"              \n[13] \"Archs\"                 \"MD5sum\"                \"NeedsCompilation\"     \n\n\n\nChamps différents\n\n\n\nCode\ndissimilar_fields_tbl_pkg &lt;- names(tbl_pkg)[!names(tbl_pkg) %in% names(pkgdb)]\ndissimilar_fields_pkgdb &lt;- names(pkgdb)[!names(pkgdb) %in% names(tbl_pkg)]\ndissimilar_fields &lt;- c(dissimilar_fields_tbl_pkg, dissimilar_fields_pkgdb)\ndissimilar_fields\n\n\n [1] \"File\"                    \"Repository\"             \n [3] \"Additional_repositories\" \"Author\"                 \n [5] \"Authors@R\"               \"Biarch\"                 \n [7] \"BugReports\"              \"BuildKeepEmpty\"         \n [9] \"BuildManual\"             \"BuildResaveData\"        \n[11] \"BuildVignettes\"          \"Built\"                  \n[13] \"ByteCompile\"             \"Classification/ACM\"     \n[15] \"Classification/ACM-2012\" \"Classification/JEL\"     \n[17] \"Classification/MSC\"      \"Classification/MSC-2010\"\n[19] \"Collate\"                 \"Collate.unix\"           \n[21] \"Collate.windows\"         \"Contact\"                \n[23] \"Copyright\"               \"Date\"                   \n[25] \"Date/Publication\"        \"Description\"            \n[27] \"Encoding\"                \"KeepSource\"             \n[29] \"Language\"                \"LazyData\"               \n[31] \"LazyDataCompression\"     \"LazyLoad\"               \n[33] \"MailingList\"             \"Maintainer\"             \n[35] \"Note\"                    \"Packaged\"               \n[37] \"RdMacros\"                \"StagedInstall\"          \n[39] \"SysDataCompression\"      \"SystemRequirements\"     \n[41] \"Title\"                   \"Type\"                   \n[43] \"URL\"                     \"UseLTO\"                 \n[45] \"VignetteBuilder\"         \"ZipData\"                \n[47] \"Path\"                    \"X-CRAN-Comment\"         \n[49] \"Published\"               \"Reverse depends\"        \n[51] \"Reverse imports\"         \"Reverse linking to\"     \n[53] \"Reverse suggests\"        \"Reverse enhances\"       \n[55] \"Deadline\"                \"DOI\"                    \n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\n\n\nTous les données contenues dans tbl_pkg et pkgdb sont de type character\nOn peut donc calculer la taille maximale de caractères utilisés pour les données de chaque champ.\n\n\n\n\n\nCode\nget_property     &lt;- function(tbl, f) sapply(tbl, f)\n\nget_NA_count     &lt;- function(x) sum(is.na(x))\nget_data_count   &lt;- function(x) sum(!is.na(x))\nget_unique_count &lt;- function(x) length(unique(x[!is.na(x)]))\nget_max_nchar    &lt;- function(x) {\n  if (all(is.na(x))) return(0) else return(max(nchar(x[!is.na(x)])))\n}\n\nget_gt_summary &lt;- function(tbl) {\n  \n  data_count   &lt;- tbl |&gt; get_property(get_data_count)\n  NA_count     &lt;- tbl |&gt; get_property(get_NA_count)\n  unique_count &lt;- tbl |&gt; get_property(get_unique_count)\n  max_nchar    &lt;- tbl |&gt; get_property(get_max_nchar)\n  \n  resultat &lt;- t(rbind(data_count, NA_count, unique_count, max_nchar))\n  \n  tbl_summary       &lt;- as_tibble(resultat)\n  tbl_summary$field &lt;- dimnames(resultat)[[1]]\n  tbl_summary       &lt;- tbl_summary |&gt; \n    dplyr::relocate(\"field\")\n  \n  names(tbl_summary) &lt;- c(\"Nom du champ\", \n                          \"# lignes avec données\", \n                          \"# lignes avec NA\", \n                          \"# valeurs différentes\", \n                          \"taille max.\")\n  \n  gt_summary &lt;- gt(tbl_summary) |&gt; \n    tab_header(\n      title     = md(\"Données relatives aux différents champs\"),\n      subtitle  = md(paste(\"Nombre de lignes = \", nrow(tbl)))\n    ) |&gt; \n    tab_footnote(\n      footnote  = md(\"La valeur NA n'est pas comptabilisée\"),\n      locations = cells_column_labels(columns = \"# valeurs différentes\")\n    ) |&gt; \n    tab_footnote(\n      footnote  = md(\"En nombre de caractères (0 si NA pour toutes les lignes)\"),\n      locations = cells_column_labels(columns = \"taille max.\")\n    )\n  \n  return(gt_summary)\n  \n}\n\n\n\nde la table tbl_pkg\n\n\n#|label: summary_tbl_pkg\n\ngt_summary_tbl_pkg &lt;- get_gt_summary(tbl_pkg)\ngt_summary_tbl_pkg\n\n\n\n\n\n\n\nDonnées relatives aux différents champs\n\n\nNombre de lignes = 21884\n\n\nNom du champ\n# lignes avec données\n# lignes avec NA\n# valeurs différentes1\ntaille max.2\n\n\n\n\nPackage\n21884\n0\n21884\n35\n\n\nVersion\n21884\n0\n2367\n14\n\n\nPriority\n23\n21861\n2\n11\n\n\nDepends\n16123\n5761\n4488\n284\n\n\nImports\n17688\n4196\n15041\n585\n\n\nLinkingTo\n3081\n18803\n560\n193\n\n\nSuggests\n14753\n7131\n9114\n1267\n\n\nEnhances\n228\n21656\n203\n601\n\n\nLicense\n21884\n0\n159\n54\n\n\nLicense_is_FOSS\n16\n21868\n2\n3\n\n\nLicense_restricts_use\n12\n21872\n2\n3\n\n\nOS_type\n13\n21871\n1\n7\n\n\nArchs\n20\n21864\n2\n9\n\n\nMD5sum\n21884\n0\n21884\n32\n\n\nNeedsCompilation\n21884\n0\n2\n3\n\n\nFile\n0\n21884\n0\n0\n\n\nRepository\n21884\n0\n1\n39\n\n\n\n1 La valeur NA n’est pas comptabilisée\n\n\n2 En nombre de caractères (0 si NA pour toutes les lignes)\n\n\n\n\n\n\n\n\n\nde la table pgkdb\n\n\n#|label: summary_pkgdb\n\ngt_summary_pkgdb &lt;- get_gt_summary(pkgdb)\ngt_summary_pkgdb\n\n\n\n\n\n\n\nDonnées relatives aux différents champs\n\n\nNombre de lignes = 21925\n\n\nNom du champ\n# lignes avec données\n# lignes avec NA\n# valeurs différentes1\ntaille max.2\n\n\n\n\nPackage\n21925\n0\n21910\n35\n\n\nVersion\n21925\n0\n2370\n14\n\n\nPriority\n38\n21887\n2\n11\n\n\nDepends\n16153\n5772\n4503\n284\n\n\nImports\n17709\n4216\n15048\n585\n\n\nLinkingTo\n3089\n18836\n563\n193\n\n\nSuggests\n14781\n7144\n9123\n1267\n\n\nEnhances\n232\n21693\n204\n601\n\n\nLicense\n21925\n0\n159\n54\n\n\nLicense_is_FOSS\n16\n21909\n2\n3\n\n\nLicense_restricts_use\n12\n21913\n2\n3\n\n\nOS_type\n39\n21886\n2\n7\n\n\nArchs\n20\n21905\n2\n9\n\n\nMD5sum\n21925\n0\n21911\n32\n\n\nNeedsCompilation\n21925\n0\n2\n3\n\n\nAdditional_repositories\n162\n21763\n94\n75\n\n\nAuthor\n21925\n0\n18765\n4319\n\n\nAuthors@R\n16598\n5327\n14975\n18532\n\n\nBiarch\n226\n21699\n6\n5\n\n\nBugReports\n9974\n11951\n9902\n84\n\n\nBuildKeepEmpty\n2\n21923\n2\n4\n\n\nBuildManual\n16\n21909\n3\n4\n\n\nBuildResaveData\n34\n21891\n3\n4\n\n\nBuildVignettes\n73\n21852\n4\n4\n\n\nBuilt\n0\n21925\n0\n0\n\n\nByteCompile\n774\n21151\n6\n5\n\n\nClassification/ACM\n17\n21908\n8\n19\n\n\nClassification/ACM-2012\n1\n21924\n1\n255\n\n\nClassification/JEL\n6\n21919\n6\n23\n\n\nClassification/MSC\n25\n21900\n16\n61\n\n\nClassification/MSC-2010\n7\n21918\n7\n33\n\n\nCollate\n1082\n20843\n1082\n5524\n\n\nCollate.unix\n0\n21925\n0\n0\n\n\nCollate.windows\n0\n21925\n0\n0\n\n\nContact\n68\n21857\n47\n176\n\n\nCopyright\n433\n21492\n309\n1082\n\n\nDate\n9124\n12801\n3201\n32\n\n\nDate/Publication\n21925\n0\n21910\n23\n\n\nDescription\n21925\n0\n21906\n7372\n\n\nEncoding\n15904\n6021\n1\n5\n\n\nKeepSource\n16\n21909\n3\n4\n\n\nLanguage\n2224\n19701\n32\n9\n\n\nLazyData\n9432\n12493\n10\n5\n\n\nLazyDataCompression\n283\n21642\n3\n5\n\n\nLazyLoad\n1618\n20307\n9\n5\n\n\nMailingList\n22\n21903\n15\n94\n\n\nMaintainer\n21925\n0\n12336\n86\n\n\nNote\n82\n21843\n62\n701\n\n\nPackaged\n21925\n0\n21899\n156\n\n\nRdMacros\n554\n21371\n11\n17\n\n\nStagedInstall\n12\n21913\n3\n4\n\n\nSysDataCompression\n4\n21921\n2\n4\n\n\nSystemRequirements\n1451\n20474\n718\n530\n\n\nTitle\n21925\n0\n21832\n246\n\n\nType\n13386\n8539\n1\n7\n\n\nURL\n12588\n9337\n12199\n527\n\n\nUseLTO\n9\n21916\n2\n4\n\n\nVignetteBuilder\n8365\n13560\n54\n73\n\n\nZipData\n41\n21884\n5\n4\n\n\nPath\n15\n21910\n1\n17\n\n\nX-CRAN-Comment\n2\n21923\n2\n67\n\n\nPublished\n21925\n0\n3159\n10\n\n\nReverse depends\n1731\n20194\n1595\n5163\n\n\nReverse imports\n5214\n16711\n4826\n44300\n\n\nReverse linking to\n164\n21761\n156\n30796\n\n\nReverse suggests\n4239\n17686\n3729\n109478\n\n\nReverse enhances\n377\n21548\n231\n153\n\n\nDeadline\n158\n21767\n22\n10\n\n\nDOI\n21925\n0\n21910\n57\n\n\n\n1 La valeur NA n’est pas comptabilisée\n\n\n2 En nombre de caractères (0 si NA pour toutes les lignes)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\n\n\nLe data.frame pkgdb contient les données les plus à jour.\nCe fichier sera étudié plus précisément dans le second épisode de cette série de posts sur les paquets R."
  },
  {
    "objectID": "posts/20250107_pkgdb-1/index.html#paquets-r",
    "href": "posts/20250107_pkgdb-1/index.html#paquets-r",
    "title": "R packages database (1/?)",
    "section": "",
    "text": "Code\nlibrary(purrr)\nlibrary(dplyr)\nlibrary(gt)\nlibrary(tools)\nlibrary(lobstr)\nlibrary(tibble)\nlibrary(rvest)\nlibrary(glue)\n\n\n\n\n\nutilisation de rvest sur le repo /src/contrib\n\n\nurl_repo &lt;- \"https://cloud.r-project.org/src/contrib/\"\n\nlinks &lt;- read_html(url_repo) |&gt; \n  html_elements(\"a\") |&gt; \n  html_attr(\"href\")\n\ntbl_pkg_rvest &lt;- links[grep(\"[.]tar[.]gz$\", links)] |&gt; \n  gsub(pattern = \".tar.gz\", replacement = \"\") |&gt; \n  strsplit(split = \"_\") |&gt; \n  unlist() |&gt; \n  matrix(ncol = 2, \n         byrow = TRUE, \n         dimnames = list(NULL, c(\"Package\", \"Version\"))\n         ) |&gt; \n  as_tibble()\n\n\nutilisation de la fonction available.packages du paquet utils\n\n\ntbl_pkg &lt;- utils::available.packages() |&gt; \n  as_tibble()\n\n\nUtilisation de la fonction CRAN_package_db du paquet tools\n\n\npkgdb &lt;- tools::CRAN_package_db()\n\n\ncomparaisons du nombre d’informations entre les 3 bases\n\n\n\nCode\ntbl_summary &lt;- tibble(\n             n = c(length(unique(tbl_pkg$Package)), \n                   length(unique(pkgdb$Package)),\n                   length(unique(tbl_pkg_rvest$Package))),\n  fields_count = c(ncol(tbl_pkg), ncol(pkgdb), ncol(tbl_pkg_rvest)), \n        taille = c(lobstr::obj_size(tbl_pkg), \n                   lobstr::obj_size(pkgdb),\n                   lobstr::obj_size(tbl_pkg_rvest)) \n)\n\ngt_summary &lt;- gt(tbl_summary) |&gt; \n  tab_header(\n    title    = md(\"**packages R disponibles**\"),\n    subtitle = md(paste(\"(en date du\", Sys.Date(), \")\"))\n  ) |&gt; \n  tab_footnote(\n    footnote  = md(\"Quantité estimée avec la commande `obj_size`\"),\n    locations = cells_column_labels(\n      columns   = taille\n    )\n  ) |&gt; \n  tab_footnote(\n    footnote  = md(\"Données issues de la commande `available.packages`\"),\n    locations = cells_body(\n      columns = c(fields_count,n), \n      rows = 1\n    )\n  ) |&gt; \n  tab_footnote(\n    footnote  = md(\"Données issues de la commande `CRAN_package_db`\"),\n    locations = cells_body(\n      columns = c(fields_count,n), \n      rows = 2\n    )\n  ) |&gt; \n  tab_footnote(\n    footnote  = md(\"Données issues de la commande `rvest`\"),\n    locations = cells_body(\n      columns = c(fields_count,n), \n      rows = 3\n    )\n  )\n  \ngt_summary\n\n\n\n\n\n\n\n\npackages R disponibles\n\n\n(en date du 2025-01-16 )\n\n\nn\nfields_count\ntaille1\n\n\n\n\n2 21884\n2 17\n10.11 MB\n\n\n3 21910\n3 69\n53.92 MB\n\n\n4 21910\n4 2\n1.81 MB\n\n\n\n1 Quantité estimée avec la commande obj_size\n\n\n2 Données issues de la commande available.packages\n\n\n3 Données issues de la commande CRAN_package_db\n\n\n4 Données issues de la commande rvest\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\ne1 &lt;- unique(tbl_pkg_rvest$Package)\ne2 &lt;- unique(tbl_pkg$Package)\ne3 &lt;- unique(pkgdb$Package)\n\nsimilar_pkgs &lt;- intersect(intersect(e1, e2), e3)\n\ndissimilar_tbl_pkg_rvest &lt;- e1[!e1 %in% similar_pkgs]\ndissimilar_tbl_pkg       &lt;- e2[!e2 %in% similar_pkgs]\ndissimilar_pkgdb         &lt;- e3[!e3 %in% similar_pkgs]\n\nidentical(dissimilar_tbl_pkg_rvest, dissimilar_pkgdb)\n\n\n[1] TRUE\n\n\n\n\n\n\n\n\nNote\n\n\n\n\n\n\nNous avons 21884 paquets en commun\nTous les paquets du tibble tbl_pkg sont présents dans le data.frame pkgdb et le tibble tbl_pkg_rvestpuisque :\n\nlength(dissimilar_tbl_pkg) == 0\n\n\n\n\n\n\n\n\n\n\nCode\ndissimilar_pkgs &lt;- pkgdb$Package[!pkgdb$Package %in% similar_pkgs]\ndissimilar_pkgs\n\n\n [1] \"bigGP\"        \"bigReg\"       \"bspm\"         \"clrng\"        \"corrcoverage\"\n [6] \"cronR\"        \"cuda.ml\"      \"doMC\"         \"exif\"         \"flexiblas\"   \n[11] \"gcbd\"         \"gpuR\"         \"ieeeround\"    \"littler\"      \"MPCR\"        \n[16] \"naryn\"        \"nice\"         \"RApiDatetime\" \"RAppArmor\"    \"RcppGetconf\" \n[21] \"redcas\"       \"rspm\"         \"rsyslog\"      \"tglkmeans\"    \"tgstat\"      \n[26] \"unix\"        \n\n\n\n\n\n\n\nCode\npkgdb |&gt;\n  summarize(n = dplyr::n(), .by = Package) |&gt; \n  dplyr::filter(n &gt; 1) |&gt; \n  dplyr::inner_join(pkgdb) |&gt; \n  dplyr::select(c(Package, Version, Depends)) \n\n\nJoining with `by = join_by(Package)`\n\n\n      Package Version                                         Depends\n1        boot  1.3-31                   R (&gt;= 3.0.0), graphics, stats\n2        boot  1.3-31                     R (&gt;= 4.5), graphics, stats\n3       class  7.3-23                      R (&gt;= 3.0.0), stats, utils\n4       class  7.3-23                        R (&gt;= 4.5), stats, utils\n5     cluster   2.1.8                                    R (&gt;= 3.5.0)\n6     cluster   2.1.8                                      R (&gt;= 4.5)\n7   codetools  0.2-20                                      R (&gt;= 2.1)\n8   codetools  0.2-20                                      R (&gt;= 4.5)\n9     foreign  0.8-88                                    R (&gt;= 4.0.0)\n10    foreign  0.8-88                                      R (&gt;= 4.5)\n11 KernSmooth 2.23-26                             R (&gt;= 2.5.0), stats\n12 KernSmooth 2.23-26                               R (&gt;= 4.5), stats\n13    lattice  0.22-6                                    R (&gt;= 4.0.0)\n14    lattice  0.22-6                                      R (&gt;= 4.5)\n15       MASS  7.3-64 R (&gt;= 4.4.0), grDevices, graphics, stats, utils\n16       MASS  7.3-64   R (&gt;= 4.5), grDevices, graphics, stats, utils\n17     Matrix   1.7-1                           R (&gt;= 4.4.0), methods\n18     Matrix   1.7-1                             R (&gt;= 4.5), methods\n19       mgcv   1.9-1                  R (&gt;= 3.6.0), nlme (&gt;= 3.1-64)\n20       mgcv   1.9-1                    R (&gt;= 4.5), nlme (&gt;= 3.1-64)\n21       nlme 3.1-166                                    R (&gt;= 3.6.0)\n22       nlme 3.1-166                                      R (&gt;= 4.5)\n23       nnet  7.3-20                      R (&gt;= 3.0.0), stats, utils\n24       nnet  7.3-20                        R (&gt;= 4.5), stats, utils\n25      rpart  4.1.24       R (&gt;= 2.15.0), graphics, stats, grDevices\n26      rpart  4.1.24          R (&gt;= 4.5), graphics, stats, grDevices\n27    spatial  7.3-18            R (&gt;= 3.0.0), graphics, stats, utils\n28    spatial  7.3-18              R (&gt;= 4.5), graphics, stats, utils\n29   survival   3.8-3                                    R (&gt;= 3.5.0)\n30   survival   3.8-3                                      R (&gt;= 4.5)\n\n\n\n\n\n\nDonnée Published\n\n\n#|label: published_field\n\ncran_repo &lt;- \"https://cran.r-project.org/web/packages/\"\n\nlast_pkg_published &lt;- pkgdb |&gt; \n  select(Package, Version, Published, `Date/Publication`) |&gt; \n  filter(Published == Sys.Date() - 1) |&gt; \n  select(Package, Version, `Date/Publication`) |&gt; \n  arrange(desc(`Date/Publication`), Package, Version) |&gt; \n  mutate(lien = paste0(cran_repo, Package),\n         lien = glue::glue(\"[{Package}]({lien})\"),\n         lien = map(lien, gt::md))\n\ngt_last_pkg_published &lt;- gt(last_pkg_published) |&gt; \n  tab_header(\n    title    = md(\"**Derniers paquets publiés**\"),\n    subtitle  = md(paste(\"Total =\", nrow(last_pkg_published))),\n  ) \n\ngt_last_pkg_published\n\n\n\n\n\n\n\nDerniers paquets publiés\n\n\nTotal = 63\n\n\nPackage\nVersion\nDate/Publication\nlien\n\n\n\n\nVisitorCounts\n2.0.3\n2025-01-15 23:50:02 UTC\nVisitorCounts\n\n\npgenlibr\n0.4.0\n2025-01-15 23:30:03 UTC\npgenlibr\n\n\necharty\n1.6.6\n2025-01-15 22:50:02 UTC\necharty\n\n\nCFtime\n1.5.0\n2025-01-15 22:30:02 UTC\nCFtime\n\n\nOSFD\n3.0\n2025-01-15 22:20:02 UTC\nOSFD\n\n\naccessr\n1.1.1\n2025-01-15 21:50:12 UTC\naccessr\n\n\ndfeR\n1.0.1\n2025-01-15 21:50:07 UTC\ndfeR\n\n\nrwc\n1.12\n2025-01-15 21:50:02 UTC\nrwc\n\n\nppsbm\n1.0.0\n2025-01-15 21:30:02 UTC\nppsbm\n\n\ncausact\n0.5.7\n2025-01-15 21:20:01 UTC\ncausact\n\n\nadmiral\n1.2.0\n2025-01-15 19:50:02 UTC\nadmiral\n\n\nMuPETFlow\n0.1.1\n2025-01-15 19:40:19 UTC\nMuPETFlow\n\n\nRoBMA\n3.3.0\n2025-01-15 19:40:14 UTC\nRoBMA\n\n\nimuf\n0.5.1\n2025-01-15 19:40:10 UTC\nimuf\n\n\npmd\n0.2.7\n2025-01-15 19:40:05 UTC\npmd\n\n\nvisOmopResults\n1.0.0\n2025-01-15 19:40:01 UTC\nvisOmopResults\n\n\nPSpower\n0.1.0\n2025-01-15 19:00:08 UTC\nPSpower\n\n\nRCTRecruit\n0.1.24\n2025-01-15 19:00:04 UTC\nRCTRecruit\n\n\nfucom\n0.0.3\n2025-01-15 19:00:01 UTC\nfucom\n\n\nProtE\n1.0.1\n2025-01-15 18:40:02 UTC\nProtE\n\n\nshinyscholar\n0.2.2\n2025-01-15 18:30:02 UTC\nshinyscholar\n\n\nqmj\n0.2.1\n2025-01-15 18:20:02 UTC\nqmj\n\n\nVAJointSurv\n0.1.1\n2025-01-15 18:10:09 UTC\nVAJointSurv\n\n\ndiario\n0.1.0\n2025-01-15 18:10:05 UTC\ndiario\n\n\npoobly\n0.1.1\n2025-01-15 18:10:01 UTC\npoobly\n\n\nRobLox\n1.2.3\n2025-01-15 18:00:02 UTC\nRobLox\n\n\ncard.pro\n2.3.0\n2025-01-15 17:30:02 UTC\ncard.pro\n\n\nFactoshiny\n2.7\n2025-01-15 16:40:07 UTC\nFactoshiny\n\n\nvchartr\n0.1.4\n2025-01-15 16:40:02 UTC\nvchartr\n\n\nfroggeR\n0.3.0\n2025-01-15 16:30:06 UTC\nfroggeR\n\n\nnetCoin\n2.1.0\n2025-01-15 16:30:01 UTC\nnetCoin\n\n\nevolMap\n1.3.8\n2025-01-15 16:20:05 UTC\nevolMap\n\n\nrD3plot\n1.1.26\n2025-01-15 16:20:02 UTC\nrD3plot\n\n\nseqimpute\n2.2.0\n2025-01-15 16:10:02 UTC\nseqimpute\n\n\nfunkyheatmap\n0.5.1\n2025-01-15 15:10:02 UTC\nfunkyheatmap\n\n\neks\n1.0.7\n2025-01-15 14:50:03 UTC\neks\n\n\nRobAStRDA\n1.2.2\n2025-01-15 14:30:12 UTC\nRobAStRDA\n\n\nRobExtremes\n1.3.2\n2025-01-15 14:30:07 UTC\nRobExtremes\n\n\nadmiraldev\n1.2.0\n2025-01-15 14:30:02 UTC\nadmiraldev\n\n\nivo.table\n0.6\n2025-01-15 14:20:05 UTC\nivo.table\n\n\nopendataformat\n2.1.2\n2025-01-15 14:20:02 UTC\nopendataformat\n\n\nperformance\n0.13.0\n2025-01-15 14:10:02 UTC\nperformance\n\n\nMHCtools\n1.5.4\n2025-01-15 13:50:02 UTC\nMHCtools\n\n\npam\n1.0.1\n2025-01-15 13:40:01 UTC\npam\n\n\nRcppFastFloat\n0.0.5\n2025-01-15 13:30:02 UTC\nRcppFastFloat\n\n\nROptEst\n1.3.5\n2025-01-15 12:00:02 UTC\nROptEst\n\n\nsvines\n0.2.4\n2025-01-15 11:40:02 UTC\nsvines\n\n\nfromhere\n0.1.0\n2025-01-15 10:50:03 UTC\nfromhere\n\n\nfftab\n0.1.0\n2025-01-15 10:40:08 UTC\nfftab\n\n\npsHarmonize\n0.3.5\n2025-01-15 10:40:05 UTC\npsHarmonize\n\n\nsfhelper\n0.2.2.0\n2025-01-15 10:40:02 UTC\nsfhelper\n\n\nSampleSizeSingleArmSurvival\n0.1.0\n2025-01-15 10:20:02 UTC\nSampleSizeSingleArmSurvival\n\n\nepiCo\n1.0.1\n2025-01-15 10:10:01 UTC\nepiCo\n\n\narcgisplaces\n0.1.1\n2025-01-15 09:40:07 UTC\narcgisplaces\n\n\nrlibkriging\n0.9-1\n2025-01-15 09:40:02 UTC\nrlibkriging\n\n\nfaux\n1.2.2\n2025-01-15 09:10:01 UTC\nfaux\n\n\nTapeS\n0.13.1\n2025-01-15 08:10:02 UTC\nTapeS\n\n\ncolorSpec\n1.6-0\n2025-01-15 08:00:19 UTC\ncolorSpec\n\n\ncppcontainers\n1.0.4\n2025-01-15 08:00:14 UTC\ncppcontainers\n\n\nggsem\n0.2.1\n2025-01-15 08:00:11 UTC\nggsem\n\n\ngrainscape\n0.5.0\n2025-01-15 08:00:06 UTC\ngrainscape\n\n\nstats19\n3.3.1\n2025-01-15 08:00:02 UTC\nstats19\n\n\nGLCMTextures\n0.5\n2025-01-15 07:10:01 UTC\nGLCMTextures\n\n\n\n\n\n\n\n\n\n\n\nChamps communs\n\n\n\nCode\nsimilar_fields &lt;- names(tbl_pkg)[names(tbl_pkg) %in% names(pkgdb)]\nsimilar_fields\n\n\n [1] \"Package\"               \"Version\"               \"Priority\"             \n [4] \"Depends\"               \"Imports\"               \"LinkingTo\"            \n [7] \"Suggests\"              \"Enhances\"              \"License\"              \n[10] \"License_is_FOSS\"       \"License_restricts_use\" \"OS_type\"              \n[13] \"Archs\"                 \"MD5sum\"                \"NeedsCompilation\"     \n\n\n\nChamps différents\n\n\n\nCode\ndissimilar_fields_tbl_pkg &lt;- names(tbl_pkg)[!names(tbl_pkg) %in% names(pkgdb)]\ndissimilar_fields_pkgdb &lt;- names(pkgdb)[!names(pkgdb) %in% names(tbl_pkg)]\ndissimilar_fields &lt;- c(dissimilar_fields_tbl_pkg, dissimilar_fields_pkgdb)\ndissimilar_fields\n\n\n [1] \"File\"                    \"Repository\"             \n [3] \"Additional_repositories\" \"Author\"                 \n [5] \"Authors@R\"               \"Biarch\"                 \n [7] \"BugReports\"              \"BuildKeepEmpty\"         \n [9] \"BuildManual\"             \"BuildResaveData\"        \n[11] \"BuildVignettes\"          \"Built\"                  \n[13] \"ByteCompile\"             \"Classification/ACM\"     \n[15] \"Classification/ACM-2012\" \"Classification/JEL\"     \n[17] \"Classification/MSC\"      \"Classification/MSC-2010\"\n[19] \"Collate\"                 \"Collate.unix\"           \n[21] \"Collate.windows\"         \"Contact\"                \n[23] \"Copyright\"               \"Date\"                   \n[25] \"Date/Publication\"        \"Description\"            \n[27] \"Encoding\"                \"KeepSource\"             \n[29] \"Language\"                \"LazyData\"               \n[31] \"LazyDataCompression\"     \"LazyLoad\"               \n[33] \"MailingList\"             \"Maintainer\"             \n[35] \"Note\"                    \"Packaged\"               \n[37] \"RdMacros\"                \"StagedInstall\"          \n[39] \"SysDataCompression\"      \"SystemRequirements\"     \n[41] \"Title\"                   \"Type\"                   \n[43] \"URL\"                     \"UseLTO\"                 \n[45] \"VignetteBuilder\"         \"ZipData\"                \n[47] \"Path\"                    \"X-CRAN-Comment\"         \n[49] \"Published\"               \"Reverse depends\"        \n[51] \"Reverse imports\"         \"Reverse linking to\"     \n[53] \"Reverse suggests\"        \"Reverse enhances\"       \n[55] \"Deadline\"                \"DOI\"                    \n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\n\n\nTous les données contenues dans tbl_pkg et pkgdb sont de type character\nOn peut donc calculer la taille maximale de caractères utilisés pour les données de chaque champ.\n\n\n\n\n\nCode\nget_property     &lt;- function(tbl, f) sapply(tbl, f)\n\nget_NA_count     &lt;- function(x) sum(is.na(x))\nget_data_count   &lt;- function(x) sum(!is.na(x))\nget_unique_count &lt;- function(x) length(unique(x[!is.na(x)]))\nget_max_nchar    &lt;- function(x) {\n  if (all(is.na(x))) return(0) else return(max(nchar(x[!is.na(x)])))\n}\n\nget_gt_summary &lt;- function(tbl) {\n  \n  data_count   &lt;- tbl |&gt; get_property(get_data_count)\n  NA_count     &lt;- tbl |&gt; get_property(get_NA_count)\n  unique_count &lt;- tbl |&gt; get_property(get_unique_count)\n  max_nchar    &lt;- tbl |&gt; get_property(get_max_nchar)\n  \n  resultat &lt;- t(rbind(data_count, NA_count, unique_count, max_nchar))\n  \n  tbl_summary       &lt;- as_tibble(resultat)\n  tbl_summary$field &lt;- dimnames(resultat)[[1]]\n  tbl_summary       &lt;- tbl_summary |&gt; \n    dplyr::relocate(\"field\")\n  \n  names(tbl_summary) &lt;- c(\"Nom du champ\", \n                          \"# lignes avec données\", \n                          \"# lignes avec NA\", \n                          \"# valeurs différentes\", \n                          \"taille max.\")\n  \n  gt_summary &lt;- gt(tbl_summary) |&gt; \n    tab_header(\n      title     = md(\"Données relatives aux différents champs\"),\n      subtitle  = md(paste(\"Nombre de lignes = \", nrow(tbl)))\n    ) |&gt; \n    tab_footnote(\n      footnote  = md(\"La valeur NA n'est pas comptabilisée\"),\n      locations = cells_column_labels(columns = \"# valeurs différentes\")\n    ) |&gt; \n    tab_footnote(\n      footnote  = md(\"En nombre de caractères (0 si NA pour toutes les lignes)\"),\n      locations = cells_column_labels(columns = \"taille max.\")\n    )\n  \n  return(gt_summary)\n  \n}\n\n\n\nde la table tbl_pkg\n\n\n#|label: summary_tbl_pkg\n\ngt_summary_tbl_pkg &lt;- get_gt_summary(tbl_pkg)\ngt_summary_tbl_pkg\n\n\n\n\n\n\n\nDonnées relatives aux différents champs\n\n\nNombre de lignes = 21884\n\n\nNom du champ\n# lignes avec données\n# lignes avec NA\n# valeurs différentes1\ntaille max.2\n\n\n\n\nPackage\n21884\n0\n21884\n35\n\n\nVersion\n21884\n0\n2367\n14\n\n\nPriority\n23\n21861\n2\n11\n\n\nDepends\n16123\n5761\n4488\n284\n\n\nImports\n17688\n4196\n15041\n585\n\n\nLinkingTo\n3081\n18803\n560\n193\n\n\nSuggests\n14753\n7131\n9114\n1267\n\n\nEnhances\n228\n21656\n203\n601\n\n\nLicense\n21884\n0\n159\n54\n\n\nLicense_is_FOSS\n16\n21868\n2\n3\n\n\nLicense_restricts_use\n12\n21872\n2\n3\n\n\nOS_type\n13\n21871\n1\n7\n\n\nArchs\n20\n21864\n2\n9\n\n\nMD5sum\n21884\n0\n21884\n32\n\n\nNeedsCompilation\n21884\n0\n2\n3\n\n\nFile\n0\n21884\n0\n0\n\n\nRepository\n21884\n0\n1\n39\n\n\n\n1 La valeur NA n’est pas comptabilisée\n\n\n2 En nombre de caractères (0 si NA pour toutes les lignes)\n\n\n\n\n\n\n\n\n\nde la table pgkdb\n\n\n#|label: summary_pkgdb\n\ngt_summary_pkgdb &lt;- get_gt_summary(pkgdb)\ngt_summary_pkgdb\n\n\n\n\n\n\n\nDonnées relatives aux différents champs\n\n\nNombre de lignes = 21925\n\n\nNom du champ\n# lignes avec données\n# lignes avec NA\n# valeurs différentes1\ntaille max.2\n\n\n\n\nPackage\n21925\n0\n21910\n35\n\n\nVersion\n21925\n0\n2370\n14\n\n\nPriority\n38\n21887\n2\n11\n\n\nDepends\n16153\n5772\n4503\n284\n\n\nImports\n17709\n4216\n15048\n585\n\n\nLinkingTo\n3089\n18836\n563\n193\n\n\nSuggests\n14781\n7144\n9123\n1267\n\n\nEnhances\n232\n21693\n204\n601\n\n\nLicense\n21925\n0\n159\n54\n\n\nLicense_is_FOSS\n16\n21909\n2\n3\n\n\nLicense_restricts_use\n12\n21913\n2\n3\n\n\nOS_type\n39\n21886\n2\n7\n\n\nArchs\n20\n21905\n2\n9\n\n\nMD5sum\n21925\n0\n21911\n32\n\n\nNeedsCompilation\n21925\n0\n2\n3\n\n\nAdditional_repositories\n162\n21763\n94\n75\n\n\nAuthor\n21925\n0\n18765\n4319\n\n\nAuthors@R\n16598\n5327\n14975\n18532\n\n\nBiarch\n226\n21699\n6\n5\n\n\nBugReports\n9974\n11951\n9902\n84\n\n\nBuildKeepEmpty\n2\n21923\n2\n4\n\n\nBuildManual\n16\n21909\n3\n4\n\n\nBuildResaveData\n34\n21891\n3\n4\n\n\nBuildVignettes\n73\n21852\n4\n4\n\n\nBuilt\n0\n21925\n0\n0\n\n\nByteCompile\n774\n21151\n6\n5\n\n\nClassification/ACM\n17\n21908\n8\n19\n\n\nClassification/ACM-2012\n1\n21924\n1\n255\n\n\nClassification/JEL\n6\n21919\n6\n23\n\n\nClassification/MSC\n25\n21900\n16\n61\n\n\nClassification/MSC-2010\n7\n21918\n7\n33\n\n\nCollate\n1082\n20843\n1082\n5524\n\n\nCollate.unix\n0\n21925\n0\n0\n\n\nCollate.windows\n0\n21925\n0\n0\n\n\nContact\n68\n21857\n47\n176\n\n\nCopyright\n433\n21492\n309\n1082\n\n\nDate\n9124\n12801\n3201\n32\n\n\nDate/Publication\n21925\n0\n21910\n23\n\n\nDescription\n21925\n0\n21906\n7372\n\n\nEncoding\n15904\n6021\n1\n5\n\n\nKeepSource\n16\n21909\n3\n4\n\n\nLanguage\n2224\n19701\n32\n9\n\n\nLazyData\n9432\n12493\n10\n5\n\n\nLazyDataCompression\n283\n21642\n3\n5\n\n\nLazyLoad\n1618\n20307\n9\n5\n\n\nMailingList\n22\n21903\n15\n94\n\n\nMaintainer\n21925\n0\n12336\n86\n\n\nNote\n82\n21843\n62\n701\n\n\nPackaged\n21925\n0\n21899\n156\n\n\nRdMacros\n554\n21371\n11\n17\n\n\nStagedInstall\n12\n21913\n3\n4\n\n\nSysDataCompression\n4\n21921\n2\n4\n\n\nSystemRequirements\n1451\n20474\n718\n530\n\n\nTitle\n21925\n0\n21832\n246\n\n\nType\n13386\n8539\n1\n7\n\n\nURL\n12588\n9337\n12199\n527\n\n\nUseLTO\n9\n21916\n2\n4\n\n\nVignetteBuilder\n8365\n13560\n54\n73\n\n\nZipData\n41\n21884\n5\n4\n\n\nPath\n15\n21910\n1\n17\n\n\nX-CRAN-Comment\n2\n21923\n2\n67\n\n\nPublished\n21925\n0\n3159\n10\n\n\nReverse depends\n1731\n20194\n1595\n5163\n\n\nReverse imports\n5214\n16711\n4826\n44300\n\n\nReverse linking to\n164\n21761\n156\n30796\n\n\nReverse suggests\n4239\n17686\n3729\n109478\n\n\nReverse enhances\n377\n21548\n231\n153\n\n\nDeadline\n158\n21767\n22\n10\n\n\nDOI\n21925\n0\n21910\n57\n\n\n\n1 La valeur NA n’est pas comptabilisée\n\n\n2 En nombre de caractères (0 si NA pour toutes les lignes)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\n\n\nLe data.frame pkgdb contient les données les plus à jour.\nCe fichier sera étudié plus précisément dans le second épisode de cette série de posts sur les paquets R."
  },
  {
    "objectID": "posts/20250109_pkgnet/index.html",
    "href": "posts/20250109_pkgnet/index.html",
    "title": "pkgnet package",
    "section": "",
    "text": "Code\nlibrary(pkgnet)\n\n\n\n# CreatePackageReport(pkg_name = \"rvest\")"
  },
  {
    "objectID": "posts/20250109_pkgnet/index.html#paquets-r",
    "href": "posts/20250109_pkgnet/index.html#paquets-r",
    "title": "pkgnet package",
    "section": "",
    "text": "Code\nlibrary(pkgnet)\n\n\n\n# CreatePackageReport(pkg_name = \"rvest\")"
  }
]